(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Og(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fh={exports:{}},ia={},dh={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function n0(){if(nm)return Ae;nm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=C&&D[C]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,$={};function F(D,H,he){this.props=D,this.context=H,this.refs=$,this.updater=he||z}F.prototype.isReactComponent={},F.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},F.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function pe(){}pe.prototype=F.prototype;function me(D,H,he){this.props=D,this.context=H,this.refs=$,this.updater=he||z}var fe=me.prototype=new pe;fe.constructor=me,G(fe,F.prototype),fe.isPureReactComponent=!0;var ce=Array.isArray,ie=Object.prototype.hasOwnProperty,le={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(D,H,he){var Ie,Se={},ke=null,Le=null;if(H!=null)for(Ie in H.ref!==void 0&&(Le=H.ref),H.key!==void 0&&(ke=""+H.key),H)ie.call(H,Ie)&&!N.hasOwnProperty(Ie)&&(Se[Ie]=H[Ie]);var Fe=arguments.length-2;if(Fe===1)Se.children=he;else if(1<Fe){for(var Be=Array(Fe),yt=0;yt<Fe;yt++)Be[yt]=arguments[yt+2];Se.children=Be}if(D&&D.defaultProps)for(Ie in Fe=D.defaultProps,Fe)Se[Ie]===void 0&&(Se[Ie]=Fe[Ie]);return{$$typeof:i,type:D,key:ke,ref:Le,props:Se,_owner:le.current}}function A(D,H){return{$$typeof:i,type:D.type,key:H,ref:D.ref,props:D.props,_owner:D._owner}}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function V(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(he){return H[he]})}var M=/\/+/g;function S(D,H){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):H.toString(36)}function tt(D,H,he,Ie,Se){var ke=typeof D;(ke==="undefined"||ke==="boolean")&&(D=null);var Le=!1;if(D===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(D.$$typeof){case i:case e:Le=!0}}if(Le)return Le=D,Se=Se(Le),D=Ie===""?"."+S(Le,0):Ie,ce(Se)?(he="",D!=null&&(he=D.replace(M,"$&/")+"/"),tt(Se,H,he,"",function(yt){return yt})):Se!=null&&(x(Se)&&(Se=A(Se,he+(!Se.key||Le&&Le.key===Se.key?"":(""+Se.key).replace(M,"$&/")+"/")+D)),H.push(Se)),1;if(Le=0,Ie=Ie===""?".":Ie+":",ce(D))for(var Fe=0;Fe<D.length;Fe++){ke=D[Fe];var Be=Ie+S(ke,Fe);Le+=tt(ke,H,he,Be,Se)}else if(Be=R(D),typeof Be=="function")for(D=Be.call(D),Fe=0;!(ke=D.next()).done;)ke=ke.value,Be=Ie+S(ke,Fe++),Le+=tt(ke,H,he,Be,Se);else if(ke==="object")throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Le}function xt(D,H,he){if(D==null)return D;var Ie=[],Se=0;return tt(D,Ie,"","",function(ke){return H.call(he,ke,Se++)}),Ie}function Nt(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(he){(D._status===0||D._status===-1)&&(D._status=1,D._result=he)},function(he){(D._status===0||D._status===-1)&&(D._status=2,D._result=he)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var Ue={current:null},Z={transition:null},ge={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Z,ReactCurrentOwner:le};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:xt,forEach:function(D,H,he){xt(D,function(){H.apply(this,arguments)},he)},count:function(D){var H=0;return xt(D,function(){H++}),H},toArray:function(D){return xt(D,function(H){return H})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ae.Component=F,Ae.Fragment=n,Ae.Profiler=a,Ae.PureComponent=me,Ae.StrictMode=s,Ae.Suspense=y,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ae.act=ne,Ae.cloneElement=function(D,H,he){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Ie=G({},D.props),Se=D.key,ke=D.ref,Le=D._owner;if(H!=null){if(H.ref!==void 0&&(ke=H.ref,Le=le.current),H.key!==void 0&&(Se=""+H.key),D.type&&D.type.defaultProps)var Fe=D.type.defaultProps;for(Be in H)ie.call(H,Be)&&!N.hasOwnProperty(Be)&&(Ie[Be]=H[Be]===void 0&&Fe!==void 0?Fe[Be]:H[Be])}var Be=arguments.length-2;if(Be===1)Ie.children=he;else if(1<Be){Fe=Array(Be);for(var yt=0;yt<Be;yt++)Fe[yt]=arguments[yt+2];Ie.children=Fe}return{$$typeof:i,type:D.type,key:Se,ref:ke,props:Ie,_owner:Le}},Ae.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:c,_context:D},D.Consumer=D},Ae.createElement=I,Ae.createFactory=function(D){var H=I.bind(null,D);return H.type=D,H},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(D){return{$$typeof:m,render:D}},Ae.isValidElement=x,Ae.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:Nt}},Ae.memo=function(D,H){return{$$typeof:v,type:D,compare:H===void 0?null:H}},Ae.startTransition=function(D){var H=Z.transition;Z.transition={};try{D()}finally{Z.transition=H}},Ae.unstable_act=ne,Ae.useCallback=function(D,H){return Ue.current.useCallback(D,H)},Ae.useContext=function(D){return Ue.current.useContext(D)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(D){return Ue.current.useDeferredValue(D)},Ae.useEffect=function(D,H){return Ue.current.useEffect(D,H)},Ae.useId=function(){return Ue.current.useId()},Ae.useImperativeHandle=function(D,H,he){return Ue.current.useImperativeHandle(D,H,he)},Ae.useInsertionEffect=function(D,H){return Ue.current.useInsertionEffect(D,H)},Ae.useLayoutEffect=function(D,H){return Ue.current.useLayoutEffect(D,H)},Ae.useMemo=function(D,H){return Ue.current.useMemo(D,H)},Ae.useReducer=function(D,H,he){return Ue.current.useReducer(D,H,he)},Ae.useRef=function(D){return Ue.current.useRef(D)},Ae.useState=function(D){return Ue.current.useState(D)},Ae.useSyncExternalStore=function(D,H,he){return Ue.current.useSyncExternalStore(D,H,he)},Ae.useTransition=function(){return Ue.current.useTransition()},Ae.version="18.3.1",Ae}var rm;function ef(){return rm||(rm=1,dh.exports=n0()),dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function r0(){if(im)return ia;im=1;var i=ef(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,v){var E,C={},R=null,z=null;v!==void 0&&(R=""+v),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(z=y.ref);for(E in y)s.call(y,E)&&!c.hasOwnProperty(E)&&(C[E]=y[E]);if(m&&m.defaultProps)for(E in y=m.defaultProps,y)C[E]===void 0&&(C[E]=y[E]);return{$$typeof:e,type:m,key:R,ref:z,props:C,_owner:a.current}}return ia.Fragment=n,ia.jsx=f,ia.jsxs=f,ia}var sm;function i0(){return sm||(sm=1,fh.exports=r0()),fh.exports}var Y=i0(),Oe=ef();const s0=Og(Oe);var Wl={},ph={exports:{}},Yt={},mh={exports:{}},gh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function o0(){return om||(om=1,(function(i){function e(Z,ge){var ne=Z.length;Z.push(ge);e:for(;0<ne;){var D=ne-1>>>1,H=Z[D];if(0<a(H,ge))Z[D]=ge,Z[ne]=H,ne=D;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ge=Z[0],ne=Z.pop();if(ne!==ge){Z[0]=ne;e:for(var D=0,H=Z.length,he=H>>>1;D<he;){var Ie=2*(D+1)-1,Se=Z[Ie],ke=Ie+1,Le=Z[ke];if(0>a(Se,ne))ke<H&&0>a(Le,Se)?(Z[D]=Le,Z[ke]=ne,D=ke):(Z[D]=Se,Z[Ie]=ne,D=Ie);else if(ke<H&&0>a(Le,ne))Z[D]=Le,Z[ke]=ne,D=ke;else break e}}return ge}function a(Z,ge){var ne=Z.sortIndex-ge.sortIndex;return ne!==0?ne:Z.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],v=[],E=1,C=null,R=3,z=!1,G=!1,$=!1,F=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function fe(Z){for(var ge=n(v);ge!==null;){if(ge.callback===null)s(v);else if(ge.startTime<=Z)s(v),ge.sortIndex=ge.expirationTime,e(y,ge);else break;ge=n(v)}}function ce(Z){if($=!1,fe(Z),!G)if(n(y)!==null)G=!0,Nt(ie);else{var ge=n(v);ge!==null&&Ue(ce,ge.startTime-Z)}}function ie(Z,ge){G=!1,$&&($=!1,pe(I),I=-1),z=!0;var ne=R;try{for(fe(ge),C=n(y);C!==null&&(!(C.expirationTime>ge)||Z&&!V());){var D=C.callback;if(typeof D=="function"){C.callback=null,R=C.priorityLevel;var H=D(C.expirationTime<=ge);ge=i.unstable_now(),typeof H=="function"?C.callback=H:C===n(y)&&s(y),fe(ge)}else s(y);C=n(y)}if(C!==null)var he=!0;else{var Ie=n(v);Ie!==null&&Ue(ce,Ie.startTime-ge),he=!1}return he}finally{C=null,R=ne,z=!1}}var le=!1,N=null,I=-1,A=5,x=-1;function V(){return!(i.unstable_now()-x<A)}function M(){if(N!==null){var Z=i.unstable_now();x=Z;var ge=!0;try{ge=N(!0,Z)}finally{ge?S():(le=!1,N=null)}}else le=!1}var S;if(typeof me=="function")S=function(){me(M)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,xt=tt.port2;tt.port1.onmessage=M,S=function(){xt.postMessage(null)}}else S=function(){F(M,0)};function Nt(Z){N=Z,le||(le=!0,S())}function Ue(Z,ge){I=F(function(){Z(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){G||z||(G=!0,Nt(ie))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(Z){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var ne=R;R=ge;try{return Z()}finally{R=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=R;R=Z;try{return ge()}finally{R=ne}},i.unstable_scheduleCallback=function(Z,ge,ne){var D=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?D+ne:D):ne=D,Z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ne+H,Z={id:E++,callback:ge,priorityLevel:Z,startTime:ne,expirationTime:H,sortIndex:-1},ne>D?(Z.sortIndex=ne,e(v,Z),n(y)===null&&Z===n(v)&&($?(pe(I),I=-1):$=!0,Ue(ce,ne-D))):(Z.sortIndex=H,e(y,Z),G||z||(G=!0,Nt(ie))),Z},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Z){var ge=R;return function(){var ne=R;R=ge;try{return Z.apply(this,arguments)}finally{R=ne}}}})(gh)),gh}var am;function a0(){return am||(am=1,mh.exports=o0()),mh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function l0(){if(lm)return Yt;lm=1;var i=ef(),e=a0();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},C={};function R(t){return y.call(C,t)?!0:y.call(E,t)?!1:v.test(t)?C[t]=!0:(E[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function $(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){F[t]=new $(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];F[r]=new $(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){F[t]=new $(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){F[t]=new $(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){F[t]=new $(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){F[t]=new $(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){F[t]=new $(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){F[t]=new $(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){F[t]=new $(t,5,!1,t.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function me(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(pe,me);F[r]=new $(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(pe,me);F[r]=new $(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(pe,me);F[r]=new $(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){F[t]=new $(t,1,!1,t.toLowerCase(),null,!1,!1)}),F.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){F[t]=new $(t,1,!1,t.toLowerCase(),null,!0,!0)});function fe(t,r,o,u){var h=F.hasOwnProperty(r)?F[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(G(r,o,h,u)&&(o=null),u||h===null?R(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ce=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),le=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,D;function H(t){if(D===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+t}var he=!1;function Ie(t,r){if(!t||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var u=j}Reflect.construct(t,[],r)}else{try{r.call()}catch(j){u=j}t.call(r.prototype)}else{try{throw Error()}catch(j){u=j}t()}}catch(j){if(j&&u&&typeof j.stack=="string"){for(var h=j.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,T=p.length-1;1<=_&&0<=T&&h[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(h[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||h[_]!==p[T]){var P=`
`+h[_].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=_&&0<=T);break}}}finally{he=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?H(t):""}function Se(t){switch(t.tag){case 5:return H(t.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case le:return"Portal";case A:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case tt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case x:return(t._context.displayName||"Context")+".Provider";case M:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case Nt:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ir(t){t._valueTracker||(t._valueTracker=yt(t))}function ts(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pi(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function ns(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function uo(t,r){r=r.checked,r!=null&&fe(t,"checked",r,!1)}function co(t,r){uo(t,r);var o=Fe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?rs(t,r.type,o):r.hasOwnProperty("defaultValue")&&rs(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Va(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function rs(t,r,o){(r!=="number"||Cr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var sr=Array.isArray;function or(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function ho(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function is(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(sr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function ss(t,r){var o=Fe(r.value),u=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function fo(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ht(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ar,po=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ar.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Rr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gi=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(t){gi.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),mi[r]=mi[t]})});function mo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||mi.hasOwnProperty(t)&&mi[t]?(""+r).trim():r+"px"}function go(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=mo(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var yo=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(t,r){if(r){if(yo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function vo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=null;function os(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,cn=null,jn=null;function ls(t){if(t=$o(t)){if(typeof as!="function")throw Error(n(280));var r=t.stateNode;r&&(r=ll(r),as(t.stateNode,t.type,r))}}function Un(t){cn?jn?jn.push(t):jn=[t]:cn=t}function wo(){if(cn){var t=cn,r=jn;if(jn=cn=null,ls(t),r)for(t=0;t<r.length;t++)ls(r[t])}}function _i(t,r){return t(r)}function Eo(){}var lr=!1;function To(t,r,o){if(lr)return t(r,o);lr=!0;try{return _i(t,r,o)}finally{lr=!1,(cn!==null||jn!==null)&&(Eo(),wo())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=ll(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var us=!1;if(m)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){us=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{us=!1}function vi(t,r,o,u,h,p,_,T,P){var j=Array.prototype.slice.call(arguments,3);try{r.apply(o,j)}catch(Q){this.onError(Q)}}var wi=!1,cs=null,In=!1,Io=null,Uu={onError:function(t){wi=!0,cs=t}};function hs(t,r,o,u,h,p,_,T,P){wi=!1,cs=null,vi.apply(Uu,arguments)}function Da(t,r,o,u,h,p,_,T,P){if(hs.apply(this,arguments),wi){if(wi){var j=cs;wi=!1,cs=null}else throw Error(n(198));In||(In=!0,Io=j)}}function Sn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function Ei(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function An(t){if(Sn(t)!==t)throw Error(n(188))}function Ma(t){var r=t.alternate;if(!r){if(r=Sn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return An(h),t;if(p===u)return An(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,T=h.child;T;){if(T===o){_=!0,o=h,u=p;break}if(T===u){_=!0,u=h,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=h;break}if(T===u){_=!0,u=p,o=h;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function So(t){return t=Ma(t),t!==null?fs(t):null}function fs(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=fs(t);if(r!==null)return r;t=t.sibling}return null}var ds=e.unstable_scheduleCallback,Ao=e.unstable_cancelCallback,Oa=e.unstable_shouldYield,zu=e.unstable_requestPaint,$e=e.unstable_now,La=e.unstable_getCurrentPriorityLevel,Ti=e.unstable_ImmediatePriority,Pr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Co=e.unstable_LowPriority,Fa=e.unstable_IdlePriority,Ii=null,en=null;function ba(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ii,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Ua,Ro=Math.log,ja=Math.LN2;function Ua(t){return t>>>=0,t===0?32:31-(Ro(t)/ja|0)|0}var ps=64,ms=4194304;function kr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Si(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~h;T!==0?u=kr(T):(p&=_,p!==0&&(u=kr(p)))}else _=o&~h,_!==0?u=kr(_):p!==0&&(u=kr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-jt(r),h=1<<o,u|=t[o],r&=~h;return u}function Bu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-jt(p),T=1<<_,P=h[_];P===-1?((T&o)===0||(T&u)!==0)&&(h[_]=Bu(T,r)):P<=r&&(t.expiredLanes|=T),p&=~T}}function tn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ai(){var t=ps;return ps<<=1,(ps&4194240)===0&&(ps=64),t}function xr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Nr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-jt(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-jt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Vr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-jt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Pe=0;function Dr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var za,gs,Ba,$a,qa,Po=!1,zn=[],It=null,Cn=null,Rn=null,Mr=new Map,fn=new Map,Bn=[],$u="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ha(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Mr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(r.pointerId)}}function $t(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=$o(r),r!==null&&gs(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function qu(t,r,o,u,h){switch(r){case"focusin":return It=$t(It,t,r,o,u,h),!0;case"dragenter":return Cn=$t(Cn,t,r,o,u,h),!0;case"mouseover":return Rn=$t(Rn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Mr.set(p,$t(Mr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,fn.set(p,$t(fn.get(p)||null,t,r,o,u,h)),!0}return!1}function Ga(t){var r=xi(t.target);if(r!==null){var o=Sn(r);if(o!==null){if(r=o.tag,r===13){if(r=Ei(o),r!==null){t.blockedOn=r,qa(t.priority,function(){Ba(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ys(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);yi=u,o.target.dispatchEvent(u),yi=null}else return r=$o(o),r!==null&&gs(r),t.blockedOn=o,!1;r.shift()}return!0}function Ci(t,r,o){cr(t)&&o.delete(r)}function Wa(){Po=!1,It!==null&&cr(It)&&(It=null),Cn!==null&&cr(Cn)&&(Cn=null),Rn!==null&&cr(Rn)&&(Rn=null),Mr.forEach(Ci),fn.forEach(Ci)}function Pn(t,r){t.blockedOn===r&&(t.blockedOn=null,Po||(Po=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wa)))}function kn(t){function r(h){return Pn(h,t)}if(0<zn.length){Pn(zn[0],t);for(var o=1;o<zn.length;o++){var u=zn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&Pn(It,t),Cn!==null&&Pn(Cn,t),Rn!==null&&Pn(Rn,t),Mr.forEach(r),fn.forEach(r),o=0;o<Bn.length;o++)u=Bn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Bn.length&&(o=Bn[0],o.blockedOn===null);)Ga(o),o.blockedOn===null&&Bn.shift()}var hr=ce.ReactCurrentBatchConfig,Or=!0;function Ke(t,r,o,u){var h=Pe,p=hr.transition;hr.transition=null;try{Pe=1,ko(t,r,o,u)}finally{Pe=h,hr.transition=p}}function Hu(t,r,o,u){var h=Pe,p=hr.transition;hr.transition=null;try{Pe=4,ko(t,r,o,u)}finally{Pe=h,hr.transition=p}}function ko(t,r,o,u){if(Or){var h=ys(t,r,o,u);if(h===null)nc(t,r,u,Ri,o),Ha(t,u);else if(qu(h,t,r,o,u))u.stopPropagation();else if(Ha(t,u),r&4&&-1<$u.indexOf(t)){for(;h!==null;){var p=$o(h);if(p!==null&&za(p),p=ys(t,r,o,u),p===null&&nc(t,r,u,Ri,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else nc(t,r,u,null,o)}}var Ri=null;function ys(t,r,o,u){if(Ri=null,t=os(u),t=xi(t),t!==null)if(r=Sn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=Ei(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ri=t,null}function xo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(La()){case Ti:return 1;case Pr:return 4;case hn:case Co:return 16;case Fa:return 536870912;default:return 16}default:return 16}}var nn=null,_s=null,qt=null;function No(){if(qt)return qt;var t,r=_s,o=r.length,u,h="value"in nn?nn.value:nn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function vs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function $n(){return!0}function Vo(){return!1}function St(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?$n:Vo,this.isPropagationStopped=Vo,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),r}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=St(xn),qn=ne({},xn,{view:0,detail:0}),Gu=St(qn),Es,fr,Lr,Pi=ne({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(Es=t.screenX-Lr.screenX,fr=t.screenY-Lr.screenY):fr=Es=0,Lr=t),Es)},movementY:function(t){return"movementY"in t?t.movementY:fr}}),Ts=St(Pi),Do=ne({},Pi,{dataTransfer:0}),Qa=St(Do),Is=ne({},qn,{relatedTarget:0}),Ss=St(Is),Ka=ne({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=St(Ka),Ya=ne({},xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xa=St(Ya),Ja=ne({},xn,{data:0}),Mo=St(Ja),As={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Za[t])?!!r[t]:!1}function Hn(){return el}var l=ne({},qn,{key:function(t){if(t.key){var r=As[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ut[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(t){return t.type==="keypress"?vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=St(l),g=ne({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=St(g),O=ne({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),U=St(O),J=ne({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=St(J),dt=ne({},Pi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=St(dt),_t=[9,13,27,32],st=m&&"CompositionEvent"in window,dn=null;m&&"documentMode"in document&&(dn=document.documentMode);var rn=m&&"TextEvent"in window&&!dn,ki=m&&(!st||dn&&8<dn&&11>=dn),Cs=" ",Yf=!1;function Xf(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function Z_(t,r){switch(t){case"compositionend":return Jf(r);case"keypress":return r.which!==32?null:(Yf=!0,Cs);case"textInput":return t=r.data,t===Cs&&Yf?null:t;default:return null}}function ev(t,r){if(Rs)return t==="compositionend"||!st&&Xf(t,r)?(t=No(),qt=_s=nn=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ki&&r.locale!=="ko"?null:r.data;default:return null}}var tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!tv[t.type]:r==="textarea"}function ed(t,r,o,u){Un(u),r=sl(r,"onChange"),0<r.length&&(o=new ws("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Oo=null,Lo=null;function nv(t){_d(t,0)}function tl(t){var r=Vs(t);if(ts(r))return t}function rv(t,r){if(t==="change")return r}var td=!1;if(m){var Wu;if(m){var Qu="oninput"in document;if(!Qu){var nd=document.createElement("div");nd.setAttribute("oninput","return;"),Qu=typeof nd.oninput=="function"}Wu=Qu}else Wu=!1;td=Wu&&(!document.documentMode||9<document.documentMode)}function rd(){Oo&&(Oo.detachEvent("onpropertychange",id),Lo=Oo=null)}function id(t){if(t.propertyName==="value"&&tl(Lo)){var r=[];ed(r,Lo,t,os(t)),To(nv,r)}}function iv(t,r,o){t==="focusin"?(rd(),Oo=r,Lo=o,Oo.attachEvent("onpropertychange",id)):t==="focusout"&&rd()}function sv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Lo)}function ov(t,r){if(t==="click")return tl(r)}function av(t,r){if(t==="input"||t==="change")return tl(r)}function lv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:lv;function Fo(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,r){var o=sd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sd(o)}}function ad(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ad(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ld(){for(var t=window,r=Cr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Cr(t.document)}return r}function Ku(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function uv(t){var r=ld(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&ad(o.ownerDocument.documentElement,o)){if(u!==null&&Ku(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=od(o,p);var _=od(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cv=m&&"documentMode"in document&&11>=document.documentMode,Ps=null,Yu=null,bo=null,Xu=!1;function ud(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xu||Ps==null||Ps!==Cr(u)||(u=Ps,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),bo&&Fo(bo,u)||(bo=u,u=sl(Yu,"onSelect"),0<u.length&&(r=new ws("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=Ps)))}function nl(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ks={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},Ju={},cd={};m&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function rl(t){if(Ju[t])return Ju[t];if(!ks[t])return t;var r=ks[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in cd)return Ju[t]=r[o];return t}var hd=rl("animationend"),fd=rl("animationiteration"),dd=rl("animationstart"),pd=rl("transitionend"),md=new Map,gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,r){md.set(t,r),c(r,[t])}for(var Zu=0;Zu<gd.length;Zu++){var ec=gd[Zu],hv=ec.toLowerCase(),fv=ec[0].toUpperCase()+ec.slice(1);Fr(hv,"on"+fv)}Fr(hd,"onAnimationEnd"),Fr(fd,"onAnimationIteration"),Fr(dd,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(pd,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dv=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function yd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Da(u,r,void 0,t),t.currentTarget=null}function _d(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],P=T.instance,j=T.currentTarget;if(T=T.listener,P!==p&&h.isPropagationStopped())break e;yd(h,T,j),p=P}else for(_=0;_<u.length;_++){if(T=u[_],P=T.instance,j=T.currentTarget,T=T.listener,P!==p&&h.isPropagationStopped())break e;yd(h,T,j),p=P}}}if(In)throw t=Io,In=!1,Io=null,t}function Ge(t,r){var o=r[lc];o===void 0&&(o=r[lc]=new Set);var u=t+"__bubble";o.has(u)||(vd(r,t,2,!1),o.add(u))}function tc(t,r,o){var u=0;r&&(u|=4),vd(o,t,u,r)}var il="_reactListening"+Math.random().toString(36).slice(2);function Uo(t){if(!t[il]){t[il]=!0,s.forEach(function(o){o!=="selectionchange"&&(dv.has(o)||tc(o,!1,t),tc(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[il]||(r[il]=!0,tc("selectionchange",!1,r))}}function vd(t,r,o,u){switch(xo(r)){case 1:var h=Ke;break;case 4:h=Hu;break;default:h=ko}o=h.bind(null,r,o,t),h=void 0,!us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function nc(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===h||P.nodeType===8&&P.parentNode===h))return;_=_.return}for(;T!==null;){if(_=xi(T),_===null)return;if(P=_.tag,P===5||P===6){u=p=_;continue e}T=T.parentNode}}u=u.return}To(function(){var j=p,Q=os(o),K=[];e:{var W=md.get(t);if(W!==void 0){var te=ws,oe=t;switch(t){case"keypress":if(vs(o)===0)break e;case"keydown":case"keyup":te=d;break;case"focusin":oe="focus",te=Ss;break;case"focusout":oe="blur",te=Ss;break;case"beforeblur":case"afterblur":te=Ss;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Qa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=U;break;case hd:case fd:case dd:te=dr;break;case pd:te=je;break;case"scroll":te=Gu;break;case"wheel":te=xe;break;case"copy":case"cut":case"paste":te=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=w}var ae=(r&4)!==0,rt=!ae&&t==="scroll",L=ae?W!==null?W+"Capture":null:W;ae=[];for(var k=j,b;k!==null;){b=k;var X=b.stateNode;if(b.tag===5&&X!==null&&(b=X,L!==null&&(X=nt(k,L),X!=null&&ae.push(zo(k,X,b)))),rt)break;k=k.return}0<ae.length&&(W=new te(W,oe,null,o,Q),K.push({event:W,listeners:ae}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",W&&o!==yi&&(oe=o.relatedTarget||o.fromElement)&&(xi(oe)||oe[pr]))break e;if((te||W)&&(W=Q.window===Q?Q:(W=Q.ownerDocument)?W.defaultView||W.parentWindow:window,te?(oe=o.relatedTarget||o.toElement,te=j,oe=oe?xi(oe):null,oe!==null&&(rt=Sn(oe),oe!==rt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(te=null,oe=j),te!==oe)){if(ae=Ts,X="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ae=w,X="onPointerLeave",L="onPointerEnter",k="pointer"),rt=te==null?W:Vs(te),b=oe==null?W:Vs(oe),W=new ae(X,k+"leave",te,o,Q),W.target=rt,W.relatedTarget=b,X=null,xi(Q)===j&&(ae=new ae(L,k+"enter",oe,o,Q),ae.target=b,ae.relatedTarget=rt,X=ae),rt=X,te&&oe)t:{for(ae=te,L=oe,k=0,b=ae;b;b=xs(b))k++;for(b=0,X=L;X;X=xs(X))b++;for(;0<k-b;)ae=xs(ae),k--;for(;0<b-k;)L=xs(L),b--;for(;k--;){if(ae===L||L!==null&&ae===L.alternate)break t;ae=xs(ae),L=xs(L)}ae=null}else ae=null;te!==null&&wd(K,W,te,ae,!1),oe!==null&&rt!==null&&wd(K,rt,oe,ae,!0)}}e:{if(W=j?Vs(j):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var ue=rv;else if(Zf(W))if(td)ue=av;else{ue=sv;var ye=iv}else(te=W.nodeName)&&te.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ue=ov);if(ue&&(ue=ue(t,j))){ed(K,ue,o,Q);break e}ye&&ye(t,W,j),t==="focusout"&&(ye=W._wrapperState)&&ye.controlled&&W.type==="number"&&rs(W,"number",W.value)}switch(ye=j?Vs(j):window,t){case"focusin":(Zf(ye)||ye.contentEditable==="true")&&(Ps=ye,Yu=j,bo=null);break;case"focusout":bo=Yu=Ps=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,ud(K,o,Q);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":ud(K,o,Q)}var _e;if(st)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Rs?Xf(t,o)&&(we="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(ki&&o.locale!=="ko"&&(Rs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Rs&&(_e=No()):(nn=Q,_s="value"in nn?nn.value:nn.textContent,Rs=!0)),ye=sl(j,we),0<ye.length&&(we=new Mo(we,t,null,o,Q),K.push({event:we,listeners:ye}),_e?we.data=_e:(_e=Jf(o),_e!==null&&(we.data=_e)))),(_e=rn?Z_(t,o):ev(t,o))&&(j=sl(j,"onBeforeInput"),0<j.length&&(Q=new Mo("onBeforeInput","beforeinput",null,o,Q),K.push({event:Q,listeners:j}),Q.data=_e))}_d(K,r)})}function zo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function sl(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nt(t,o),p!=null&&u.unshift(zo(t,p,h)),p=nt(t,r),p!=null&&u.push(zo(t,p,h))),t=t.return}return u}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wd(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,P=T.alternate,j=T.stateNode;if(P!==null&&P===u)break;T.tag===5&&j!==null&&(T=j,h?(P=nt(o,p),P!=null&&_.unshift(zo(o,P,T))):h||(P=nt(o,p),P!=null&&_.push(zo(o,P,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var pv=/\r\n?/g,mv=/\u0000|\uFFFD/g;function Ed(t){return(typeof t=="string"?t:""+t).replace(pv,`
`).replace(mv,"")}function ol(t,r,o){if(r=Ed(r),Ed(t)!==r&&o)throw Error(n(425))}function al(){}var rc=null,ic=null;function sc(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var oc=typeof setTimeout=="function"?setTimeout:void 0,gv=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(t){return Td.resolve(null).then(t).catch(_v)}:oc;function _v(t){setTimeout(function(){throw t})}function ac(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),kn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);kn(r)}function br(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Id(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Ns,Bo="__reactProps$"+Ns,pr="__reactContainer$"+Ns,lc="__reactEvents$"+Ns,vv="__reactListeners$"+Ns,wv="__reactHandles$"+Ns;function xi(t){var r=t[Gn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[pr]||o[Gn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Id(t);t!==null;){if(o=t[Gn])return o;t=Id(t)}return r}t=o,o=t.parentNode}return null}function $o(t){return t=t[Gn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ll(t){return t[Bo]||null}var uc=[],Ds=-1;function jr(t){return{current:t}}function We(t){0>Ds||(t.current=uc[Ds],uc[Ds]=null,Ds--)}function qe(t,r){Ds++,uc[Ds]=t.current,t.current=r}var Ur={},Vt=jr(Ur),Ht=jr(!1),Ni=Ur;function Ms(t,r){var o=t.type.contextTypes;if(!o)return Ur;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(t){return t=t.childContextTypes,t!=null}function ul(){We(Ht),We(Vt)}function Sd(t,r,o){if(Vt.current!==Ur)throw Error(n(168));qe(Vt,r),qe(Ht,o)}function Ad(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ne({},o,u)}function cl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,Ni=Vt.current,qe(Vt,t),qe(Ht,Ht.current),!0}function Cd(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Ad(t,r,Ni),u.__reactInternalMemoizedMergedChildContext=t,We(Ht),We(Vt),qe(Vt,t)):We(Ht),qe(Ht,o)}var mr=null,hl=!1,cc=!1;function Rd(t){mr===null?mr=[t]:mr.push(t)}function Ev(t){hl=!0,Rd(t)}function zr(){if(!cc&&mr!==null){cc=!0;var t=0,r=Pe;try{var o=mr;for(Pe=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}mr=null,hl=!1}catch(h){throw mr!==null&&(mr=mr.slice(t+1)),ds(Ti,zr),h}finally{Pe=r,cc=!1}}return null}var Os=[],Ls=0,fl=null,dl=0,pn=[],mn=0,Vi=null,gr=1,yr="";function Di(t,r){Os[Ls++]=dl,Os[Ls++]=fl,fl=t,dl=r}function Pd(t,r,o){pn[mn++]=gr,pn[mn++]=yr,pn[mn++]=Vi,Vi=t;var u=gr;t=yr;var h=32-jt(u)-1;u&=~(1<<h),o+=1;var p=32-jt(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,gr=1<<32-jt(r)+h|o<<h|u,yr=p+t}else gr=1<<p|o<<h|u,yr=t}function hc(t){t.return!==null&&(Di(t,1),Pd(t,1,0))}function fc(t){for(;t===fl;)fl=Os[--Ls],Os[Ls]=null,dl=Os[--Ls],Os[Ls]=null;for(;t===Vi;)Vi=pn[--mn],pn[mn]=null,yr=pn[--mn],pn[mn]=null,gr=pn[--mn],pn[mn]=null}var sn=null,on=null,Ye=!1,Vn=null;function kd(t,r){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function xd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,sn=t,on=br(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,sn=t,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Vi!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,sn=t,on=null,!0):!1;default:return!1}}function dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pc(t){if(Ye){var r=on;if(r){var o=r;if(!xd(t,r)){if(dc(t))throw Error(n(418));r=br(o.nextSibling);var u=sn;r&&xd(t,r)?kd(u,o):(t.flags=t.flags&-4097|2,Ye=!1,sn=t)}}else{if(dc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ye=!1,sn=t}}}function Nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function pl(t){if(t!==sn)return!1;if(!Ye)return Nd(t),Ye=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!sc(t.type,t.memoizedProps)),r&&(r=on)){if(dc(t))throw Vd(),Error(n(418));for(;r;)kd(t,r),r=br(r.nextSibling)}if(Nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){on=br(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}on=null}}else on=sn?br(t.stateNode.nextSibling):null;return!0}function Vd(){for(var t=on;t;)t=br(t.nextSibling)}function Fs(){on=sn=null,Ye=!1}function mc(t){Vn===null?Vn=[t]:Vn.push(t)}var Tv=ce.ReactCurrentBatchConfig;function qo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=h.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ml(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Dd(t){var r=t._init;return r(t._payload)}function Md(t){function r(L,k){if(t){var b=L.deletions;b===null?(L.deletions=[k],L.flags|=16):b.push(k)}}function o(L,k){if(!t)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function u(L,k){for(L=new Map;k!==null;)k.key!==null?L.set(k.key,k):L.set(k.index,k),k=k.sibling;return L}function h(L,k){return L=Kr(L,k),L.index=0,L.sibling=null,L}function p(L,k,b){return L.index=b,t?(b=L.alternate,b!==null?(b=b.index,b<k?(L.flags|=2,k):b):(L.flags|=2,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=2),L}function T(L,k,b,X){return k===null||k.tag!==6?(k=oh(b,L.mode,X),k.return=L,k):(k=h(k,b),k.return=L,k)}function P(L,k,b,X){var ue=b.type;return ue===N?Q(L,k,b.props.children,X,b.key):k!==null&&(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Nt&&Dd(ue)===k.type)?(X=h(k,b.props),X.ref=qo(L,k,b),X.return=L,X):(X=jl(b.type,b.key,b.props,null,L.mode,X),X.ref=qo(L,k,b),X.return=L,X)}function j(L,k,b,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=ah(b,L.mode,X),k.return=L,k):(k=h(k,b.children||[]),k.return=L,k)}function Q(L,k,b,X,ue){return k===null||k.tag!==7?(k=zi(b,L.mode,X,ue),k.return=L,k):(k=h(k,b),k.return=L,k)}function K(L,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=oh(""+k,L.mode,b),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ie:return b=jl(k.type,k.key,k.props,null,L.mode,b),b.ref=qo(L,null,k),b.return=L,b;case le:return k=ah(k,L.mode,b),k.return=L,k;case Nt:var X=k._init;return K(L,X(k._payload),b)}if(sr(k)||ge(k))return k=zi(k,L.mode,b,null),k.return=L,k;ml(L,k)}return null}function W(L,k,b,X){var ue=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return ue!==null?null:T(L,k,""+b,X);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ie:return b.key===ue?P(L,k,b,X):null;case le:return b.key===ue?j(L,k,b,X):null;case Nt:return ue=b._init,W(L,k,ue(b._payload),X)}if(sr(b)||ge(b))return ue!==null?null:Q(L,k,b,X,null);ml(L,b)}return null}function te(L,k,b,X,ue){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(b)||null,T(k,L,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case ie:return L=L.get(X.key===null?b:X.key)||null,P(k,L,X,ue);case le:return L=L.get(X.key===null?b:X.key)||null,j(k,L,X,ue);case Nt:var ye=X._init;return te(L,k,b,ye(X._payload),ue)}if(sr(X)||ge(X))return L=L.get(b)||null,Q(k,L,X,ue,null);ml(k,X)}return null}function oe(L,k,b,X){for(var ue=null,ye=null,_e=k,we=k=0,Et=null;_e!==null&&we<b.length;we++){_e.index>we?(Et=_e,_e=null):Et=_e.sibling;var Me=W(L,_e,b[we],X);if(Me===null){_e===null&&(_e=Et);break}t&&_e&&Me.alternate===null&&r(L,_e),k=p(Me,k,we),ye===null?ue=Me:ye.sibling=Me,ye=Me,_e=Et}if(we===b.length)return o(L,_e),Ye&&Di(L,we),ue;if(_e===null){for(;we<b.length;we++)_e=K(L,b[we],X),_e!==null&&(k=p(_e,k,we),ye===null?ue=_e:ye.sibling=_e,ye=_e);return Ye&&Di(L,we),ue}for(_e=u(L,_e);we<b.length;we++)Et=te(_e,L,we,b[we],X),Et!==null&&(t&&Et.alternate!==null&&_e.delete(Et.key===null?we:Et.key),k=p(Et,k,we),ye===null?ue=Et:ye.sibling=Et,ye=Et);return t&&_e.forEach(function(Yr){return r(L,Yr)}),Ye&&Di(L,we),ue}function ae(L,k,b,X){var ue=ge(b);if(typeof ue!="function")throw Error(n(150));if(b=ue.call(b),b==null)throw Error(n(151));for(var ye=ue=null,_e=k,we=k=0,Et=null,Me=b.next();_e!==null&&!Me.done;we++,Me=b.next()){_e.index>we?(Et=_e,_e=null):Et=_e.sibling;var Yr=W(L,_e,Me.value,X);if(Yr===null){_e===null&&(_e=Et);break}t&&_e&&Yr.alternate===null&&r(L,_e),k=p(Yr,k,we),ye===null?ue=Yr:ye.sibling=Yr,ye=Yr,_e=Et}if(Me.done)return o(L,_e),Ye&&Di(L,we),ue;if(_e===null){for(;!Me.done;we++,Me=b.next())Me=K(L,Me.value,X),Me!==null&&(k=p(Me,k,we),ye===null?ue=Me:ye.sibling=Me,ye=Me);return Ye&&Di(L,we),ue}for(_e=u(L,_e);!Me.done;we++,Me=b.next())Me=te(_e,L,we,Me.value,X),Me!==null&&(t&&Me.alternate!==null&&_e.delete(Me.key===null?we:Me.key),k=p(Me,k,we),ye===null?ue=Me:ye.sibling=Me,ye=Me);return t&&_e.forEach(function(t0){return r(L,t0)}),Ye&&Di(L,we),ue}function rt(L,k,b,X){if(typeof b=="object"&&b!==null&&b.type===N&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ie:e:{for(var ue=b.key,ye=k;ye!==null;){if(ye.key===ue){if(ue=b.type,ue===N){if(ye.tag===7){o(L,ye.sibling),k=h(ye,b.props.children),k.return=L,L=k;break e}}else if(ye.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Nt&&Dd(ue)===ye.type){o(L,ye.sibling),k=h(ye,b.props),k.ref=qo(L,ye,b),k.return=L,L=k;break e}o(L,ye);break}else r(L,ye);ye=ye.sibling}b.type===N?(k=zi(b.props.children,L.mode,X,b.key),k.return=L,L=k):(X=jl(b.type,b.key,b.props,null,L.mode,X),X.ref=qo(L,k,b),X.return=L,L=X)}return _(L);case le:e:{for(ye=b.key;k!==null;){if(k.key===ye)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){o(L,k.sibling),k=h(k,b.children||[]),k.return=L,L=k;break e}else{o(L,k);break}else r(L,k);k=k.sibling}k=ah(b,L.mode,X),k.return=L,L=k}return _(L);case Nt:return ye=b._init,rt(L,k,ye(b._payload),X)}if(sr(b))return oe(L,k,b,X);if(ge(b))return ae(L,k,b,X);ml(L,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(o(L,k.sibling),k=h(k,b),k.return=L,L=k):(o(L,k),k=oh(b,L.mode,X),k.return=L,L=k),_(L)):o(L,k)}return rt}var bs=Md(!0),Od=Md(!1),gl=jr(null),yl=null,js=null,gc=null;function yc(){gc=js=yl=null}function _c(t){var r=gl.current;We(gl),t._currentValue=r}function vc(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Us(t,r){yl=t,gc=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Wt=!0),t.firstContext=null)}function gn(t){var r=t._currentValue;if(gc!==t)if(t={context:t,memoizedValue:r,next:null},js===null){if(yl===null)throw Error(n(308));js=t,yl.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return r}var Mi=null;function wc(t){Mi===null?Mi=[t]:Mi.push(t)}function Ld(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,wc(r)):(o.next=h.next,h.next=o),r.interleaved=o,_r(t,u)}function _r(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Br=!1;function Ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function $r(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,_r(t,o)}return h=u.interleaved,h===null?(r.next=r,wc(u)):(r.next=h.next,h.next=r),u.interleaved=r,_r(t,o)}function _l(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Vr(t,o)}}function bd(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function vl(t,r,o,u){var h=t.updateQueue;Br=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var P=T,j=P.next;P.next=null,_===null?p=j:_.next=j,_=P;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=j:T.next=j,Q.lastBaseUpdate=P))}if(p!==null){var K=h.baseState;_=0,Q=j=P=null,T=p;do{var W=T.lane,te=T.eventTime;if((u&W)===W){Q!==null&&(Q=Q.next={eventTime:te,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=t,ae=T;switch(W=r,te=o,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){K=oe.call(te,K,W);break e}K=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,W=typeof oe=="function"?oe.call(te,K,W):oe,W==null)break e;K=ne({},K,W);break e;case 2:Br=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,W=h.effects,W===null?h.effects=[T]:W.push(T))}else te={eventTime:te,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(j=Q=te,P=K):Q=Q.next=te,_|=W;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;W=T,T=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);if(Q===null&&(P=K),h.baseState=P,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Fi|=_,t.lanes=_,t.memoizedState=K}}function jd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Ho={},Wn=jr(Ho),Go=jr(Ho),Wo=jr(Ho);function Oi(t){if(t===Ho)throw Error(n(174));return t}function Tc(t,r){switch(qe(Wo,r),qe(Go,t),qe(Wn,Ho),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ft(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ft(r,t)}We(Wn),qe(Wn,r)}function zs(){We(Wn),We(Go),We(Wo)}function Ud(t){Oi(Wo.current);var r=Oi(Wn.current),o=ft(r,t.type);r!==o&&(qe(Go,t),qe(Wn,o))}function Ic(t){Go.current===t&&(We(Wn),We(Go))}var Xe=jr(0);function wl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sc=[];function Ac(){for(var t=0;t<Sc.length;t++)Sc[t]._workInProgressVersionPrimary=null;Sc.length=0}var El=ce.ReactCurrentDispatcher,Cc=ce.ReactCurrentBatchConfig,Li=0,Je=null,pt=null,vt=null,Tl=!1,Qo=!1,Ko=0,Iv=0;function Dt(){throw Error(n(321))}function Rc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Nn(t[o],r[o]))return!1;return!0}function Pc(t,r,o,u,h,p){if(Li=p,Je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,El.current=t===null||t.memoizedState===null?Rv:Pv,t=o(u,h),Qo){p=0;do{if(Qo=!1,Ko=0,25<=p)throw Error(n(301));p+=1,vt=pt=null,r.updateQueue=null,El.current=kv,t=o(u,h)}while(Qo)}if(El.current=Al,r=pt!==null&&pt.next!==null,Li=0,vt=pt=Je=null,Tl=!1,r)throw Error(n(300));return t}function kc(){var t=Ko!==0;return Ko=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Je.memoizedState=vt=t:vt=vt.next=t,vt}function yn(){if(pt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var r=vt===null?Je.memoizedState:vt.next;if(r!==null)vt=r,pt=t;else{if(t===null)throw Error(n(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?Je.memoizedState=vt=t:vt=vt.next=t}return vt}function Yo(t,r){return typeof r=="function"?r(t):r}function xc(t){var r=yn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=pt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=_=null,P=null,j=p;do{var Q=j.lane;if((Li&Q)===Q)P!==null&&(P=P.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),u=j.hasEagerState?j.eagerState:t(u,j.action);else{var K={lane:Q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};P===null?(T=P=K,_=u):P=P.next=K,Je.lanes|=Q,Fi|=Q}j=j.next}while(j!==null&&j!==p);P===null?_=u:P.next=T,Nn(u,r.memoizedState)||(Wt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=P,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Je.lanes|=p,Fi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Nc(t){var r=yn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);Nn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function zd(){}function Bd(t,r){var o=Je,u=yn(),h=r(),p=!Nn(u.memoizedState,h);if(p&&(u.memoizedState=h,Wt=!0),u=u.queue,Vc(Hd.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,Xo(9,qd.bind(null,o,u,h,r),void 0,null),wt===null)throw Error(n(349));(Li&30)!==0||$d(o,r,h)}return h}function $d(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function qd(t,r,o,u){r.value=o,r.getSnapshot=u,Gd(r)&&Wd(t)}function Hd(t,r,o){return o(function(){Gd(r)&&Wd(t)})}function Gd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Nn(t,o)}catch{return!0}}function Wd(t){var r=_r(t,1);r!==null&&Ln(r,t,1,-1)}function Qd(t){var r=Qn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:t},r.queue=t,t=t.dispatch=Cv.bind(null,Je,t),[r.memoizedState,t]}function Xo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Kd(){return yn().memoizedState}function Il(t,r,o,u){var h=Qn();Je.flags|=t,h.memoizedState=Xo(1|r,o,void 0,u===void 0?null:u)}function Sl(t,r,o,u){var h=yn();u=u===void 0?null:u;var p=void 0;if(pt!==null){var _=pt.memoizedState;if(p=_.destroy,u!==null&&Rc(u,_.deps)){h.memoizedState=Xo(r,o,p,u);return}}Je.flags|=t,h.memoizedState=Xo(1|r,o,p,u)}function Yd(t,r){return Il(8390656,8,t,r)}function Vc(t,r){return Sl(2048,8,t,r)}function Xd(t,r){return Sl(4,2,t,r)}function Jd(t,r){return Sl(4,4,t,r)}function Zd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ep(t,r,o){return o=o!=null?o.concat([t]):null,Sl(4,4,Zd.bind(null,r,t),o)}function Dc(){}function tp(t,r){var o=yn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Rc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function np(t,r){var o=yn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Rc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function rp(t,r,o){return(Li&21)===0?(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o):(Nn(o,r)||(o=Ai(),Je.lanes|=o,Fi|=o,t.baseState=!0),r)}function Sv(t,r){var o=Pe;Pe=o!==0&&4>o?o:4,t(!0);var u=Cc.transition;Cc.transition={};try{t(!1),r()}finally{Pe=o,Cc.transition=u}}function ip(){return yn().memoizedState}function Av(t,r,o){var u=Wr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},sp(t))op(r,o);else if(o=Ld(t,r,o,u),o!==null){var h=Bt();Ln(o,t,u,h),ap(o,r,u)}}function Cv(t,r,o){var u=Wr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(sp(t))op(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(h.hasEagerState=!0,h.eagerState=T,Nn(T,_)){var P=r.interleaved;P===null?(h.next=h,wc(r)):(h.next=P.next,P.next=h),r.interleaved=h;return}}catch{}finally{}o=Ld(t,r,h,u),o!==null&&(h=Bt(),Ln(o,t,u,h),ap(o,r,u))}}function sp(t){var r=t.alternate;return t===Je||r!==null&&r===Je}function op(t,r){Qo=Tl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function ap(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Vr(t,o)}}var Al={readContext:gn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Rv={readContext:gn,useCallback:function(t,r){return Qn().memoizedState=[t,r===void 0?null:r],t},useContext:gn,useEffect:Yd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Il(4194308,4,Zd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Il(4194308,4,t,r)},useInsertionEffect:function(t,r){return Il(4,2,t,r)},useMemo:function(t,r){var o=Qn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Qn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Av.bind(null,Je,t),[u.memoizedState,t]},useRef:function(t){var r=Qn();return t={current:t},r.memoizedState=t},useState:Qd,useDebugValue:Dc,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Qd(!1),r=t[0];return t=Sv.bind(null,t[1]),Qn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Je,h=Qn();if(Ye){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),wt===null)throw Error(n(349));(Li&30)!==0||$d(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Yd(Hd.bind(null,u,p,t),[t]),u.flags|=2048,Xo(9,qd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Qn(),r=wt.identifierPrefix;if(Ye){var o=yr,u=gr;o=(u&~(1<<32-jt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ko++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Iv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Pv={readContext:gn,useCallback:tp,useContext:gn,useEffect:Vc,useImperativeHandle:ep,useInsertionEffect:Xd,useLayoutEffect:Jd,useMemo:np,useReducer:xc,useRef:Kd,useState:function(){return xc(Yo)},useDebugValue:Dc,useDeferredValue:function(t){var r=yn();return rp(r,pt.memoizedState,t)},useTransition:function(){var t=xc(Yo)[0],r=yn().memoizedState;return[t,r]},useMutableSource:zd,useSyncExternalStore:Bd,useId:ip,unstable_isNewReconciler:!1},kv={readContext:gn,useCallback:tp,useContext:gn,useEffect:Vc,useImperativeHandle:ep,useInsertionEffect:Xd,useLayoutEffect:Jd,useMemo:np,useReducer:Nc,useRef:Kd,useState:function(){return Nc(Yo)},useDebugValue:Dc,useDeferredValue:function(t){var r=yn();return pt===null?r.memoizedState=t:rp(r,pt.memoizedState,t)},useTransition:function(){var t=Nc(Yo)[0],r=yn().memoizedState;return[t,r]},useMutableSource:zd,useSyncExternalStore:Bd,useId:ip,unstable_isNewReconciler:!1};function Dn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Mc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Cl={isMounted:function(t){return(t=t._reactInternals)?Sn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=Wr(t),p=vr(u,h);p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&(Ln(r,t,h,u),_l(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=Wr(t),p=vr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&(Ln(r,t,h,u),_l(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),u=Wr(t),h=vr(o,u);h.tag=2,r!=null&&(h.callback=r),r=$r(t,h,u),r!==null&&(Ln(r,t,u,o),_l(r,t,u))}};function lp(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Fo(o,u)||!Fo(h,p):!0}function up(t,r,o){var u=!1,h=Ur,p=r.contextType;return typeof p=="object"&&p!==null?p=gn(p):(h=Gt(r)?Ni:Vt.current,u=r.contextTypes,p=(u=u!=null)?Ms(t,h):Ur),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Cl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function cp(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&Cl.enqueueReplaceState(r,r.state,null)}function Oc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Ec(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=gn(p):(p=Gt(r)?Ni:Vt.current,h.context=Ms(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Mc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Cl.enqueueReplaceState(h,h.state,null),vl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Bs(t,r){try{var o="",u=r;do o+=Se(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Lc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Fc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function hp(t,r,o){o=vr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Dl||(Dl=!0,Jc=u),Fc(t,r)},o}function fp(t,r,o){o=vr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Fc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Fc(t,r),typeof u!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function dp(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new xv;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=qv.bind(null,t,r,o),r.then(t,t))}function pp(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function mp(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=vr(-1,1),r.tag=2,$r(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Nv=ce.ReactCurrentOwner,Wt=!1;function zt(t,r,o,u){r.child=t===null?Od(r,null,o,u):bs(r,t.child,o,u)}function gp(t,r,o,u,h){o=o.render;var p=r.ref;return Us(r,h),u=Pc(t,r,o,u,p,h),o=kc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,wr(t,r,h)):(Ye&&o&&hc(r),r.flags|=1,zt(t,r,u,h),r.child)}function yp(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!sh(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,_p(t,r,p,u,h)):(t=jl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Fo,o(_,u)&&t.ref===r.ref)return wr(t,r,h)}return r.flags|=1,t=Kr(p,u),t.ref=r.ref,t.return=r,r.child=t}function _p(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Fo(p,u)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Wt=!0);else return r.lanes=t.lanes,wr(t,r,h)}return bc(t,r,o,u,h)}function vp(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(qs,an),an|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(qs,an),an|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(qs,an),an|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(qs,an),an|=u;return zt(t,r,h,o),r.child}function wp(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function bc(t,r,o,u,h){var p=Gt(o)?Ni:Vt.current;return p=Ms(r,p),Us(r,h),o=Pc(t,r,o,u,p,h),u=kc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,wr(t,r,h)):(Ye&&u&&hc(r),r.flags|=1,zt(t,r,o,h),r.child)}function Ep(t,r,o,u,h){if(Gt(o)){var p=!0;cl(r)}else p=!1;if(Us(r,h),r.stateNode===null)Pl(t,r),up(r,o,u),Oc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var P=_.context,j=o.contextType;typeof j=="object"&&j!==null?j=gn(j):(j=Gt(o)?Ni:Vt.current,j=Ms(r,j));var Q=o.getDerivedStateFromProps,K=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";K||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||P!==j)&&cp(r,_,u,j),Br=!1;var W=r.memoizedState;_.state=W,vl(r,u,_,h),P=r.memoizedState,T!==u||W!==P||Ht.current||Br?(typeof Q=="function"&&(Mc(r,o,Q,u),P=r.memoizedState),(T=Br||lp(r,o,T,u,W,P,j))?(K||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),_.props=u,_.state=P,_.context=j,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Fd(t,r),T=r.memoizedProps,j=r.type===r.elementType?T:Dn(r.type,T),_.props=j,K=r.pendingProps,W=_.context,P=o.contextType,typeof P=="object"&&P!==null?P=gn(P):(P=Gt(o)?Ni:Vt.current,P=Ms(r,P));var te=o.getDerivedStateFromProps;(Q=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==K||W!==P)&&cp(r,_,u,P),Br=!1,W=r.memoizedState,_.state=W,vl(r,u,_,h);var oe=r.memoizedState;T!==K||W!==oe||Ht.current||Br?(typeof te=="function"&&(Mc(r,o,te,u),oe=r.memoizedState),(j=Br||lp(r,o,j,u,W,oe,P)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,oe,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,oe,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=oe),_.props=u,_.state=oe,_.context=P,u=j):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),u=!1)}return jc(t,r,o,u,p,h)}function jc(t,r,o,u,h,p){wp(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&Cd(r,o,!1),wr(t,r,p);u=r.stateNode,Nv.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=bs(r,t.child,null,p),r.child=bs(r,null,T,p)):zt(t,r,T,p),r.memoizedState=u.state,h&&Cd(r,o,!0),r.child}function Tp(t){var r=t.stateNode;r.pendingContext?Sd(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Sd(t,r.context,!1),Tc(t,r.containerInfo)}function Ip(t,r,o,u,h){return Fs(),mc(h),r.flags|=256,zt(t,r,o,u),r.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sp(t,r,o){var u=r.pendingProps,h=Xe.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(Xe,h&1),t===null)return pc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Ul(_,u,0,null),t=zi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=zc(o),r.memoizedState=Uc,t):Bc(r,_));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return Vv(t,r,_,u,T,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,T=h.sibling;var P={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=P,r.deletions=null):(u=Kr(h,P),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Kr(T,p):(p=zi(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?zc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Uc,u}return p=t.child,t=p.sibling,u=Kr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Bc(t,r){return r=Ul({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Rl(t,r,o,u){return u!==null&&mc(u),bs(r,t.child,null,o),t=Bc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Vv(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=Lc(Error(n(422))),Rl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Ul({mode:"visible",children:u.children},h,0,null),p=zi(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&bs(r,t.child,null,_),r.child.memoizedState=zc(_),r.memoizedState=Uc,p);if((r.mode&1)===0)return Rl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=Lc(p,u,void 0),Rl(t,r,_,u)}if(T=(_&t.childLanes)!==0,Wt||T){if(u=wt,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,_r(t,h),Ln(u,t,h,-1))}return ih(),u=Lc(Error(n(421))),Rl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Hv.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,on=br(h.nextSibling),sn=r,Ye=!0,Vn=null,t!==null&&(pn[mn++]=gr,pn[mn++]=yr,pn[mn++]=Vi,gr=t.id,yr=t.overflow,Vi=r),r=Bc(r,u.children),r.flags|=4096,r)}function Ap(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),vc(t.return,r,o)}function $c(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Cp(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Xe.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,o,r);else if(t.tag===19)Ap(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Xe,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&wl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),$c(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&wl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}$c(r,!0,o,null,p);break;case"together":$c(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Pl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function wr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Fi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Kr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Kr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Dv(t,r,o){switch(r.tag){case 3:Tp(r),Fs();break;case 5:Ud(r);break;case 1:Gt(r.type)&&cl(r);break;case 4:Tc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(gl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Xe,Xe.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Sp(t,r,o):(qe(Xe,Xe.current&1),t=wr(t,r,o),t!==null?t.sibling:null);qe(Xe,Xe.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Cp(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Xe,Xe.current),u)break;return null;case 22:case 23:return r.lanes=0,vp(t,r,o)}return wr(t,r,o)}var Rp,qc,Pp,kp;Rp=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},qc=function(){},Pp=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Oi(Wn.current);var p=null;switch(o){case"input":h=pi(t,h),u=pi(t,u),p=[];break;case"select":h=ne({},h,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":h=ho(t,h),u=ho(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=al)}_o(o,u);var _;o=null;for(j in h)if(!u.hasOwnProperty(j)&&h.hasOwnProperty(j)&&h[j]!=null)if(j==="style"){var T=h[j];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(a.hasOwnProperty(j)?p||(p=[]):(p=p||[]).push(j,null));for(j in u){var P=u[j];if(T=h?.[j],u.hasOwnProperty(j)&&P!==T&&(P!=null||T!=null))if(j==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in P)P.hasOwnProperty(_)&&T[_]!==P[_]&&(o||(o={}),o[_]=P[_])}else o||(p||(p=[]),p.push(j,o)),o=P;else j==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(p=p||[]).push(j,P)):j==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(j,""+P):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(a.hasOwnProperty(j)?(P!=null&&j==="onScroll"&&Ge("scroll",t),p||T===P||(p=[])):(p=p||[]).push(j,P))}o&&(p=p||[]).push("style",o);var j=p;(r.updateQueue=j)&&(r.flags|=4)}},kp=function(t,r,o,u){o!==u&&(r.flags|=4)};function Jo(t,r){if(!Ye)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Mv(t,r,o){var u=r.pendingProps;switch(fc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Gt(r.type)&&ul(),Mt(r),null;case 3:return u=r.stateNode,zs(),We(Ht),We(Vt),Ac(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(pl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vn!==null&&(th(Vn),Vn=null))),qc(t,r),Mt(r),null;case 5:Ic(r);var h=Oi(Wo.current);if(o=r.type,t!==null&&r.stateNode!=null)Pp(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=Oi(Wn.current),pl(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Gn]=r,u[Bo]=p,t=(r.mode&1)!==0,o){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(h=0;h<jo.length;h++)Ge(jo[h],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":ns(u,p),Ge("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ge("invalid",u);break;case"textarea":is(u,p),Ge("invalid",u)}_o(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&ol(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&ol(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&Ge("scroll",u)}switch(o){case"input":ir(u),Va(u,p,!0);break;case"textarea":ir(u),fo(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=al)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ht(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[Gn]=r,t[Bo]=u,Rp(t,r,!1,!1),r.stateNode=t;e:{switch(_=vo(o,u),o){case"dialog":Ge("cancel",t),Ge("close",t),h=u;break;case"iframe":case"object":case"embed":Ge("load",t),h=u;break;case"video":case"audio":for(h=0;h<jo.length;h++)Ge(jo[h],t);h=u;break;case"source":Ge("error",t),h=u;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),h=u;break;case"details":Ge("toggle",t),h=u;break;case"input":ns(t,u),h=pi(t,u),Ge("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ne({},u,{value:void 0}),Ge("invalid",t);break;case"textarea":is(t,u),h=ho(t,u),Ge("invalid",t);break;default:h=u}_o(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var P=T[p];p==="style"?go(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&po(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Rr(t,P):typeof P=="number"&&Rr(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Ge("scroll",t):P!=null&&fe(t,p,P,_))}switch(o){case"input":ir(t),Va(t,u,!1);break;case"textarea":ir(t),fo(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Fe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?or(t,!!u.multiple,p,!1):u.defaultValue!=null&&or(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=al)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)kp(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Oi(Wo.current),Oi(Wn.current),pl(r)){if(u=r.stateNode,o=r.memoizedProps,u[Gn]=r,(p=u.nodeValue!==o)&&(t=sn,t!==null))switch(t.tag){case 3:ol(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Gn]=r,r.stateNode=u}return Mt(r),null;case 13:if(We(Xe),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Vd(),Fs(),r.flags|=98560,p=!1;else if(p=pl(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Gn]=r}else Fs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else Vn!==null&&(th(Vn),Vn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Xe.current&1)!==0?mt===0&&(mt=3):ih())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return zs(),qc(t,r),t===null&&Uo(r.stateNode.containerInfo),Mt(r),null;case 10:return _c(r.type._context),Mt(r),null;case 17:return Gt(r.type)&&ul(),Mt(r),null;case 19:if(We(Xe),p=r.memoizedState,p===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Jo(p,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=wl(t),_!==null){for(r.flags|=128,Jo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Xe,Xe.current&1|2),r.child}t=t.sibling}p.tail!==null&&$e()>Hs&&(r.flags|=128,u=!0,Jo(p,!1),r.lanes=4194304)}else{if(!u)if(t=wl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Jo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ye)return Mt(r),null}else 2*$e()-p.renderingStartTime>Hs&&o!==1073741824&&(r.flags|=128,u=!0,Jo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=$e(),r.sibling=null,o=Xe.current,qe(Xe,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return rh(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(an&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Ov(t,r){switch(fc(r),r.tag){case 1:return Gt(r.type)&&ul(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return zs(),We(Ht),We(Vt),Ac(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Ic(r),null;case 13:if(We(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Fs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Xe),null;case 4:return zs(),null;case 10:return _c(r.type._context),null;case 22:case 23:return rh(),null;case 24:return null;default:return null}}var kl=!1,Ot=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,se=null;function $s(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){et(t,r,u)}else o.current=null}function Hc(t,r,o){try{o()}catch(u){et(t,r,u)}}var xp=!1;function Fv(t,r){if(rc=Or,t=ld(),Ku(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,P=-1,j=0,Q=0,K=t,W=null;t:for(;;){for(var te;K!==o||h!==0&&K.nodeType!==3||(T=_+h),K!==p||u!==0&&K.nodeType!==3||(P=_+u),K.nodeType===3&&(_+=K.nodeValue.length),(te=K.firstChild)!==null;)W=K,K=te;for(;;){if(K===t)break t;if(W===o&&++j===h&&(T=_),W===p&&++Q===u&&(P=_),(te=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=te}o=T===-1||P===-1?null:{start:T,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(ic={focusedElem:t,selectionRange:o},Or=!1,se=r;se!==null;)if(r=se,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,se=t;else for(;se!==null;){r=se;try{var oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,rt=oe.memoizedState,L=r.stateNode,k=L.getSnapshotBeforeUpdate(r.elementType===r.type?ae:Dn(r.type,ae),rt);L.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){et(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,se=t;break}se=r.return}return oe=xp,xp=!1,oe}function Zo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Hc(r,o,p)}h=h.next}while(h!==u)}}function xl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Gc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Np(t){var r=t.alternate;r!==null&&(t.alternate=null,Np(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Gn],delete r[Bo],delete r[lc],delete r[vv],delete r[wv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vp(t){return t.tag===5||t.tag===3||t.tag===4}function Dp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=al));else if(u!==4&&(t=t.child,t!==null))for(Wc(t,r,o),t=t.sibling;t!==null;)Wc(t,r,o),t=t.sibling}function Qc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Qc(t,r,o),t=t.sibling;t!==null;)Qc(t,r,o),t=t.sibling}var At=null,Mn=!1;function qr(t,r,o){for(o=o.child;o!==null;)Mp(t,r,o),o=o.sibling}function Mp(t,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ii,o)}catch{}switch(o.tag){case 5:Ot||$s(o,r);case 6:var u=At,h=Mn;At=null,qr(t,r,o),At=u,Mn=h,At!==null&&(Mn?(t=At,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):At.removeChild(o.stateNode));break;case 18:At!==null&&(Mn?(t=At,o=o.stateNode,t.nodeType===8?ac(t.parentNode,o):t.nodeType===1&&ac(t,o),kn(t)):ac(At,o.stateNode));break;case 4:u=At,h=Mn,At=o.stateNode.containerInfo,Mn=!0,qr(t,r,o),At=u,Mn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Hc(o,r,_),h=h.next}while(h!==u)}qr(t,r,o);break;case 1:if(!Ot&&($s(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){et(o,r,T)}qr(t,r,o);break;case 21:qr(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,qr(t,r,o),Ot=u):qr(t,r,o);break;default:qr(t,r,o)}}function Op(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Lv),r.forEach(function(u){var h=Gv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function On(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:At=T.stateNode,Mn=!1;break e;case 3:At=T.stateNode.containerInfo,Mn=!0;break e;case 4:At=T.stateNode.containerInfo,Mn=!0;break e}T=T.return}if(At===null)throw Error(n(160));Mp(p,_,h),At=null,Mn=!1;var P=h.alternate;P!==null&&(P.return=null),h.return=null}catch(j){et(h,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Lp(r,t),r=r.sibling}function Lp(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(r,t),Kn(t),u&4){try{Zo(3,t,t.return),xl(3,t)}catch(ae){et(t,t.return,ae)}try{Zo(5,t,t.return)}catch(ae){et(t,t.return,ae)}}break;case 1:On(r,t),Kn(t),u&512&&o!==null&&$s(o,o.return);break;case 5:if(On(r,t),Kn(t),u&512&&o!==null&&$s(o,o.return),t.flags&32){var h=t.stateNode;try{Rr(h,"")}catch(ae){et(t,t.return,ae)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&uo(h,p),vo(T,_);var j=vo(T,p);for(_=0;_<P.length;_+=2){var Q=P[_],K=P[_+1];Q==="style"?go(h,K):Q==="dangerouslySetInnerHTML"?po(h,K):Q==="children"?Rr(h,K):fe(h,Q,K,j)}switch(T){case"input":co(h,p);break;case"textarea":ss(h,p);break;case"select":var W=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var te=p.value;te!=null?or(h,!!p.multiple,te,!1):W!==!!p.multiple&&(p.defaultValue!=null?or(h,!!p.multiple,p.defaultValue,!0):or(h,!!p.multiple,p.multiple?[]:"",!1))}h[Bo]=p}catch(ae){et(t,t.return,ae)}}break;case 6:if(On(r,t),Kn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ae){et(t,t.return,ae)}}break;case 3:if(On(r,t),Kn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{kn(r.containerInfo)}catch(ae){et(t,t.return,ae)}break;case 4:On(r,t),Kn(t);break;case 13:On(r,t),Kn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Xc=$e())),u&4&&Op(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(j=Ot)||Q,On(r,t),Ot=j):On(r,t),Kn(t),u&8192){if(j=t.memoizedState!==null,(t.stateNode.isHidden=j)&&!Q&&(t.mode&1)!==0)for(se=t,Q=t.child;Q!==null;){for(K=se=Q;se!==null;){switch(W=se,te=W.child,W.tag){case 0:case 11:case 14:case 15:Zo(4,W,W.return);break;case 1:$s(W,W.return);var oe=W.stateNode;if(typeof oe.componentWillUnmount=="function"){u=W,o=W.return;try{r=u,oe.props=r.memoizedProps,oe.state=r.memoizedState,oe.componentWillUnmount()}catch(ae){et(u,o,ae)}}break;case 5:$s(W,W.return);break;case 22:if(W.memoizedState!==null){jp(K);continue}}te!==null?(te.return=W,se=te):jp(K)}Q=Q.sibling}e:for(Q=null,K=t;;){if(K.tag===5){if(Q===null){Q=K;try{h=K.stateNode,j?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=K.stateNode,P=K.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=mo("display",_))}catch(ae){et(t,t.return,ae)}}}else if(K.tag===6){if(Q===null)try{K.stateNode.nodeValue=j?"":K.memoizedProps}catch(ae){et(t,t.return,ae)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===t)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===t)break e;for(;K.sibling===null;){if(K.return===null||K.return===t)break e;Q===K&&(Q=null),K=K.return}Q===K&&(Q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:On(r,t),Kn(t),u&4&&Op(t);break;case 21:break;default:On(r,t),Kn(t)}}function Kn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Vp(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Rr(h,""),u.flags&=-33);var p=Dp(t);Qc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,T=Dp(t);Wc(t,T,_);break;default:throw Error(n(161))}}catch(P){et(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function bv(t,r,o){se=t,Fp(t)}function Fp(t,r,o){for(var u=(t.mode&1)!==0;se!==null;){var h=se,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||kl;if(!_){var T=h.alternate,P=T!==null&&T.memoizedState!==null||Ot;T=kl;var j=Ot;if(kl=_,(Ot=P)&&!j)for(se=h;se!==null;)_=se,P=_.child,_.tag===22&&_.memoizedState!==null?Up(h):P!==null?(P.return=_,se=P):Up(h);for(;p!==null;)se=p,Fp(p),p=p.sibling;se=h,kl=T,Ot=j}bp(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,se=p):bp(t)}}function bp(t){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||xl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Dn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&jd(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}jd(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var Q=j.memoizedState;if(Q!==null){var K=Q.dehydrated;K!==null&&kn(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Gc(r)}catch(W){et(r,r.return,W)}}if(r===t){se=null;break}if(o=r.sibling,o!==null){o.return=r.return,se=o;break}se=r.return}}function jp(t){for(;se!==null;){var r=se;if(r===t){se=null;break}var o=r.sibling;if(o!==null){o.return=r.return,se=o;break}se=r.return}}function Up(t){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{xl(4,r)}catch(P){et(r,o,P)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(P){et(r,h,P)}}var p=r.return;try{Gc(r)}catch(P){et(r,p,P)}break;case 5:var _=r.return;try{Gc(r)}catch(P){et(r,_,P)}}}catch(P){et(r,r.return,P)}if(r===t){se=null;break}var T=r.sibling;if(T!==null){T.return=r.return,se=T;break}se=r.return}}var jv=Math.ceil,Nl=ce.ReactCurrentDispatcher,Kc=ce.ReactCurrentOwner,_n=ce.ReactCurrentBatchConfig,De=0,wt=null,ot=null,Ct=0,an=0,qs=jr(0),mt=0,ea=null,Fi=0,Vl=0,Yc=0,ta=null,Qt=null,Xc=0,Hs=1/0,Er=null,Dl=!1,Jc=null,Hr=null,Ml=!1,Gr=null,Ol=0,na=0,Zc=null,Ll=-1,Fl=0;function Bt(){return(De&6)!==0?$e():Ll!==-1?Ll:Ll=$e()}function Wr(t){return(t.mode&1)===0?1:(De&2)!==0&&Ct!==0?Ct&-Ct:Tv.transition!==null?(Fl===0&&(Fl=Ai()),Fl):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:xo(t.type)),t)}function Ln(t,r,o,u){if(50<na)throw na=0,Zc=null,Error(n(185));Nr(t,o,u),((De&2)===0||t!==wt)&&(t===wt&&((De&2)===0&&(Vl|=o),mt===4&&Qr(t,Ct)),Kt(t,u),o===1&&De===0&&(r.mode&1)===0&&(Hs=$e()+500,hl&&zr()))}function Kt(t,r){var o=t.callbackNode;ur(t,r);var u=Si(t,t===wt?Ct:0);if(u===0)o!==null&&Ao(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&Ao(o),r===1)t.tag===0?Ev(Bp.bind(null,t)):Rd(Bp.bind(null,t)),yv(function(){(De&6)===0&&zr()}),o=null;else{switch(Dr(u)){case 1:o=Ti;break;case 4:o=Pr;break;case 16:o=hn;break;case 536870912:o=Fa;break;default:o=hn}o=Yp(o,zp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function zp(t,r){if(Ll=-1,Fl=0,(De&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Gs()&&t.callbackNode!==o)return null;var u=Si(t,t===wt?Ct:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=bl(t,u);else{r=u;var h=De;De|=2;var p=qp();(wt!==t||Ct!==r)&&(Er=null,Hs=$e()+500,ji(t,r));do try{Bv();break}catch(T){$p(t,T)}while(!0);yc(),Nl.current=p,De=h,ot!==null?r=0:(wt=null,Ct=0,r=mt)}if(r!==0){if(r===2&&(h=tn(t),h!==0&&(u=h,r=eh(t,h))),r===1)throw o=ea,ji(t,0),Qr(t,u),Kt(t,$e()),o;if(r===6)Qr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Uv(h)&&(r=bl(t,u),r===2&&(p=tn(t),p!==0&&(u=p,r=eh(t,p))),r===1))throw o=ea,ji(t,0),Qr(t,u),Kt(t,$e()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ui(t,Qt,Er);break;case 3:if(Qr(t,u),(u&130023424)===u&&(r=Xc+500-$e(),10<r)){if(Si(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Bt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=oc(Ui.bind(null,t,Qt,Er),r);break}Ui(t,Qt,Er);break;case 4:if(Qr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-jt(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=$e()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*jv(u/1960))-u,10<u){t.timeoutHandle=oc(Ui.bind(null,t,Qt,Er),u);break}Ui(t,Qt,Er);break;case 5:Ui(t,Qt,Er);break;default:throw Error(n(329))}}}return Kt(t,$e()),t.callbackNode===o?zp.bind(null,t):null}function eh(t,r){var o=ta;return t.current.memoizedState.isDehydrated&&(ji(t,r).flags|=256),t=bl(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&th(r)),t}function th(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function Uv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Nn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(t,r){for(r&=~Yc,r&=~Vl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-jt(r),u=1<<o;t[o]=-1,r&=~u}}function Bp(t){if((De&6)!==0)throw Error(n(327));Gs();var r=Si(t,0);if((r&1)===0)return Kt(t,$e()),null;var o=bl(t,r);if(t.tag!==0&&o===2){var u=tn(t);u!==0&&(r=u,o=eh(t,u))}if(o===1)throw o=ea,ji(t,0),Qr(t,r),Kt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ui(t,Qt,Er),Kt(t,$e()),null}function nh(t,r){var o=De;De|=1;try{return t(r)}finally{De=o,De===0&&(Hs=$e()+500,hl&&zr())}}function bi(t){Gr!==null&&Gr.tag===0&&(De&6)===0&&Gs();var r=De;De|=1;var o=_n.transition,u=Pe;try{if(_n.transition=null,Pe=1,t)return t()}finally{Pe=u,_n.transition=o,De=r,(De&6)===0&&zr()}}function rh(){an=qs.current,We(qs)}function ji(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,gv(o)),ot!==null)for(o=ot.return;o!==null;){var u=o;switch(fc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ul();break;case 3:zs(),We(Ht),We(Vt),Ac();break;case 5:Ic(u);break;case 4:zs();break;case 13:We(Xe);break;case 19:We(Xe);break;case 10:_c(u.type._context);break;case 22:case 23:rh()}o=o.return}if(wt=t,ot=t=Kr(t.current,null),Ct=an=r,mt=0,ea=null,Yc=Vl=Fi=0,Qt=ta=null,Mi!==null){for(r=0;r<Mi.length;r++)if(o=Mi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}Mi=null}return t}function $p(t,r){do{var o=ot;try{if(yc(),El.current=Al,Tl){for(var u=Je.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Tl=!1}if(Li=0,vt=pt=Je=null,Qo=!1,Ko=0,Kc.current=null,o===null||o.return===null){mt=1,ea=r,ot=null;break}e:{var p=t,_=o.return,T=o,P=r;if(r=Ct,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=P,Q=T,K=Q.tag;if((Q.mode&1)===0&&(K===0||K===11||K===15)){var W=Q.alternate;W?(Q.updateQueue=W.updateQueue,Q.memoizedState=W.memoizedState,Q.lanes=W.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var te=pp(_);if(te!==null){te.flags&=-257,mp(te,_,T,p,r),te.mode&1&&dp(p,j,r),r=te,P=j;var oe=r.updateQueue;if(oe===null){var ae=new Set;ae.add(P),r.updateQueue=ae}else oe.add(P);break e}else{if((r&1)===0){dp(p,j,r),ih();break e}P=Error(n(426))}}else if(Ye&&T.mode&1){var rt=pp(_);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),mp(rt,_,T,p,r),mc(Bs(P,T));break e}}p=P=Bs(P,T),mt!==4&&(mt=2),ta===null?ta=[p]:ta.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=hp(p,P,r);bd(p,L);break e;case 1:T=P;var k=p.type,b=p.stateNode;if((p.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Hr===null||!Hr.has(b)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=fp(p,T,r);bd(p,X);break e}}p=p.return}while(p!==null)}Gp(o)}catch(ue){r=ue,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function qp(){var t=Nl.current;return Nl.current=Al,t===null?Al:t}function ih(){(mt===0||mt===3||mt===2)&&(mt=4),wt===null||(Fi&268435455)===0&&(Vl&268435455)===0||Qr(wt,Ct)}function bl(t,r){var o=De;De|=2;var u=qp();(wt!==t||Ct!==r)&&(Er=null,ji(t,r));do try{zv();break}catch(h){$p(t,h)}while(!0);if(yc(),De=o,Nl.current=u,ot!==null)throw Error(n(261));return wt=null,Ct=0,mt}function zv(){for(;ot!==null;)Hp(ot)}function Bv(){for(;ot!==null&&!Oa();)Hp(ot)}function Hp(t){var r=Kp(t.alternate,t,an);t.memoizedProps=t.pendingProps,r===null?Gp(t):ot=r,Kc.current=null}function Gp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Mv(o,r,an),o!==null){ot=o;return}}else{if(o=Ov(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ot=null;return}}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);mt===0&&(mt=5)}function Ui(t,r,o){var u=Pe,h=_n.transition;try{_n.transition=null,Pe=1,$v(t,r,o,u)}finally{_n.transition=h,Pe=u}return null}function $v(t,r,o,u){do Gs();while(Gr!==null);if((De&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===wt&&(ot=wt=null,Ct=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Ml||(Ml=!0,Yp(hn,function(){return Gs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=_n.transition,_n.transition=null;var _=Pe;Pe=1;var T=De;De|=4,Kc.current=null,Fv(t,o),Lp(o,t),uv(ic),Or=!!rc,ic=rc=null,t.current=o,bv(o),zu(),De=T,Pe=_,_n.transition=p}else t.current=o;if(Ml&&(Ml=!1,Gr=t,Ol=h),p=t.pendingLanes,p===0&&(Hr=null),ba(o.stateNode),Kt(t,$e()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Dl)throw Dl=!1,t=Jc,Jc=null,t;return(Ol&1)!==0&&t.tag!==0&&Gs(),p=t.pendingLanes,(p&1)!==0?t===Zc?na++:(na=0,Zc=t):na=0,zr(),null}function Gs(){if(Gr!==null){var t=Dr(Ol),r=_n.transition,o=Pe;try{if(_n.transition=null,Pe=16>t?16:t,Gr===null)var u=!1;else{if(t=Gr,Gr=null,Ol=0,(De&6)!==0)throw Error(n(331));var h=De;for(De|=4,se=t.current;se!==null;){var p=se,_=p.child;if((se.flags&16)!==0){var T=p.deletions;if(T!==null){for(var P=0;P<T.length;P++){var j=T[P];for(se=j;se!==null;){var Q=se;switch(Q.tag){case 0:case 11:case 15:Zo(8,Q,p)}var K=Q.child;if(K!==null)K.return=Q,se=K;else for(;se!==null;){Q=se;var W=Q.sibling,te=Q.return;if(Np(Q),Q===j){se=null;break}if(W!==null){W.return=te,se=W;break}se=te}}}var oe=p.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var rt=ae.sibling;ae.sibling=null,ae=rt}while(ae!==null)}}se=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,se=_;else e:for(;se!==null;){if(p=se,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Zo(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,se=L;break e}se=p.return}}var k=t.current;for(se=k;se!==null;){_=se;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,se=b;else e:for(_=k;se!==null;){if(T=se,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:xl(9,T)}}catch(ue){et(T,T.return,ue)}if(T===_){se=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,se=X;break e}se=T.return}}if(De=h,zr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ii,t)}catch{}u=!0}return u}finally{Pe=o,_n.transition=r}}return!1}function Wp(t,r,o){r=Bs(o,r),r=hp(t,r,1),t=$r(t,r,1),r=Bt(),t!==null&&(Nr(t,1,r),Kt(t,r))}function et(t,r,o){if(t.tag===3)Wp(t,t,o);else for(;r!==null;){if(r.tag===3){Wp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hr===null||!Hr.has(u))){t=Bs(o,t),t=fp(r,t,1),r=$r(r,t,1),t=Bt(),r!==null&&(Nr(r,1,t),Kt(r,t));break}}r=r.return}}function qv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,wt===t&&(Ct&o)===o&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>$e()-Xc?ji(t,0):Yc|=o),Kt(t,r)}function Qp(t,r){r===0&&((t.mode&1)===0?r=1:(r=ms,ms<<=1,(ms&130023424)===0&&(ms=4194304)));var o=Bt();t=_r(t,r),t!==null&&(Nr(t,r,o),Kt(t,o))}function Hv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Qp(t,o)}function Gv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Qp(t,o)}var Kp;Kp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ht.current)Wt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Wt=!1,Dv(t,r,o);Wt=(t.flags&131072)!==0}else Wt=!1,Ye&&(r.flags&1048576)!==0&&Pd(r,dl,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Pl(t,r),t=r.pendingProps;var h=Ms(r,Vt.current);Us(r,o),h=Pc(null,r,u,t,h,o);var p=kc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(u)?(p=!0,cl(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ec(r),h.updater=Cl,r.stateNode=h,h._reactInternals=r,Oc(r,u,t,o),r=jc(null,r,u,!0,p,o)):(r.tag=0,Ye&&p&&hc(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Pl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Qv(u),t=Dn(u,t),h){case 0:r=bc(null,r,u,t,o);break e;case 1:r=Ep(null,r,u,t,o);break e;case 11:r=gp(null,r,u,t,o);break e;case 14:r=yp(null,r,u,Dn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),bc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Ep(t,r,u,h,o);case 3:e:{if(Tp(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Fd(t,r),vl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Bs(Error(n(423)),r),r=Ip(t,r,u,o,h);break e}else if(u!==h){h=Bs(Error(n(424)),r),r=Ip(t,r,u,o,h);break e}else for(on=br(r.stateNode.containerInfo.firstChild),sn=r,Ye=!0,Vn=null,o=Od(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Fs(),u===h){r=wr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return Ud(r),t===null&&pc(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,sc(u,h)?_=null:p!==null&&sc(u,p)&&(r.flags|=32),wp(t,r),zt(t,r,_,o),r.child;case 6:return t===null&&pc(r),null;case 13:return Sp(t,r,o);case 4:return Tc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=bs(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),gp(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,qe(gl,u._currentValue),u._currentValue=_,p!==null)if(Nn(p.value,_)){if(p.children===h.children&&!Ht.current){r=wr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var P=T.firstContext;P!==null;){if(P.context===u){if(p.tag===1){P=vr(-1,o&-o),P.tag=2;var j=p.updateQueue;if(j!==null){j=j.shared;var Q=j.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),j.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),vc(p.return,o,r),T.lanes|=o;break}P=P.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),vc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Us(r,o),h=gn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=Dn(u,r.pendingProps),h=Dn(u.type,h),yp(t,r,u,h,o);case 15:return _p(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Pl(t,r),r.tag=1,Gt(u)?(t=!0,cl(r)):t=!1,Us(r,o),up(r,u,h),Oc(r,u,h,o),jc(null,r,u,!0,t,o);case 19:return Cp(t,r,o);case 22:return vp(t,r,o)}throw Error(n(156,r.tag))};function Yp(t,r){return ds(t,r)}function Wv(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,r,o,u){return new Wv(t,r,o,u)}function sh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qv(t){if(typeof t=="function")return sh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===M)return 11;if(t===xt)return 14}return 2}function Kr(t,r){var o=t.alternate;return o===null?(o=vn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function jl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")sh(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case N:return zi(o.children,h,p,r);case I:_=8,h|=8;break;case A:return t=vn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=vn(13,o,r,h),t.elementType=S,t.lanes=p,t;case tt:return t=vn(19,o,r,h),t.elementType=tt,t.lanes=p,t;case Ue:return Ul(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:_=10;break e;case V:_=9;break e;case M:_=11;break e;case xt:_=14;break e;case Nt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=vn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function zi(t,r,o,u){return t=vn(7,t,u,r),t.lanes=o,t}function Ul(t,r,o,u){return t=vn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function oh(t,r,o){return t=vn(6,t,null,r),t.lanes=o,t}function ah(t,r,o){return r=vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Kv(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xr(0),this.expirationTimes=xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function lh(t,r,o,u,h,p,_,T,P){return t=new Kv(t,r,o,T,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=vn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(p),t}function Yv(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Xp(t){if(!t)return Ur;t=t._reactInternals;e:{if(Sn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Gt(o))return Ad(t,o,r)}return r}function Jp(t,r,o,u,h,p,_,T,P){return t=lh(o,u,!0,t,h,p,_,T,P),t.context=Xp(null),o=t.current,u=Bt(),h=Wr(o),p=vr(u,h),p.callback=r??null,$r(o,p,h),t.current.lanes=h,Nr(t,h,u),Kt(t,u),t}function zl(t,r,o,u){var h=r.current,p=Bt(),_=Wr(h);return o=Xp(o),r.context===null?r.context=o:r.pendingContext=o,r=vr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=$r(h,r,_),t!==null&&(Ln(t,h,_,p),_l(t,h,_)),_}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function uh(t,r){Zp(t,r),(t=t.alternate)&&Zp(t,r)}function Xv(){return null}var em=typeof reportError=="function"?reportError:function(t){console.error(t)};function ch(t){this._internalRoot=t}$l.prototype.render=ch.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));zl(t,r,null,null)},$l.prototype.unmount=ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;bi(function(){zl(null,t,null,null)}),r[pr]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var r=$a();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Bn.length&&r!==0&&r<Bn[o].priority;o++);Bn.splice(o,0,t),o===0&&Ga(t)}};function hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tm(){}function Jv(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var j=Bl(_);p.call(j)}}var _=Jp(r,u,t,0,null,!1,!1,"",tm);return t._reactRootContainer=_,t[pr]=_.current,Uo(t.nodeType===8?t.parentNode:t),bi(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var j=Bl(P);T.call(j)}}var P=lh(t,0,!1,null,null,!1,!1,"",tm);return t._reactRootContainer=P,t[pr]=P.current,Uo(t.nodeType===8?t.parentNode:t),bi(function(){zl(r,P,o,u)}),P}function Hl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var T=h;h=function(){var P=Bl(_);T.call(P)}}zl(r,_,t,h)}else _=Jv(o,r,t,h,u);return Bl(_)}za=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=kr(r.pendingLanes);o!==0&&(Vr(r,o|1),Kt(r,$e()),(De&6)===0&&(Hs=$e()+500,zr()))}break;case 13:bi(function(){var u=_r(t,1);if(u!==null){var h=Bt();Ln(u,t,1,h)}}),uh(t,1)}},gs=function(t){if(t.tag===13){var r=_r(t,134217728);if(r!==null){var o=Bt();Ln(r,t,134217728,o)}uh(t,134217728)}},Ba=function(t){if(t.tag===13){var r=Wr(t),o=_r(t,r);if(o!==null){var u=Bt();Ln(o,t,r,u)}uh(t,r)}},$a=function(){return Pe},qa=function(t,r){var o=Pe;try{return Pe=t,r()}finally{Pe=o}},as=function(t,r,o){switch(r){case"input":if(co(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=ll(u);if(!h)throw Error(n(90));ts(u),co(u,h)}}}break;case"textarea":ss(t,o);break;case"select":r=o.value,r!=null&&or(t,!!o.multiple,r,!1)}},_i=nh,Eo=bi;var Zv={usingClientEntryPoint:!1,Events:[$o,Vs,ll,Un,wo,nh]},ra={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e0={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=So(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||Xv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Ii=Gl.inject(e0),en=Gl}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zv,Yt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hh(r))throw Error(n(200));return Yv(t,r,null,o)},Yt.createRoot=function(t,r){if(!hh(t))throw Error(n(299));var o=!1,u="",h=em;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=lh(t,1,!1,null,null,o,!1,u,h),t[pr]=r.current,Uo(t.nodeType===8?t.parentNode:t),new ch(r)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=So(r),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return bi(t)},Yt.hydrate=function(t,r,o){if(!ql(r))throw Error(n(200));return Hl(null,t,r,!0,o)},Yt.hydrateRoot=function(t,r,o){if(!hh(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=em;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Jp(r,null,t,1,o??null,h,!1,p,_),t[pr]=r.current,Uo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new $l(r)},Yt.render=function(t,r,o){if(!ql(r))throw Error(n(200));return Hl(null,t,r,!1,o)},Yt.unmountComponentAtNode=function(t){if(!ql(t))throw Error(n(40));return t._reactRootContainer?(bi(function(){Hl(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1},Yt.unstable_batchedUpdates=nh,Yt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!ql(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Hl(t,r,o,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var um;function u0(){if(um)return ph.exports;um=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ph.exports=l0(),ph.exports}var cm;function c0(){if(cm)return Wl;cm=1;var i=u0();return Wl.createRoot=i.createRoot,Wl.hydrateRoot=i.hydrateRoot,Wl}var h0=c0();const f0=Og(h0),d0=({item:i,onToggle:e,onDelete:n,isDeleting:s})=>{const[a,c]=Oe.useState(!1),[f,m]=Oe.useState(i.bookedBy??""),y=()=>{e(i.id,f.trim()||void 0),c(!1)},v=()=>{c(!1),m(i.bookedBy??"")},E=()=>{c(!0)},C=()=>{e(i.id,void 0)};return Y.jsxs("div",{"aria-busy":s||void 0,className:`group relative flex flex-col gap-3 rounded-xl border p-4 shadow-sm transition-transform duration-300 transform card-elevated ${i.isBooked?"bg-booked text-white border-booked":"bg-white border-neutral-200"} ${s?"opacity-80 pointer-events-none scale-98":"opacity-100 scale-100"}`,children:[s&&Y.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center rounded-xl transition-opacity duration-300 ${i.isBooked?"bg-black/24":"bg-white/60"}`,role:"status","aria-live":"polite",children:Y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Y.jsxs("svg",{className:`${i.isBooked?"text-white":"text-neutral-800"} w-9 h-9 animate-spin`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[Y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),Y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),Y.jsx("span",{className:`${i.isBooked?"text-white/90":"text-neutral-800 text-opacity-90"} text-xs`,children:""})]})}),Y.jsx("button",{type:"button",onClick:n,disabled:s,className:`absolute top-3 right-3 rounded-full p-2.5 flex items-center justify-center transition-shadow shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${i.isBooked?"bg-white/20 text-white hover:bg-white/30 focus:ring-white focus:ring-offset-booked":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 focus:ring-accent"}`,"aria-label":""}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("h3",{className:"text-lg font-semibold leading-tight break-words pr-10",children:i.name}),i.description&&Y.jsx("p",{className:"mt-1 text-sm opacity-80 whitespace-pre-wrap break-words",children:i.description}),Y.jsx("p",{className:"mt-2 inline-block rounded-full bg-accent/10 px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-accent group-hover:bg-accent/15 transition",children:i.category})]}),Y.jsx("div",{className:"flex flex-col gap-2",children:i.isBooked?Y.jsxs(Y.Fragment,{children:[i.bookedBy&&Y.jsxs("p",{className:"text-sm text-center",children:[": ",Y.jsx("span",{className:"font-semibold",children:i.bookedBy})]}),Y.jsx("button",{onClick:C,className:"rounded-md px-4 py-2 text-sm font-semibold shadow-sm bg-white text-booked hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-booked",children:" "})]}):a?Y.jsxs(Y.Fragment,{children:[Y.jsx("input",{type:"text",className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm text-neutral-900 placeholder-neutral-400 focus:border-accent focus:outline-none",placeholder:"  ()",value:f,onChange:R=>m(R.target.value),autoFocus:!0}),Y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Y.jsx("button",{onClick:y,className:"rounded-md px-4 py-2 text-sm font-semibold bg-accent text-white hover:bg-booked shadow-sm focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""}),Y.jsx("button",{onClick:v,className:"rounded-md px-4 py-2 text-sm font-semibold bg-neutral-200 text-neutral-800 hover:bg-neutral-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2",children:""})]})]}):Y.jsx("button",{onClick:E,className:"rounded-md px-4 py-2 text-sm font-semibold bg-accent text-white hover:bg-booked shadow-sm focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""})}),typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Y.jsxs("div",{className:"mt-1 text-xs text-neutral-400 break-words select-text",children:["ID: ",i.id]})]})},p0=()=>{};var hm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},m0=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Fg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,E=c>>2,C=(c&3)<<4|m>>4;let R=(m&15)<<2|v>>6,z=v&63;y||(z=64,f||(R=64)),s.push(n[E],n[C],n[R],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Lg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):m0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const C=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||v==null||C==null)throw new g0;const R=c<<2|m>>4;if(s.push(R),v!==64){const z=m<<4&240|v>>2;if(s.push(z),C!==64){const G=v<<6&192|C;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class g0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y0=function(i){const e=Lg(i);return Fg.encodeByteArray(e,!0)},su=function(i){return y0(i).replace(/\./g,"")},_0=function(i){try{return Fg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=()=>v0().__FIREBASE_DEFAULTS__,E0=()=>{if(typeof process>"u"||typeof hm>"u")return;const i=hm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},T0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&_0(i[1]);return e&&JSON.parse(e)},tf=()=>{try{return p0()||w0()||E0()||T0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},I0=i=>tf()?.emulatorHosts?.[i],S0=i=>{const e=I0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},bg=()=>tf()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C0(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[su(JSON.stringify(n)),su(JSON.stringify(f)),""].join(".")}const ua={};function P0(){const i={prod:[],emulator:[]};for(const e of Object.keys(ua))ua[e]?i.emulator.push(e):i.prod.push(e);return i}function k0(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let fm=!1;function x0(i,e){if(typeof window>"u"||typeof document>"u"||!nf(window.location.host)||ua[i]===e||ua[i]||fm)return;ua[i]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=P0().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{fm=!0,f()},R}function E(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function C(){const R=k0(s),z=n("text"),G=document.getElementById(z)||document.createElement("span"),$=n("learnmore"),F=document.getElementById($)||document.createElement("a"),pe=n("preprendIcon"),me=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const fe=R.element;m(fe),E(F,$);const ce=v();y(me,pe),fe.append(me,G,F,ce),document.body.appendChild(fe)}c?(G.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V0(){const i=tf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D0(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function M0(){return!V0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jg(){try{return typeof indexedDB=="object"}catch{return!1}}function Ug(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function O0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="FirebaseError";class ci extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=L0,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?F0(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new ci(a,m,s)}}function F0(i,e){return i.replace(b0,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const b0=/\{\$([^}]+)}/g;function ma(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(dm(c)&&dm(f)){if(!ma(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function dm(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=1e3,U0=2,z0=14400*1e3,B0=.5;function pm(i,e=j0,n=U0){const s=e*Math.pow(n,i),a=Math.round(B0*s*(Math.random()-.5)*2);return Math.min(z0,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(i){return i&&i._delegate?i._delegate:i}class Tr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new A0;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H0(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:q0(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q0(i){return i===Bi?void 0:i}function H0(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const W0={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Q0=Ve.INFO,K0={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Y0=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=K0[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rf{constructor(e){this.name=e,this._logLevel=Q0,this._logHandler=Y0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const X0=(i,e)=>e.some(n=>i instanceof n);let mm,gm;function J0(){return mm||(mm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z0(){return gm||(gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zg=new WeakMap,kh=new WeakMap,Bg=new WeakMap,yh=new WeakMap,sf=new WeakMap;function ew(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Jr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&zg.set(n,i)}).catch(()=>{}),sf.set(e,i),e}function tw(i){if(kh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});kh.set(i,e)}let xh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return kh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Bg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function nw(i){xh=i(xh)}function rw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(_h(this),e,...n);return Bg.set(s,e.sort?e.sort():[e]),Jr(s)}:Z0().includes(i)?function(...e){return i.apply(_h(this),e),Jr(zg.get(this))}:function(...e){return Jr(i.apply(_h(this),e))}}function iw(i){return typeof i=="function"?rw(i):(i instanceof IDBTransaction&&tw(i),X0(i,J0())?new Proxy(i,xh):i)}function Jr(i){if(i instanceof IDBRequest)return ew(i);if(yh.has(i))return yh.get(i);const e=iw(i);return e!==i&&(yh.set(i,e),sf.set(e,i)),e}const _h=i=>sf.get(i);function $g(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=Jr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Jr(f.result),y.oldVersion,y.newVersion,Jr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const sw=["get","getKey","getAll","getAllKeys","count"],ow=["put","add","delete","clear"],vh=new Map;function ym(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(vh.get(e))return vh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=ow.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||sw.includes(n)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return vh.set(e,c),c}nw(i=>({...i,get:(e,n,s)=>ym(e,n)||i.get(e,n,s),has:(e,n)=>!!ym(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function lw(i){return i.getComponent()?.type==="VERSION"}const Nh="@firebase/app",_m="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new rf("@firebase/app"),uw="@firebase/app-compat",cw="@firebase/analytics-compat",hw="@firebase/analytics",fw="@firebase/app-check-compat",dw="@firebase/app-check",pw="@firebase/auth",mw="@firebase/auth-compat",gw="@firebase/database",yw="@firebase/data-connect",_w="@firebase/database-compat",vw="@firebase/functions",ww="@firebase/functions-compat",Ew="@firebase/installations",Tw="@firebase/installations-compat",Iw="@firebase/messaging",Sw="@firebase/messaging-compat",Aw="@firebase/performance",Cw="@firebase/performance-compat",Rw="@firebase/remote-config",Pw="@firebase/remote-config-compat",kw="@firebase/storage",xw="@firebase/storage-compat",Nw="@firebase/firestore",Vw="@firebase/ai",Dw="@firebase/firestore-compat",Mw="firebase",Ow="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="[DEFAULT]",Lw={[Nh]:"fire-core",[uw]:"fire-core-compat",[hw]:"fire-analytics",[cw]:"fire-analytics-compat",[dw]:"fire-app-check",[fw]:"fire-app-check-compat",[pw]:"fire-auth",[mw]:"fire-auth-compat",[gw]:"fire-rtdb",[yw]:"fire-data-connect",[_w]:"fire-rtdb-compat",[vw]:"fire-fn",[ww]:"fire-fn-compat",[Ew]:"fire-iid",[Tw]:"fire-iid-compat",[Iw]:"fire-fcm",[Sw]:"fire-fcm-compat",[Aw]:"fire-perf",[Cw]:"fire-perf-compat",[Rw]:"fire-rc",[Pw]:"fire-rc-compat",[kw]:"fire-gcs",[xw]:"fire-gcs-compat",[Nw]:"fire-fst",[Dw]:"fire-fst-compat",[Vw]:"fire-vertex","fire-js":"fire-js",[Mw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new Map,Fw=new Map,Dh=new Map;function vm(i,e){try{i.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ri(i){const e=i.name;if(Dh.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Dh.set(e,i);for(const n of ou.values())vm(n,i);for(const n of Fw.values())vm(n,i);return!0}function Aa(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function bw(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new wu("app","Firebase",jw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=Ow;function qg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Vh,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Zr.create("bad-app-name",{appName:String(a)});if(n||(n=bg()),!n)throw Zr.create("no-options");const c=ou.get(a);if(c){if(ma(n,c.options)&&ma(s,c.config))return c;throw Zr.create("duplicate-app",{appName:a})}const f=new G0(a);for(const y of Dh.values())f.addComponent(y);const m=new Uw(n,s,f);return ou.set(a,m),m}function Hg(i=Vh){const e=ou.get(i);if(!e&&i===Vh&&bg())return qg();if(!e)throw Zr.create("no-app",{appName:i});return e}function Xn(i,e,n){let s=Lw[i]??i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${s}" with version "${e}":`];a&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(f.join(" "));return}ri(new Tr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="firebase-heartbeat-database",$w=1,ga="firebase-heartbeat-store";let wh=null;function Gg(){return wh||(wh=$g(Bw,$w,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ga)}catch(n){console.warn(n)}}}}).catch(i=>{throw Zr.create("idb-open",{originalErrorMessage:i.message})})),wh}async function qw(i){try{const n=(await Gg()).transaction(ga),s=await n.objectStore(ga).get(Wg(i));return await n.done,s}catch(e){if(e instanceof ci)Ir.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function wm(i,e){try{const s=(await Gg()).transaction(ga,"readwrite");await s.objectStore(ga).put(e,Wg(i)),await s.done}catch(n){if(n instanceof ci)Ir.warn(n.message);else{const s=Zr.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(s.message)}}}function Wg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=1024,Gw=30;class Ww{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Em();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Gw){const a=Yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Em(),{heartbeatsToSend:n,unsentEntries:s}=Qw(this._heartbeatsCache.heartbeats),a=su(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ir.warn(e),""}}}function Em(){return new Date().toISOString().substring(0,10)}function Qw(i,e=Hw){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Tm(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Tm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Kw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jg()?Ug().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tm(i){return su(JSON.stringify({version:2,heartbeats:i})).length}function Yw(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(i){ri(new Tr("platform-logger",e=>new aw(e),"PRIVATE")),ri(new Tr("heartbeat",e=>new Ww(e),"PRIVATE")),Xn(Nh,_m,i),Xn(Nh,_m,"esm2020"),Xn("fire-js","")}Xw("");var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,Qg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function A(){}A.prototype=I.prototype,N.D=I.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(x,V,M){for(var S=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)S[tt-2]=arguments[tt];return I.prototype[V].apply(x,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,I,A){A||(A=0);var x=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)x[V]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(V=0;16>V;++V)x[V]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=N.g[0],A=N.g[1],V=N.g[2];var M=N.g[3],S=I+(M^A&(V^M))+x[0]+3614090360&4294967295;I=A+(S<<7&4294967295|S>>>25),S=M+(V^I&(A^V))+x[1]+3905402710&4294967295,M=I+(S<<12&4294967295|S>>>20),S=V+(A^M&(I^A))+x[2]+606105819&4294967295,V=M+(S<<17&4294967295|S>>>15),S=A+(I^V&(M^I))+x[3]+3250441966&4294967295,A=V+(S<<22&4294967295|S>>>10),S=I+(M^A&(V^M))+x[4]+4118548399&4294967295,I=A+(S<<7&4294967295|S>>>25),S=M+(V^I&(A^V))+x[5]+1200080426&4294967295,M=I+(S<<12&4294967295|S>>>20),S=V+(A^M&(I^A))+x[6]+2821735955&4294967295,V=M+(S<<17&4294967295|S>>>15),S=A+(I^V&(M^I))+x[7]+4249261313&4294967295,A=V+(S<<22&4294967295|S>>>10),S=I+(M^A&(V^M))+x[8]+1770035416&4294967295,I=A+(S<<7&4294967295|S>>>25),S=M+(V^I&(A^V))+x[9]+2336552879&4294967295,M=I+(S<<12&4294967295|S>>>20),S=V+(A^M&(I^A))+x[10]+4294925233&4294967295,V=M+(S<<17&4294967295|S>>>15),S=A+(I^V&(M^I))+x[11]+2304563134&4294967295,A=V+(S<<22&4294967295|S>>>10),S=I+(M^A&(V^M))+x[12]+1804603682&4294967295,I=A+(S<<7&4294967295|S>>>25),S=M+(V^I&(A^V))+x[13]+4254626195&4294967295,M=I+(S<<12&4294967295|S>>>20),S=V+(A^M&(I^A))+x[14]+2792965006&4294967295,V=M+(S<<17&4294967295|S>>>15),S=A+(I^V&(M^I))+x[15]+1236535329&4294967295,A=V+(S<<22&4294967295|S>>>10),S=I+(V^M&(A^V))+x[1]+4129170786&4294967295,I=A+(S<<5&4294967295|S>>>27),S=M+(A^V&(I^A))+x[6]+3225465664&4294967295,M=I+(S<<9&4294967295|S>>>23),S=V+(I^A&(M^I))+x[11]+643717713&4294967295,V=M+(S<<14&4294967295|S>>>18),S=A+(M^I&(V^M))+x[0]+3921069994&4294967295,A=V+(S<<20&4294967295|S>>>12),S=I+(V^M&(A^V))+x[5]+3593408605&4294967295,I=A+(S<<5&4294967295|S>>>27),S=M+(A^V&(I^A))+x[10]+38016083&4294967295,M=I+(S<<9&4294967295|S>>>23),S=V+(I^A&(M^I))+x[15]+3634488961&4294967295,V=M+(S<<14&4294967295|S>>>18),S=A+(M^I&(V^M))+x[4]+3889429448&4294967295,A=V+(S<<20&4294967295|S>>>12),S=I+(V^M&(A^V))+x[9]+568446438&4294967295,I=A+(S<<5&4294967295|S>>>27),S=M+(A^V&(I^A))+x[14]+3275163606&4294967295,M=I+(S<<9&4294967295|S>>>23),S=V+(I^A&(M^I))+x[3]+4107603335&4294967295,V=M+(S<<14&4294967295|S>>>18),S=A+(M^I&(V^M))+x[8]+1163531501&4294967295,A=V+(S<<20&4294967295|S>>>12),S=I+(V^M&(A^V))+x[13]+2850285829&4294967295,I=A+(S<<5&4294967295|S>>>27),S=M+(A^V&(I^A))+x[2]+4243563512&4294967295,M=I+(S<<9&4294967295|S>>>23),S=V+(I^A&(M^I))+x[7]+1735328473&4294967295,V=M+(S<<14&4294967295|S>>>18),S=A+(M^I&(V^M))+x[12]+2368359562&4294967295,A=V+(S<<20&4294967295|S>>>12),S=I+(A^V^M)+x[5]+4294588738&4294967295,I=A+(S<<4&4294967295|S>>>28),S=M+(I^A^V)+x[8]+2272392833&4294967295,M=I+(S<<11&4294967295|S>>>21),S=V+(M^I^A)+x[11]+1839030562&4294967295,V=M+(S<<16&4294967295|S>>>16),S=A+(V^M^I)+x[14]+4259657740&4294967295,A=V+(S<<23&4294967295|S>>>9),S=I+(A^V^M)+x[1]+2763975236&4294967295,I=A+(S<<4&4294967295|S>>>28),S=M+(I^A^V)+x[4]+1272893353&4294967295,M=I+(S<<11&4294967295|S>>>21),S=V+(M^I^A)+x[7]+4139469664&4294967295,V=M+(S<<16&4294967295|S>>>16),S=A+(V^M^I)+x[10]+3200236656&4294967295,A=V+(S<<23&4294967295|S>>>9),S=I+(A^V^M)+x[13]+681279174&4294967295,I=A+(S<<4&4294967295|S>>>28),S=M+(I^A^V)+x[0]+3936430074&4294967295,M=I+(S<<11&4294967295|S>>>21),S=V+(M^I^A)+x[3]+3572445317&4294967295,V=M+(S<<16&4294967295|S>>>16),S=A+(V^M^I)+x[6]+76029189&4294967295,A=V+(S<<23&4294967295|S>>>9),S=I+(A^V^M)+x[9]+3654602809&4294967295,I=A+(S<<4&4294967295|S>>>28),S=M+(I^A^V)+x[12]+3873151461&4294967295,M=I+(S<<11&4294967295|S>>>21),S=V+(M^I^A)+x[15]+530742520&4294967295,V=M+(S<<16&4294967295|S>>>16),S=A+(V^M^I)+x[2]+3299628645&4294967295,A=V+(S<<23&4294967295|S>>>9),S=I+(V^(A|~M))+x[0]+4096336452&4294967295,I=A+(S<<6&4294967295|S>>>26),S=M+(A^(I|~V))+x[7]+1126891415&4294967295,M=I+(S<<10&4294967295|S>>>22),S=V+(I^(M|~A))+x[14]+2878612391&4294967295,V=M+(S<<15&4294967295|S>>>17),S=A+(M^(V|~I))+x[5]+4237533241&4294967295,A=V+(S<<21&4294967295|S>>>11),S=I+(V^(A|~M))+x[12]+1700485571&4294967295,I=A+(S<<6&4294967295|S>>>26),S=M+(A^(I|~V))+x[3]+2399980690&4294967295,M=I+(S<<10&4294967295|S>>>22),S=V+(I^(M|~A))+x[10]+4293915773&4294967295,V=M+(S<<15&4294967295|S>>>17),S=A+(M^(V|~I))+x[1]+2240044497&4294967295,A=V+(S<<21&4294967295|S>>>11),S=I+(V^(A|~M))+x[8]+1873313359&4294967295,I=A+(S<<6&4294967295|S>>>26),S=M+(A^(I|~V))+x[15]+4264355552&4294967295,M=I+(S<<10&4294967295|S>>>22),S=V+(I^(M|~A))+x[6]+2734768916&4294967295,V=M+(S<<15&4294967295|S>>>17),S=A+(M^(V|~I))+x[13]+1309151649&4294967295,A=V+(S<<21&4294967295|S>>>11),S=I+(V^(A|~M))+x[4]+4149444226&4294967295,I=A+(S<<6&4294967295|S>>>26),S=M+(A^(I|~V))+x[11]+3174756917&4294967295,M=I+(S<<10&4294967295|S>>>22),S=V+(I^(M|~A))+x[2]+718787259&4294967295,V=M+(S<<15&4294967295|S>>>17),S=A+(M^(V|~I))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(V+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+M&4294967295}s.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var A=I-this.blockSize,x=this.B,V=this.h,M=0;M<I;){if(V==0)for(;M<=A;)a(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<I;)if(x[V++]=N.charCodeAt(M++),V==this.blockSize){a(this,x),V=0;break}}else for(;M<I;)if(x[V++]=N[M++],V==this.blockSize){a(this,x),V=0;break}}this.h=V,this.o+=I},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var A=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=A&255,A/=256;for(this.u(N),N=Array(16),I=A=0;4>I;++I)for(var x=0;32>x;x+=8)N[A++]=this.g[I]>>>x&255;return N};function c(N,I){var A=m;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)}function f(N,I){this.h=I;for(var A=[],x=!0,V=N.length-1;0<=V;V--){var M=N[V]|0;x&&M==I||(A[V]=M,x=!1)}this.g=A}var m={};function y(N){return-128<=N&&128>N?c(N,function(I){return new f([I|0],0>I?-1:0)}):new f([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return C;if(0>N)return F(v(-N));for(var I=[],A=1,x=0;N>=A;x++)I[x]=N/A|0,A*=4294967296;return new f(I,0)}function E(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return F(E(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),x=C,V=0;V<N.length;V+=8){var M=Math.min(8,N.length-V),S=parseInt(N.substring(V,V+M),I);8>M?(M=v(Math.pow(I,M)),x=x.j(M).add(v(S))):(x=x.j(A),x=x.add(v(S)))}return x}var C=y(0),R=y(1),z=y(16777216);i=f.prototype,i.m=function(){if($(this))return-F(this).m();for(var N=0,I=1,A=0;A<this.g.length;A++){var x=this.i(A);N+=(0<=x?x:4294967296+x)*I,I*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(G(this))return"0";if($(this))return"-"+F(this).toString(N);for(var I=v(Math.pow(N,6)),A=this,x="";;){var V=ce(A,I).g;A=pe(A,V.j(I));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=V,G(A))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function G(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function $(N){return N.h==-1}i.l=function(N){return N=pe(this,N),$(N)?-1:G(N)?0:1};function F(N){for(var I=N.g.length,A=[],x=0;x<I;x++)A[x]=~N.g[x];return new f(A,~N.h).add(R)}i.abs=function(){return $(this)?F(this):this},i.add=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],x=0,V=0;V<=I;V++){var M=x+(this.i(V)&65535)+(N.i(V)&65535),S=(M>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);x=S>>>16,M&=65535,S&=65535,A[V]=S<<16|M}return new f(A,A[A.length-1]&-2147483648?-1:0)};function pe(N,I){return N.add(F(I))}i.j=function(N){if(G(this)||G(N))return C;if($(this))return $(N)?F(this).j(F(N)):F(F(this).j(N));if($(N))return F(this.j(F(N)));if(0>this.l(z)&&0>N.l(z))return v(this.m()*N.m());for(var I=this.g.length+N.g.length,A=[],x=0;x<2*I;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var V=0;V<N.g.length;V++){var M=this.i(x)>>>16,S=this.i(x)&65535,tt=N.i(V)>>>16,xt=N.i(V)&65535;A[2*x+2*V]+=S*xt,me(A,2*x+2*V),A[2*x+2*V+1]+=M*xt,me(A,2*x+2*V+1),A[2*x+2*V+1]+=S*tt,me(A,2*x+2*V+1),A[2*x+2*V+2]+=M*tt,me(A,2*x+2*V+2)}for(x=0;x<I;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=I;x<2*I;x++)A[x]=0;return new f(A,0)};function me(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function fe(N,I){this.g=N,this.h=I}function ce(N,I){if(G(I))throw Error("division by zero");if(G(N))return new fe(C,C);if($(N))return I=ce(F(N),I),new fe(F(I.g),F(I.h));if($(I))return I=ce(N,F(I)),new fe(F(I.g),I.h);if(30<N.g.length){if($(N)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var A=R,x=I;0>=x.l(N);)A=ie(A),x=ie(x);var V=le(A,1),M=le(x,1);for(x=le(x,2),A=le(A,2);!G(x);){var S=M.add(x);0>=S.l(N)&&(V=V.add(A),M=S),x=le(x,1),A=le(A,1)}return I=pe(N,V.j(I)),new fe(V,I)}for(V=C;0<=N.l(I);){for(A=Math.max(1,Math.floor(N.m()/I.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=v(A),S=M.j(I);$(S)||0<S.l(N);)A-=x,M=v(A),S=M.j(I);G(M)&&(M=R),V=V.add(M),N=pe(N,S)}return new fe(V,N)}i.A=function(N){return ce(this,N).h},i.and=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)&N.i(x);return new f(A,this.h&N.h)},i.or=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)|N.i(x);return new f(A,this.h|N.h)},i.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)^N.i(x);return new f(A,this.h^N.h)};function ie(N){for(var I=N.g.length+1,A=[],x=0;x<I;x++)A[x]=N.i(x)<<1|N.i(x-1)>>>31;return new f(A,N.h)}function le(N,I){var A=I>>5;I%=32;for(var x=N.g.length-A,V=[],M=0;M<x;M++)V[M]=0<I?N.i(M+A)>>>I|N.i(M+A+1)<<32-I:N.i(M+A);return new f(V,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Qg=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=E,ei=f}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kg,sa,Yg,Zl,Mh,Xg,Jg,Zg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var O=l[w];if(!(O in g))break e;g=g[O]}l=l[l.length-1],w=g[l],d=d(w),d!=w&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,w=!1,O={next:function(){if(!w&&g<l.length){var U=g++;return{value:d(U,l[U]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function E(l,d,g){return l.call.apply(l.bind,arguments)}function C(l,d,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function R(l,d,g){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:C,R.apply(null,arguments)}function z(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function G(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,O,U){for(var J=Array(arguments.length-2),je=2;je<arguments.length;je++)J[je-2]=arguments[je];return d.prototype[O].apply(w,J)}}function $(l){const d=l.length;if(0<d){const g=Array(d);for(let w=0;w<d;w++)g[w]=l[w];return g}return[]}function F(l,d){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(y(w)){const O=l.length||0,U=w.length||0;l.length=O+U;for(let J=0;J<U;J++)l[O+J]=w[J]}else l.push(w)}}class pe{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function me(l){return/^[\s\xa0]*$/.test(l)}function fe(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var ie=fe().indexOf("Gecko")!=-1&&!(fe().toLowerCase().indexOf("webkit")!=-1&&fe().indexOf("Edge")==-1)&&!(fe().indexOf("Trident")!=-1||fe().indexOf("MSIE")!=-1)&&fe().indexOf("Edge")==-1;function le(l,d,g){for(const w in l)d.call(g,l[w],w,l)}function N(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function I(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,d){let g,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(g in w)l[g]=w[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function V(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function M(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ge;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class tt{constructor(){this.h=this.g=null}add(d,g){const w=xt.get();w.set(d,g),this.h?this.h.next=w:this.g=w,this.h=w}}var xt=new pe(()=>new Nt,l=>l.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Z=!1,ge=new tt,ne=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(D)}};var D=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){M(g)}var d=xt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Z=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ie=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l})();function Se(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(ie){e:{try{ce(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Se.aa.h.call(this)}}G(Se,he);var ke={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(l,d,g,w,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!w,this.ha=O,this.key=++Fe,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ir(l){this.src=l,this.g={},this.h=0}ir.prototype.add=function(l,d,g,w,O){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var J=Cr(l,d,w,O);return-1<J?(d=l[J],g||(d.fa=!1)):(d=new Be(d,this.src,U,!!w,O),d.fa=g,l.push(d)),d};function ts(l,d){var g=d.type;if(g in l.g){var w=l.g[g],O=Array.prototype.indexOf.call(w,d,void 0),U;(U=0<=O)&&Array.prototype.splice.call(w,O,1),U&&(yt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Cr(l,d,g,w){for(var O=0;O<l.length;++O){var U=l[O];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==w)return O}return-1}var pi="closure_lm_"+(1e6*Math.random()|0),ns={};function uo(l,d,g,w,O){if(Array.isArray(d)){for(var U=0;U<d.length;U++)uo(l,d[U],g,w,O);return null}return g=fo(g),l&&l[Le]?l.K(d,g,v(w)?!!w.capture:!1,O):co(l,d,g,!1,w,O)}function co(l,d,g,w,O,U){if(!d)throw Error("Invalid event type");var J=v(O)?!!O.capture:!!O,je=is(l);if(je||(l[pi]=je=new ir(l)),g=je.add(d,g,w,J,U),g.proxy)return g;if(w=Va(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)Ie||(O=J),O===void 0&&(O=!1),l.addEventListener(d.toString(),w,O);else if(l.attachEvent)l.attachEvent(or(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Va(){function l(g){return d.call(l.src,l.listener,g)}const d=ho;return l}function rs(l,d,g,w,O){if(Array.isArray(d))for(var U=0;U<d.length;U++)rs(l,d[U],g,w,O);else w=v(w)?!!w.capture:!!w,g=fo(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],g=Cr(U,g,w,O),-1<g&&(yt(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=is(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Cr(d,g,w,O)),(g=-1<l?d[l]:null)&&sr(g))}function sr(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])ts(d.i,l);else{var g=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(g,w,l.capture):d.detachEvent?d.detachEvent(or(g),w):d.addListener&&d.removeListener&&d.removeListener(w),(g=is(d))?(ts(g,l),g.h==0&&(g.src=null,d[pi]=null)):yt(l)}}}function or(l){return l in ns?ns[l]:ns[l]="on"+l}function ho(l,d){if(l.da)l=!0;else{d=new Se(d,this);var g=l.listener,w=l.ha||l.src;l.fa&&sr(l),l=g.call(w,d)}return l}function is(l){return l=l[pi],l instanceof ir?l:null}var ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function fo(l){return typeof l=="function"?l:(l[ss]||(l[ss]=function(d){return l.handleEvent(d)}),l[ss])}function ht(){H.call(this),this.i=new ir(this),this.M=this,this.F=null}G(ht,H),ht.prototype[Le]=!0,ht.prototype.removeEventListener=function(l,d,g,w){rs(this,l,d,g,w)};function ft(l,d){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var O=d;d=new he(w,l),x(d,O)}if(O=!0,g)for(var U=g.length-1;0<=U;U--){var J=d.g=g[U];O=ar(J,w,!0,d)&&O}if(J=d.g=l,O=ar(J,w,!0,d)&&O,O=ar(J,w,!1,d)&&O,g)for(U=0;U<g.length;U++)J=d.g=g[U],O=ar(J,w,!1,d)&&O}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],w=0;w<g.length;w++)yt(g[w]);delete l.g[d],l.h--}}this.F=null},ht.prototype.K=function(l,d,g,w){return this.i.add(String(l),d,!1,g,w)},ht.prototype.L=function(l,d,g,w){return this.i.add(String(l),d,!0,g,w)};function ar(l,d,g,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,U=0;U<d.length;++U){var J=d[U];if(J&&!J.da&&J.capture==g){var je=J.listener,dt=J.ha||J.src;J.fa&&ts(l.i,J),O=je.call(dt,w)!==!1&&O}}return O&&!w.defaultPrevented}function po(l,d,g){if(typeof l=="function")g&&(l=R(l,g));else if(l&&typeof l.handleEvent=="function")l=R(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Rr(l){l.g=po(()=>{l.g=null,l.i&&(l.i=!1,Rr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class mi extends H{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(l){H.call(this),this.h=l,this.g={}}G(gi,H);var mo=[];function go(l){le(l.g,function(d,g){this.g.hasOwnProperty(g)&&sr(d)},l),l.g={}}gi.prototype.N=function(){gi.aa.N.call(this),go(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yo=m.JSON.stringify,_o=m.JSON.parse,vo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function yi(){}yi.prototype.h=null;function os(l){return l.h||(l.h=l.i())}function as(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){he.call(this,"d")}G(jn,he);function ls(){he.call(this,"c")}G(ls,he);var Un={},wo=null;function _i(){return wo=wo||new ht}Un.La="serverreachability";function Eo(l){he.call(this,Un.La,l)}G(Eo,he);function lr(l){const d=_i();ft(d,new Eo(d))}Un.STAT_EVENT="statevent";function To(l,d){he.call(this,Un.STAT_EVENT,l),this.stat=d}G(To,he);function nt(l){const d=_i();ft(d,new To(d,l))}Un.Ma="timingevent";function us(l,d){he.call(this,Un.Ma,l),this.size=d}G(us,he);function Tn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function wi(l,d,g,w,O,U){l.info(function(){if(l.g)if(U)for(var J="",je=U.split("&"),dt=0;dt<je.length;dt++){var xe=je[dt].split("=");if(1<xe.length){var _t=xe[0];xe=xe[1];var st=_t.split("_");J=2<=st.length&&st[1]=="type"?J+(_t+"="+xe+"&"):J+(_t+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+d+`
`+g+`
`+J})}function cs(l,d,g,w,O,U,J){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+d+`
`+g+`
`+U+" "+J})}function In(l,d,g,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Uu(l,g)+(w?" "+w:"")})}function Io(l,d){l.info(function(){return"TIMEOUT: "+d})}vi.prototype.info=function(){};function Uu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return yo(g)}catch{return d}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Da={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function Ei(){}G(Ei,yi),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},Sn=new Ei;function An(l,d,g,w){this.j=l,this.i=d,this.l=g,this.R=w||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ma}function Ma(){this.i=null,this.g="",this.h=!1}var So={},fs={};function ds(l,d,g){l.L=1,l.v=Vr(tn(d)),l.m=g,l.P=!0,Ao(l,null)}function Ao(l,d){l.F=Date.now(),$e(l),l.A=tn(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Mr(g.i,"t",w),l.C=0,g=l.j.J,l.h=new Ma,l.g=Ja(l.j,g?d:null,!l.m),0<l.O&&(l.M=new mi(R(l.Y,l,l.g),l.O)),d=l.U,g=l.g,w=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(mo[0]=O.toString()),O=mo);for(var U=0;U<O.length;U++){var J=uo(g,O[U],w||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),lr(),wi(l.i,l.u,l.A,l.l,l.R,l.m)}An.prototype.ca=function(l){l=l.target;const d=this.M;d&&qt(l)==3?d.j():this.Y(l)},An.prototype.Y=function(l){try{if(l==this.g)e:{const st=qt(this.g);var d=this.g.Ba();const dn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||st!=4||d==7||(d==8||0>=dn?lr(3):lr(2)),Ti(this);var g=this.g.Z();this.X=g;t:if(Oa(this)){var w=No(this.g);l="";var O=w.length,U=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Pr(this);var J="";break t}this.h.i=new m.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(U&&d==O-1)});w.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=g==200,cs(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var je,dt=this.g;if((je=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(je)){var xe=je;break t}}xe=null}if(g=xe)In(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,g);else{this.o=!1,this.s=3,nt(12),hn(this),Pr(this);break e}}if(this.P){g=!0;let rn;for(;!this.J&&this.C<J.length;)if(rn=zu(this,J),rn==fs){st==4&&(this.s=4,nt(14),g=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==So){this.s=4,nt(15),In(this.i,this.l,J,"[Invalid Chunk]"),g=!1;break}else In(this.i,this.l,rn,null),Co(this,rn);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||J.length!=0||this.h.h||(this.s=1,nt(16),g=!1),this.o=this.o&&g,!g)In(this.i,this.l,J,"[Invalid Chunked Response]"),hn(this),Pr(this);else if(0<J.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Do(_t),_t.M=!0,nt(11))}}else In(this.i,this.l,J,null),Co(this,J);st==4&&hn(this),this.o&&!this.J&&(st==4?Ss(this.j,this):(this.o=!1,$e(this)))}else vs(this.g),g==400&&0<J.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),hn(this),Pr(this)}}}catch{}finally{}};function Oa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function zu(l,d){var g=l.C,w=d.indexOf(`
`,g);return w==-1?fs:(g=Number(d.substring(g,w)),isNaN(g)?So:(w+=1,w+g>d.length?fs:(d=d.slice(w,w+g),l.C=w+g,d)))}An.prototype.cancel=function(){this.J=!0,hn(this)};function $e(l){l.S=Date.now()+l.I,La(l,l.I)}function La(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(R(l.ba,l),d)}function Ti(l){l.B&&(m.clearTimeout(l.B),l.B=null)}An.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Io(this.i,this.A),this.L!=2&&(lr(),nt(17)),hn(this),this.s=2,Pr(this)):La(this,this.S-l)};function Pr(l){l.j.G==0||l.J||Ss(l.j,l)}function hn(l){Ti(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,go(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Co(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||jt(g.h,l))){if(!l.K&&jt(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Is(g),xn(g);else break e;Ts(g),nt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Tn(R(g.Za,g),6e3));if(1>=ba(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else dr(g,11)}else if((l.K||g.g==l)&&Is(g),!me(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let xe=O[d];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const _t=xe[3];_t!=null&&(g.la=_t,g.j.info("VER="+g.la));const st=xe[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const dn=xe[5];dn!=null&&typeof dn=="number"&&0<dn&&(w=1.5*dn,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const rn=l.g;if(rn){const ki=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var U=w.h;U.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Ro(U,U.h),U.h=null))}if(w.D){const Cs=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cs&&(w.ya=Cs,ze(w.I,w.D,Cs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var J=l;if(w.qa=Xa(w,w.J?w.ia:null,w.W),J.K){ja(w.h,J);var je=J,dt=w.L;dt&&(je.I=dt),je.B&&(Ti(je),$e(je)),w.g=J}else Pi(w);0<g.i.length&&qn(g)}else xe[0]!="stop"&&xe[0]!="close"||dr(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?dr(g,7):St(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}lr(4)}catch{}}var Fa=class{constructor(l,d){this.g=l,this.map=d}};function Ii(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ba(l){return l.h?1:l.g?l.g.size:0}function jt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Ro(l,d){l.g?l.g.add(d):l.h=d}function ja(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Ii.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ua(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return $(l.i)}function ps(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,w=0;w<g;w++)d.push(l[w]);return d}d=[],g=0;for(w in l)d[g++]=l[w];return d}function ms(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const w in l)d[g++]=w;return d}}}function kr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=ms(l),w=ps(l),O=w.length,U=0;U<O;U++)d.call(void 0,w[U],g&&g[U],l)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),O=null;if(0<=w){var U=l[g].substring(0,w);O=l[g].substring(w+1)}else U=l[g];d(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ur){this.h=l.h,Ai(this,l.j),this.o=l.o,this.g=l.g,xr(this,l.s),this.l=l.l;var d=l.i,g=new zn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Nr(this,g),this.m=l.m}else l&&(d=String(l).match(Si))?(this.h=!1,Ai(this,d[1]||"",!0),this.o=Pe(d[2]||""),this.g=Pe(d[3]||"",!0),xr(this,d[4]),this.l=Pe(d[5]||"",!0),Nr(this,d[6]||"",!0),this.m=Pe(d[7]||"")):(this.h=!1,this.i=new zn(null,this.h))}ur.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Dr(d,gs,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Dr(d,gs,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Dr(g,g.charAt(0)=="/"?$a:Ba,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Dr(g,Po)),l.join("")};function tn(l){return new ur(l)}function Ai(l,d,g){l.j=g?Pe(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function xr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Nr(l,d,g){d instanceof zn?(l.i=d,Bn(l.i,l.h)):(g||(d=Dr(d,qa)),l.i=new zn(d,l.h))}function ze(l,d,g){l.i.set(d,g)}function Vr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pe(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Dr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,za),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function za(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gs=/[#\/\?@]/g,Ba=/[#\?:]/g,$a=/[#\?]/g,qa=/[#\?@]/g,Po=/#/g;function zn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&Bu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=zn.prototype,i.add=function(l,d){It(this),this.i=null,l=fn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function Cn(l,d){It(l),d=fn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Rn(l,d){return It(l),d=fn(l,d),l.g.has(d)}i.forEach=function(l,d){It(this),this.g.forEach(function(g,w){g.forEach(function(O){l.call(d,O,w,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let w=0;w<d.length;w++){const O=l[w];for(let U=0;U<O.length;U++)g.push(d[w])}return g},i.V=function(l){It(this);let d=[];if(typeof l=="string")Rn(this,l)&&(d=d.concat(this.g.get(fn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return It(this),this.i=null,l=fn(this,l),Rn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Mr(l,d,g){Cn(l,d),0<g.length&&(l.i=null,l.g.set(fn(l,d),$(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var w=d[g];const U=encodeURIComponent(String(w)),J=this.V(w);for(w=0;w<J.length;w++){var O=U;J[w]!==""&&(O+="="+encodeURIComponent(String(J[w]))),l.push(O)}}return this.i=l.join("&")};function fn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Bn(l,d){d&&!l.j&&(It(l),l.i=null,l.g.forEach(function(g,w){var O=w.toLowerCase();w!=O&&(Cn(this,w),Mr(this,O,g))},l)),l.j=d}function $u(l,d){const g=new vi;if(m.Image){const w=new Image;w.onload=z($t,g,"TestLoadImage: loaded",!0,d,w),w.onerror=z($t,g,"TestLoadImage: error",!1,d,w),w.onabort=z($t,g,"TestLoadImage: abort",!1,d,w),w.ontimeout=z($t,g,"TestLoadImage: timeout",!1,d,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function Ha(l,d){const g=new vi,w=new AbortController,O=setTimeout(()=>{w.abort(),$t(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(U=>{clearTimeout(O),U.ok?$t(g,"TestPingServer: ok",!0,d):$t(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),$t(g,"TestPingServer: error",!1,d)})}function $t(l,d,g,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(g)}catch{}}function qu(){this.g=new vo}function Ga(l,d,g){const w=g||"";try{kr(l,function(O,U){let J=O;v(O)&&(J=yo(O)),d.push(w+U+"="+encodeURIComponent(J))})}catch(O){throw d.push(w+"type="+encodeURIComponent("_badmap")),O}}function cr(l){this.l=l.Ub||null,this.j=l.eb||!1}G(cr,yi),cr.prototype.g=function(){return new Ci(this.l,this.j)},cr.prototype.i=(function(l){return function(){return l}})({});function Ci(l,d){ht.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Ci,ht),i=Ci.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,kn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wa(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wa(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Pn(this):kn(this),this.readyState==3&&Wa(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Pn(this))},i.Qa=function(l){this.g&&(this.response=l,Pn(this))},i.ga=function(){this.g&&Pn(this)};function Pn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,kn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function kn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hr(l){let d="";return le(l,function(g,w){d+=w,d+=":",d+=g,d+=`\r
`}),d}function Or(l,d,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=hr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,d,g))}function Ke(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Ke,ht);var Hu=/^https?$/i,ko=["POST","PUT"];i=Ke.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?os(this.o):os(Sn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){Ri(this,U);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)g.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const U of w.keys())g.set(U,w.get(U));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ko,d,void 0))||w||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of g)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Ri(this,U)}};function Ri(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,ys(l),nn(l)}function ys(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ft(this,"complete"),ft(this,"abort"),nn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?xo(this):this.bb())},i.bb=function(){xo(this)};function xo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)po(l.Ea,0,l);else if(ft(l,"readystatechange"),qt(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var w;if(w=J===0){var O=String(l.D).match(Si)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),w=!Hu.test(O?O.toLowerCase():"")}g=w}if(g)ft(l,"complete"),ft(l,"success");else{l.m=6;try{var U=2<qt(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",ys(l)}}finally{nn(l)}}}}function nn(l,d){if(l.g){_s(l);const g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ft(l,"ready");try{g.onreadystatechange=w}catch{}}}function _s(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),_o(d)}};function No(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function vs(l){const d={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(me(l[w]))continue;var g=V(l[w]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[O]||[];d[O]=U,U.push(g)}N(d,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $n(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Vo(l){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$n("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$n("baseRetryDelayMs",5e3,l),this.cb=$n("retryDelaySeedMs",1e4,l),this.Wa=$n("forwardChannelMaxRetries",2,l),this.wa=$n("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(l&&l.concurrentRequestLimit),this.Da=new qu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Vo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,w){nt(0),this.W=l,this.H=d||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Xa(this,null,this.W),qn(this)};function St(l){if(ws(l),l.G==3){var d=l.U++,g=tn(l.I);if(ze(g,"SID",l.K),ze(g,"RID",d),ze(g,"TYPE","terminate"),fr(l,g),d=new An(l,l.j,d),d.L=2,d.v=Vr(tn(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Ja(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$e(d)}Ya(l)}function xn(l){l.g&&(Do(l),l.g.cancel(),l.g=null)}function ws(l){xn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Is(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function qn(l){if(!en(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ue||ne(),Z||(Ue(),Z=!0),ge.add(d,l),l.B=0}}function Gu(l,d){return ba(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(R(l.Ga,l,d),Ka(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new An(this,this.j,l);let U=this.o;if(this.S&&(U?(U=I(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Lr(this,O,d),g=tn(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),fr(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(hr(U)))+"&"+d:this.m&&Or(g,this.m,U)),Ro(this.h,O),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",d),ze(g,"SID","null"),O.T=!0,ds(O,g,null)):ds(O,g,d),this.G=2}}else this.G==3&&(l?Es(this,l):this.i.length==0||en(this.h)||Es(this))};function Es(l,d){var g;d?g=d.l:g=l.U++;const w=tn(l.I);ze(w,"SID",l.K),ze(w,"RID",g),ze(w,"AID",l.T),fr(l,w),l.m&&l.o&&Or(w,l.m,l.o),g=new An(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Lr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ro(l.h,g),ds(g,w,d)}function fr(l,d){l.H&&le(l.H,function(g,w){ze(d,w,g)}),l.l&&kr({},function(g,w){ze(d,w,g)})}function Lr(l,d,g){g=Math.min(l.i.length,g);var w=l.l?R(l.l.Na,l.l,l):null;e:{var O=l.i;let U=-1;for(;;){const J=["count="+g];U==-1?0<g?(U=O[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let je=!0;for(let dt=0;dt<g;dt++){let xe=O[dt].g;const _t=O[dt].map;if(xe-=U,0>xe)U=Math.max(0,O[dt].g-100),je=!1;else try{Ga(_t,J,"req"+xe+"_")}catch{w&&w(_t)}}if(je){w=J.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,w}function Pi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ue||ne(),Z||(Ue(),Z=!0),ge.add(d,l),l.v=0}}function Ts(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(R(l.Fa,l),Ka(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Qa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(R(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),xn(this),Qa(this))};function Do(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Qa(l){l.g=new An(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=tn(l.qa);ze(d,"RID","rpc"),ze(d,"SID",l.K),ze(d,"AID",l.T),ze(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(d,"TO",l.ja),ze(d,"TYPE","xmlhttp"),fr(l,d),l.m&&l.o&&Or(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Vr(tn(d)),g.m=null,g.P=!0,Ao(g,l)}i.Za=function(){this.C!=null&&(this.C=null,xn(this),Ts(this),nt(19))};function Is(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Ss(l,d){var g=null;if(l.g==d){Is(l),Do(l),l.g=null;var w=2}else if(jt(l.h,d))g=d.D,ja(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;w=_i(),ft(w,new us(w,g)),qn(l)}else Pi(l);else if(O=d.s,O==3||O==0&&0<d.X||!(w==1&&Gu(l,d)||w==2&&Ts(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),O){case 1:dr(l,5);break;case 4:dr(l,10);break;case 3:dr(l,6);break;default:dr(l,2)}}}function Ka(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function dr(l,d){if(l.j.info("Error code "+d),d==2){var g=R(l.fb,l),w=l.Xa;const O=!w;w=new ur(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ai(w,"https"),Vr(w),O?$u(w.toString(),g):Ha(w.toString(),g)}else nt(2);l.G=0,l.l&&l.l.sa(d),Ya(l),ws(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ya(l){if(l.G=0,l.ka=[],l.l){const d=Ua(l.h);(d.length!=0||l.i.length!=0)&&(F(l.ka,d),F(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function Xa(l,d,g){var w=g instanceof ur?tn(g):new ur(g);if(w.g!="")d&&(w.g=d+"."+w.g),xr(w,w.s);else{var O=m.location;w=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var U=new ur(null);w&&Ai(U,w),d&&(U.g=d),O&&xr(U,O),g&&(U.l=g),w=U}return g=l.D,d=l.ya,g&&d&&ze(w,g,d),ze(w,"VER",l.la),fr(l,w),w}function Ja(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ke(new cr({eb:g})):new Ke(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mo(){}i=Mo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function As(){}As.prototype.g=function(l,d){return new Ut(l,d)};function Ut(l,d){ht.call(this),this.g=new Vo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!me(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!me(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Hn(this)}G(Ut,ht),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){St(this.g)},Ut.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=yo(l),l=g);d.i.push(new Fa(d.Ya++,l)),d.G==3&&qn(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,Ut.aa.N.call(this)};function Za(l){jn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}G(Za,jn);function el(){ls.call(this),this.status=1}G(el,ls);function Hn(l){this.g=l}G(Hn,Mo),Hn.prototype.ua=function(){ft(this.g,"a")},Hn.prototype.ta=function(l){ft(this.g,new Za(l))},Hn.prototype.sa=function(l){ft(this.g,new el)},Hn.prototype.ra=function(){ft(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Zg=function(){return new As},Jg=function(){return _i()},Xg=Un,Mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Zl=hs,Da.COMPLETE="complete",Yg=Da,as.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ht.prototype.listen=ht.prototype.K,sa=as,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Kg=Ke}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const Sm="@firebase/firestore",Am="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new rf("@firebase/firestore");function Ws(){return Wi.logLevel}function re(i,...e){if(Wi.logLevel<=Ve.DEBUG){const n=e.map(of);Wi.debug(`Firestore (${io}): ${i}`,...n)}}function Sr(i,...e){if(Wi.logLevel<=Ve.ERROR){const n=e.map(of);Wi.error(`Firestore (${io}): ${i}`,...n)}}function Js(i,...e){if(Wi.logLevel<=Ve.WARN){const n=e.map(of);Wi.warn(`Firestore (${io}): ${i}`,...n)}}function of(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,ey(i,s,n)}function ey(i,e,n){let s=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Sr(s),new Error(s)}function be(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||ey(e,a,s)}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class Zw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ti,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ti)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(be(typeof s.accessToken=="string",31837,{l:s}),new ty(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class tE{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nE{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new tE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);const s=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=iE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function Oh(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return Eh(a)===Eh(c)?Ce(a,c):Eh(a)?1:-1}return Ce(i.length,e.length)}const sE=55296,oE=57343;function Eh(i){const e=i.charCodeAt(0);return e>=sE&&e<=oE}function Zs(i,e,n){return i.length===e.length&&i.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="__name__";class Yn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ve(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Yn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ce(e.length,n.length)}static compareSegments(e,n){const s=Yn.isNumericId(e),a=Yn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Yn.extractNumericId(e).compare(Yn.extractNumericId(n)):Oh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}}class He extends Yn{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const aE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Yn{construct(e,n,s){return new Pt(e,n,s)}static isValidIdentifier(e){return aE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rm}static keyField(){return new Pt([Rm])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(He.fromString(e))}static fromName(e){return new de(He.fromString(e).popFirst(5))}static empty(){return new de(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(i,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function lE(i,e,n,s){if(e===!0&&s===!0)throw new ee(B.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pm(i){if(!de.isDocumentKey(i))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if(de.isDocumentKey(i))throw new ee(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ry(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Eu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function Jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eu(i);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ca(i,e){if(!ry(i))throw new ee(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(a&&typeof f!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ee(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=-62135596800,Nm=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Nm);return new Qe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xm)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nm}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ca(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:ut("string",Qe._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Qe(0,0))}static max(){return new Ee(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=-1;function uE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(s===1e9?new Qe(n+1,0):new Qe(n,s));return new ii(a,de.empty(),e)}function cE(i){return new ii(i.readTime,i.key,ya)}class ii{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ii(Ee.min(),de.empty(),ya)}static max(){return new ii(Ee.max(),de.empty(),ya)}}function hE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(i){if(i.code!==B.FAILED_PRECONDITION||i.message!==fE)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):q.reject(n)}static resolve(e){return new q(((n,s)=>{n(e)}))}static reject(e){return new q(((n,s)=>{s(e)}))}static waitFor(e){return new q(((n,s)=>{let a=0,c=0,f=!1;e.forEach((m=>{++a,m.next((()=>{++c,f&&c===a&&n()}),(y=>s(y)))})),f=!0,c===a&&n()}))}static or(e){let n=q.resolve(!1);for(const s of e)n=n.next((a=>a?q.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,c)=>{s.push(n.call(this,a,c))})),this.waitFor(s)}static mapArray(e,n){return new q(((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((E=>{f[v]=E,++m,m===c&&s(f)}),(E=>a(E)))}}))}static doWhile(e,n){return new q(((s,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):s()};c()}))}}function pE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=-1;function Iu(i){return i==null}function au(i){return i===0&&1/i==-1/0}function mE(i){return typeof i=="number"&&Number.isInteger(i)&&!au(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="";function gE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Vm(e)),e=yE(i.get(n),e);return Vm(e)}function yE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case iy:n+="";break;default:n+=c}}return n}function Vm(i){return i+iy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function hi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function sy(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Rt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mm(this.data.getIterator())}getIteratorFrom(e){return new Mm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Mm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new gt(Pt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new oy("Invalid base64 string: "+c):c}})(e);return new kt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const _E=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(i){if(be(!!i,39018),typeof i=="string"){let e=0;const n=_E.exec(i);if(be(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function oi(i){return typeof i=="string"?kt.fromBase64String(i):kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="server_timestamp",ly="__type__",uy="__previous_value__",cy="__local_write_time__";function uf(i){return(i?.mapValue?.fields||{})[ly]?.stringValue===ay}function Su(i){const e=i.mapValue.fields[uy];return uf(e)?Su(e):e}function _a(i){const e=si(i.mapValue.fields[cy].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,s,a,c,f,m,y,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const lu="(default)";class va{constructor(e,n){this.projectId=e,this.database=n||lu}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===lu}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="__type__",wE="__max__",Yl={mapValue:{}},fy="__vector__",uu="value";function ai(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?uf(i)?4:TE(i)?9007199254740991:EE(i)?10:11:ve(28295,{value:i})}function rr(i,e){if(i===e)return!0;const n=ai(i);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _a(i).isEqual(_a(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=si(a.timestampValue),m=si(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return oi(a.bytesValue).isEqual(oi(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return it(a.geoPointValue.latitude)===it(c.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return it(a.integerValue)===it(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=it(a.doubleValue),m=it(c.doubleValue);return f===m?au(f)===au(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Zs(i.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Dm(f)!==Dm(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!rr(f[y],m[y])))return!1;return!0})(i,e);default:return ve(52216,{left:i})}}function wa(i,e){return(i.values||[]).find((n=>rr(n,e)))!==void 0}function eo(i,e){if(i===e)return 0;const n=ai(i),s=ai(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=it(c.integerValue||c.doubleValue),y=it(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return Om(i.timestampValue,e.timestampValue);case 4:return Om(_a(i),_a(e));case 5:return Oh(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=oi(c),y=oi(f);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),y=f.split("/");for(let v=0;v<m.length&&v<y.length;v++){const E=Ce(m[v],y[v]);if(E!==0)return E}return Ce(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Ce(it(c.latitude),it(f.latitude));return m!==0?m:Ce(it(c.longitude),it(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Lm(i.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},y=f.fields||{},v=m[uu]?.arrayValue,E=y[uu]?.arrayValue,C=Ce(v?.values?.length||0,E?.values?.length||0);return C!==0?C:Lm(v,E)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Yl.mapValue&&f===Yl.mapValue)return 0;if(c===Yl.mapValue)return 1;if(f===Yl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=f.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let C=0;C<y.length&&C<E.length;++C){const R=Oh(y[C],E[C]);if(R!==0)return R;const z=eo(m[y[C]],v[E[C]]);if(z!==0)return z}return Ce(y.length,E.length)})(i.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function Om(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=si(i),s=si(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function Lm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=eo(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function to(i){return Lh(i)}function Lh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=si(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return oi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return de.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=Lh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${Lh(n.fields[f])}`;return a+"}"})(i.mapValue):ve(61005,{value:i})}function eu(i){switch(ai(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Su(i);return e?16+eu(e):16;case 5:return 2*i.stringValue.length;case 6:return oi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+eu(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return hi(s.fields,((c,f)=>{a+=c.length+eu(f)})),a})(i.mapValue);default:throw ve(13486,{value:i})}}function Fm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fh(i){return!!i&&"integerValue"in i}function cf(i){return!!i&&"arrayValue"in i}function bm(i){return!!i&&"nullValue"in i}function jm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function tu(i){return!!i&&"mapValue"in i}function EE(i){return(i?.mapValue?.fields||{})[hy]?.stringValue===fy}function ca(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return hi(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ca(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ca(i.arrayValue.values[n]);return e}return{...i}}function TE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===wE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(n)}setAll(e){let n=Pt.emptyPath(),s={},a=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}f?s[m.lastSegment()]=ca(f):a.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];tu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){hi(n,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new Jt(ca(this.value))}}function dy(i){const e=[];return hi(i.fields,((n,s)=>{const a=new Pt([n]);if(tu(s)){const c=dy(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,s,a,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new bt(e,0,Ee.min(),Ee.min(),Ee.min(),Jt.empty(),0)}static newFoundDocument(e,n,s,a){return new bt(e,1,n,Ee.min(),s,a,0)}static newNoDocument(e,n){return new bt(e,2,n,Ee.min(),Ee.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Ee.min(),Ee.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.position=e,this.inclusive=n}}function Um(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=de.comparator(de.fromName(f.referenceValue),n.key):s=eo(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function zm(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!rr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n="asc"){this.field=e,this.dir=n}}function IE(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{}class lt extends py{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new AE(e,n,s):n==="array-contains"?new PE(e,s):n==="in"?new kE(e,s):n==="not-in"?new xE(e,s):n==="array-contains-any"?new NE(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new CE(e,s):new RE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eo(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends py{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bn(e,n)}matches(e){return my(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function my(i){return i.op==="and"}function gy(i){return SE(i)&&my(i)}function SE(i){for(const e of i.filters)if(e instanceof bn)return!1;return!0}function bh(i){if(i instanceof lt)return i.field.canonicalString()+i.op.toString()+to(i.value);if(gy(i))return i.filters.map((e=>bh(e))).join(",");{const e=i.filters.map((n=>bh(n))).join(",");return`${i.op}(${e})`}}function yy(i,e){return i instanceof lt?(function(s,a){return a instanceof lt&&s.op===a.op&&s.field.isEqual(a.field)&&rr(s.value,a.value)})(i,e):i instanceof bn?(function(s,a){return a instanceof bn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,m)=>c&&yy(f,a.filters[m])),!0):!1})(i,e):void ve(19439)}function _y(i){return i instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`})(i):i instanceof bn?(function(n){return n.op.toString()+" {"+n.getFilters().map(_y).join(" ,")+"}"})(i):"Filter"}class AE extends lt{constructor(e,n,s){super(e,n,s),this.key=de.fromName(s.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class CE extends lt{constructor(e,n){super(e,"in",n),this.keys=vy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RE extends lt{constructor(e,n){super(e,"not-in",n),this.keys=vy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function vy(i,e){return(e.arrayValue?.values||[]).map((n=>de.fromName(n.referenceValue)))}class PE extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cf(n)&&wa(n.arrayValue,this.value)}}class kE extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wa(this.value.arrayValue,n)}}class xE extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wa(this.value.arrayValue,n)}}class NE extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>wa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function Bm(i,e=null,n=[],s=[],a=null,c=null,f=null){return new VE(i,e,n,s,a,c,f)}function hf(i){const e=Te(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>bh(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Iu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>to(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>to(s))).join(",")),e.Te=n}return e.Te}function ff(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!IE(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!yy(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!zm(i.startAt,e.startAt)&&zm(i.endAt,e.endAt)}function jh(i){return de.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DE(i,e,n,s,a,c,f,m){return new ao(i,e,n,s,a,c,f,m)}function df(i){return new ao(i)}function $m(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function wy(i){return i.collectionGroup!==null}function ha(i){const e=Te(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new gt(Pt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ea(c,s))})),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Ea(Pt.keyField(),s))}return e.Ie}function Zn(i){const e=Te(i);return e.Ee||(e.Ee=ME(e,ha(i))),e.Ee}function ME(i,e){if(i.limitType==="F")return Bm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Ea(a.field,c)}));const n=i.endAt?new cu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new cu(i.startAt.position,i.startAt.inclusive):null;return Bm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Uh(i,e){const n=i.filters.concat([e]);return new ao(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function zh(i,e,n){return new ao(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Au(i,e){return ff(Zn(i),Zn(e))&&i.limitType===e.limitType}function Ey(i){return`${hf(Zn(i))}|lt:${i.limitType}`}function Qs(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>_y(a))).join(", ")}]`),Iu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>to(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>to(a))).join(",")),`Target(${s})`})(Zn(i))}; limitType=${i.limitType})`}function Cu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):de.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of ha(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(f,m,y){const v=Um(f,m,y);return f.inclusive?v<=0:v<0})(s.startAt,ha(s),a)||s.endAt&&!(function(f,m,y){const v=Um(f,m,y);return f.inclusive?v>=0:v>0})(s.endAt,ha(s),a))})(i,e)}function OE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ty(i){return(e,n)=>{let s=!1;for(const a of ha(i)){const c=LE(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function LE(i,e,n){const s=i.field.isKeyField()?de.comparator(e.key,n.key):(function(c,f,m){const y=f.data.field(c),v=m.data.field(c);return y!==null&&v!==null?eo(y,v):ve(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,((n,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return sy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Ze(de.comparator);function Ar(){return FE}const Iy=new Ze(de.comparator);function oa(...i){let e=Iy;for(const n of i)e=e.insert(n.key,n);return e}function Sy(i){let e=Iy;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function $i(){return fa()}function Ay(){return fa()}function fa(){return new Zi((i=>i.toString()),((i,e)=>i.isEqual(e)))}const bE=new Ze(de.comparator),jE=new gt(de.comparator);function Re(...i){let e=jE;for(const n of i)e=e.add(n);return e}const UE=new gt(Ce);function zE(){return UE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:au(e)?"-0":e}}function Cy(i){return{integerValue:""+i}}function BE(i,e){return mE(e)?Cy(e):pf(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this._=void 0}}function $E(i,e,n){return i instanceof Ta?(function(a,c){const f={fields:{[ly]:{stringValue:ay},[cy]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&uf(c)&&(c=Su(c)),c&&(f.fields[uy]=c),{mapValue:f}})(n,e):i instanceof Ia?Py(i,e):i instanceof Sa?ky(i,e):(function(a,c){const f=Ry(a,c),m=qm(f)+qm(a.Ae);return Fh(f)&&Fh(a.Ae)?Cy(m):pf(a.serializer,m)})(i,e)}function qE(i,e,n){return i instanceof Ia?Py(i,e):i instanceof Sa?ky(i,e):n}function Ry(i,e){return i instanceof hu?(function(s){return Fh(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Ta extends Ru{}class Ia extends Ru{constructor(e){super(),this.elements=e}}function Py(i,e){const n=xy(e);for(const s of i.elements)n.some((a=>rr(a,s)))||n.push(s);return{arrayValue:{values:n}}}class Sa extends Ru{constructor(e){super(),this.elements=e}}function ky(i,e){let n=xy(e);for(const s of i.elements)n=n.filter((a=>!rr(a,s)));return{arrayValue:{values:n}}}class hu extends Ru{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qm(i){return it(i.integerValue||i.doubleValue)}function xy(i){return cf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.field=e,this.transform=n}}function GE(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof Ia&&a instanceof Ia||s instanceof Sa&&a instanceof Sa?Zs(s.elements,a.elements,rr):s instanceof hu&&a instanceof hu?rr(s.Ae,a.Ae):s instanceof Ta&&a instanceof Ta})(i.transform,e.transform)}class WE{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Pu{}function Ny(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new mf(i.key,Fn.none()):new Ra(i.key,i.data,Fn.none());{const n=i.data,s=Jt.empty();let a=new gt(Pt.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new fi(i.key,s,new ln(a.toArray()),Fn.none())}}function QE(i,e,n){i instanceof Ra?(function(a,c,f){const m=a.value.clone(),y=Gm(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof fi?(function(a,c,f){if(!nu(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Gm(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(Vy(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,n):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function da(i,e,n,s){return i instanceof Ra?(function(c,f,m,y){if(!nu(c.precondition,f))return m;const v=c.value.clone(),E=Wm(c.fieldTransforms,y,f);return v.setAll(E),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null})(i,e,n,s):i instanceof fi?(function(c,f,m,y){if(!nu(c.precondition,f))return m;const v=Wm(c.fieldTransforms,y,f),E=f.data;return E.setAll(Vy(c)),E.setAll(v),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(i,e,n,s):(function(c,f,m){return nu(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function KE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Ry(s.transform,a||null);c!=null&&(n===null&&(n=Jt.empty()),n.set(s.field,c))}return n||null}function Hm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Zs(s,a,((c,f)=>GE(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ra extends Pu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fi extends Pu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Vy(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function Gm(i,e,n){const s=new Map;be(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,qE(f,m,n[a]))}return s}function Wm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,$E(c,f,e))}return s}class mf extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YE extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&QE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=da(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=da(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ay();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(a.key)?null:m;const y=Ny(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(Ee.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,((n,s)=>Hm(n,s)))&&Zs(this.baseMutations,e.baseMutations,((n,s)=>Hm(n,s)))}}class gf{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){be(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return bE})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new gf(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ne;function eT(i){switch(i){case B.OK:return ve(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function Dy(i){if(i===void 0)return Sr("GRPC error has no .code"),B.UNKNOWN;switch(i){case at.OK:return B.OK;case at.CANCELLED:return B.CANCELLED;case at.UNKNOWN:return B.UNKNOWN;case at.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case at.INTERNAL:return B.INTERNAL;case at.UNAVAILABLE:return B.UNAVAILABLE;case at.UNAUTHENTICATED:return B.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case at.NOT_FOUND:return B.NOT_FOUND;case at.ALREADY_EXISTS:return B.ALREADY_EXISTS;case at.PERMISSION_DENIED:return B.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case at.ABORTED:return B.ABORTED;case at.OUT_OF_RANGE:return B.OUT_OF_RANGE;case at.UNIMPLEMENTED:return B.UNIMPLEMENTED;case at.DATA_LOSS:return B.DATA_LOSS;default:return ve(39323,{code:i})}}(Ne=at||(at={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=new ei([4294967295,4294967295],0);function Qm(i){const e=tT().encode(i),n=new Qg;return n.update(e),new Uint8Array(n.digest())}function Km(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ei([n,s],0),new ei([a,c],0)]}class yf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new aa(`Invalid padding: ${n}`);if(s<0)throw new aa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new aa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ei.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(ei.fromNumber(s)));return a.compare(nT)===1&&(a=new ei([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qm(e),[s,a]=Km(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new yf(c,a,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Qm(e),[s,a]=Km(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ku(Ee.min(),a,new Ze(Ce),Ar(),Re())}}class Pa{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Pa(s,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class My{constructor(e,n){this.targetId=e,this.Ce=n}}class Oy{constructor(e,n,s=kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Ym{constructor(){this.ve=0,this.Fe=Xm(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),s=Re();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:ve(38017,{changeType:c})}})),new Pa(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Xm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ze(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const c=a.target;if(jh(c))if(s===0){const f=new de(c.path);this.et(n,f,bt.newNoDocument(f,Ee.min()))}else be(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),y=m?this.ct(m,e,f):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,m;try{f=oi(s).toUint8Array()}catch(y){if(y instanceof oy)return Js("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new yf(f,a,c)}catch(y){return Js(y instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&jh(m.target)){const y=new de(m.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,bt.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Re();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const a=new ku(e,n,this.Ye,this.je,s);return this.je=Ar(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ze(Ce),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ym,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ym),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xl(){return new Ze(de.comparator)}function Xm(){return new Ze(de.comparator)}const iT={asc:"ASCENDING",desc:"DESCENDING"},sT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oT={and:"AND",or:"OR"};class aT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bh(i,e){return i.useProto3Json||Iu(e)?e:{value:e}}function fu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ly(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function lT(i,e){return fu(i,e.toTimestamp())}function er(i){return be(!!i,49232),Ee.fromTimestamp((function(n){const s=si(n);return new Qe(s.seconds,s.nanos)})(i))}function _f(i,e){return $h(i,e).canonicalString()}function $h(i,e){const n=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Fy(i){const e=He.fromString(i);return be(By(e),10190,{key:e.toString()}),e}function qh(i,e){return _f(i.databaseId,e.path)}function Th(i,e){const n=Fy(e);if(n.get(1)!==i.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new de(jy(n))}function by(i,e){return _f(i.databaseId,e)}function uT(i){const e=Fy(i);return e.length===4?He.emptyPath():jy(e)}function Hh(i){return new He(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function jy(i){return be(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Jm(i,e,n){return{name:qh(i,e),fields:n.value.mapValue.fields}}function cT(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ve(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(v,E){return v.useProto3Json?(be(E===void 0||typeof E=="string",58123),kt.fromBase64String(E||"")):(be(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),kt.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(v){const E=v.code===void 0?B.UNKNOWN:Dy(v.code);return new ee(E,v.message||"")})(f);n=new Oy(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Th(i,s.document.name),c=er(s.document.updateTime),f=s.document.createTime?er(s.document.createTime):Ee.min(),m=new Jt({mapValue:{fields:s.document.fields}}),y=bt.newFoundDocument(a,c,f,m),v=s.targetIds||[],E=s.removedTargetIds||[];n=new ru(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Th(i,s.document),c=s.readTime?er(s.readTime):Ee.min(),f=bt.newNoDocument(a,c),m=s.removedTargetIds||[];n=new ru([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Th(i,s.document),c=s.removedTargetIds||[];n=new ru([],c,a,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new ZE(a,c),m=s.targetId;n=new My(m,f)}}return n}function hT(i,e){let n;if(e instanceof Ra)n={update:Jm(i,e.key,e.value)};else if(e instanceof mf)n={delete:qh(i,e.key)};else if(e instanceof fi)n={update:Jm(i,e.key,e.data),updateMask:wT(e.fieldMask)};else{if(!(e instanceof YE))return ve(16599,{Vt:e.type});n={verify:qh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Ta)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ia)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Sa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof hu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw ve(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:lT(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve(27497)})(i,e.precondition)),n}function fT(i,e){return i&&i.length>0?(be(e!==void 0,14353),i.map((n=>(function(a,c){let f=a.updateTime?er(a.updateTime):er(c);return f.isEqual(Ee.min())&&(f=er(c)),new WE(f,a.transformResults||[])})(n,e)))):[]}function dT(i,e){return{documents:[by(i,e.path)]}}function pT(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=by(i,a);const c=(function(v){if(v.length!==0)return zy(bn.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(v){if(v.length!==0)return v.map((E=>(function(R){return{field:Ks(R.field),direction:yT(R.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Bh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:a}}function mT(i){let e=uT(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){be(s===1,65062);const E=n.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let c=[];n.where&&(c=(function(C){const R=Uy(C);return R instanceof bn&&gy(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(C){return C.map((R=>(function(G){return new Ea(Ys(G.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(C){let R;return R=typeof C=="object"?C.value:C,Iu(R)?null:R})(n.limit));let y=null;n.startAt&&(y=(function(C){const R=!!C.before,z=C.values||[];return new cu(z,R)})(n.startAt));let v=null;return n.endAt&&(v=(function(C){const R=!C.before,z=C.values||[];return new cu(z,R)})(n.endAt)),DE(e,a,f,c,m,"F",y,v)}function gT(i,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Uy(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ys(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ys(n.unaryFilter.field);return lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ys(n.unaryFilter.field);return lt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ys(n.unaryFilter.field);return lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(i):i.fieldFilter!==void 0?(function(n){return lt.create(Ys(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return bn.create(n.compositeFilter.filters.map((s=>Uy(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(n.compositeFilter.op))})(i):ve(30097,{filter:i})}function yT(i){return iT[i]}function _T(i){return sT[i]}function vT(i){return oT[i]}function Ks(i){return{fieldPath:i.canonicalString()}}function Ys(i){return Pt.fromServerFormat(i.fieldPath)}function zy(i){return i instanceof lt?(function(n){if(n.op==="=="){if(jm(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(bm(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jm(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(bm(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:_T(n.op),value:n.value}}})(i):i instanceof bn?(function(n){const s=n.getFilters().map((a=>zy(a)));return s.length===1?s[0]:{compositeFilter:{op:vT(n.op),filters:s}}})(i):ve(54877,{filter:i})}function wT(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function By(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,s,a,c=Ee.min(),f=Ee.min(),m=kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.yt=e}}function TT(i){const e=mT({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Cn=new ST}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ii.min())}updateCollectionGroup(e,n,s){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class ST{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new gt(He.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new gt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$y=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt($y,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="LruGarbageCollector",AT=1048576;function tg([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class CT{constructor(e){this.Ir=e,this.buffer=new gt(tg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();tg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RT{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(eg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oo(n)?re(eg,"Ignoring IndexedDB error during garbage collection: ",n):await so(n)}await this.Vr(3e5)}))}}class PT{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Tu.ce);const s=new CT(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Zm)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zm):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,c,f,m,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,f=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(s=C,m=Date.now(),this.removeTargets(e,s,n)))).next((C=>(c=C,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((C=>(v=Date.now(),Ws()<=Ve.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${a} in `+(m-f)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${C} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function kT(i,e){return new PT(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.changes=new Zi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&da(s.mutation,a,ln.empty(),Qe.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Re()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Re()){const a=$i();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((c=>{let f=oa();return c.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=$i();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Re())))}populateOverlays(e,n,s){const a=[];return s.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,a){let c=Ar();const f=fa(),m=(function(){return fa()})();return n.forEach(((y,v)=>{const E=s.get(v.key);a.has(v.key)&&(E===void 0||E.mutation instanceof fi)?c=c.insert(v.key,v):E!==void 0?(f.set(v.key,E.mutation.getFieldMask()),da(E.mutation,v,E.mutation.getFieldMask(),Qe.now())):f.set(v.key,ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,E)=>f.set(v,E))),n.forEach(((v,E)=>m.set(v,new NT(E,f.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=fa();let a=new Ze(((f,m)=>f-m)),c=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let E=s.get(y)||ln.empty();E=m.applyToLocalView(v,E),s.set(y,E);const C=(a.get(m.batchId)||Re()).add(y);a=a.insert(m.batchId,C)}))})).next((()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,E=y.value,C=Ay();E.forEach((R=>{if(!c.has(R)){const z=Ny(n.get(R),s.get(R));z!==null&&C.set(R,z),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,v,C))}return q.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(f){return de.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):q.resolve($i());let m=ya,y=c;return f.next((v=>q.forEach(v,((E,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),c.get(E)?q.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{y=y.insert(E,R)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,Re()))).next((E=>({batchId:m,changes:Sy(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next((s=>{let a=oa();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=oa();return this.indexManager.getCollectionParents(e,c).next((m=>q.forEach(m,(y=>{const v=(function(C,R){return new ao(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((E=>{E.forEach(((C,R)=>{f=f.insert(C,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a)))).next((f=>{c.forEach(((y,v)=>{const E=v.getKey();f.get(E)===null&&(f=f.insert(E,bt.newInvalidDocument(E)))}));let m=oa();return f.forEach(((y,v)=>{const E=c.get(y);E!==void 0&&da(E.mutation,v,ln.empty(),Qe.now()),Cu(n,v)&&(m=m.insert(y,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:er(a.createTime)}})(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:TT(a.bundledQuery),readTime:er(a.readTime)}})(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.overlays=new Ze(de.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$i();return q.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,c)=>{this.St(e,n,c)})),q.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),q.resolve()}getOverlaysForCollection(e,n,s){const a=$i(),c=n.length+1,f=new de(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return q.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ze(((v,E)=>v-E));const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let E=c.get(v.largestBatchId);E===null&&(E=$i(),c=c.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=$i(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=a)););return q.resolve(m)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new JE(n,s));let c=this.qr.get(n);c===void 0&&(c=Re(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Qr=new gt(Tt.$r),this.Ur=new gt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Tt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new de(new He([])),s=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.Ur.forEachInRange([s,a],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new He([])),s=new Tt(n,e),a=new Tt(n,e+1);let c=Re();return this.Ur.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Tt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(Tt.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new XE(c,n,s,a);this.mutationQueue.push(f);for(const m of a)this.Zr=this.Zr.add(new Tt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return q.resolve(f)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),c=a<0?0:a;return q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?lf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,a],(f=>{const m=this.Xr(f.Yr);c.push(m)})),q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new gt(Ce);return n.forEach((a=>{const c=new Tt(a,0),f=new Tt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;de.isDocumentKey(c)||(c=c.child(""));const f=new Tt(new de(c),0);let m=new gt(Ce);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.Yr)),!0)}),f),q.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return q.forEach(n.mutations,(a=>{const c=new Tt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Tt(n,0),a=this.Zr.firstAfterOrEqual(s);return q.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.ri=e,this.docs=(function(){return new Ze(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return q.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let s=Ar();return n.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():bt.newInvalidDocument(a))})),q.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Ar();const f=n.path,m=new de(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||hE(cE(E),s)<=0||(a.has(E.key)||Cu(n,E))&&(c=c.insert(E.key,E.mutableCopy()))}return q.resolve(c)}getAllFromCollectionGroup(e,n,s,a){ve(9500)}ii(e,n){return q.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new bT(this)}getSize(e){return q.resolve(this.size)}}class bT extends xT{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.persistence=e,this.si=new Zi((n=>hf(n)),ff),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new vf,this.targetCount=0,this.ai=no.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new no(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),q.waitFor(c).next((()=>a))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return q.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),q.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),q.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return q.resolve(s)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.ui={},this.overlays={},this.ci=new Tu(0),this.li=!1,this.li=!0,this.hi=new OT,this.referenceDelegate=e(this),this.Pi=new jT(this),this.indexManager=new IT,this.remoteDocumentCache=(function(a){return new FT(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new ET(n),this.Ii=new DT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new LT(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const a=new UT(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,n){return q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class UT extends dE{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Ri=new vf,this.Vi=null}static mi(e){return new wf(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),q.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(s=>{const a=de.fromPath(s);return this.gi(e,a).next((c=>{c||n.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class du{constructor(e,n){this.persistence=e,this.pi=new Zi((s=>gE(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=kT(this,n)}static mi(e,n){return new du(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return q.forEach(this.pi,((s,a)=>this.br(e,s,a).next((c=>c?q.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,c.removeEntry(f,Ee.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}br(e,n,s){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return q.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Re(),a=Re();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Ef(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return M0()?8:pE(N0())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new zT;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(Ws()<=Ve.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Ws()<=Ve.DEBUG&&re("QueryEngine","Query:",Qs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Ws()<=Ve.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):q.resolve())}ys(e,n){if($m(n))return q.resolve(null);let s=Zn(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=zh(n,null,"F"),s=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Re(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.Ds(n,m);return this.Cs(n,v,f,y.readTime)?this.ys(e,zh(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,s,a){return $m(n)||a.isEqual(Ee.min())?q.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,a)?q.resolve(null):(Ws()<=Ve.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qs(n)),this.vs(e,f,n,uE(a,ya)).next((m=>m)))}))}Ds(e,n){let s=new gt(Ty(e));return n.forEach(((a,c)=>{Cu(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return Ws()<=Ve.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.ps.getDocumentsMatchingQuery(e,n,ii.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="LocalStore",$T=3e8;class qT{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ze(Ce),this.xs=new Zi((c=>hf(c)),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function HT(i,e,n,s){return new qT(i,e,n,s)}async function Hy(i,e){const n=Te(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let y=Re();for(const v of a){f.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of c){m.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return n.localDocuments.getDocuments(s,y).next((v=>({Ls:v,removedBatchIds:f,addedBatchIds:m})))}))}))}function GT(i,e){const n=Te(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,E){const C=v.batch,R=C.keys();let z=q.resolve();return R.forEach((G=>{z=z.next((()=>E.getEntry(y,G))).next(($=>{const F=v.docVersions.get(G);be(F!==null,48541),$.version.compareTo(F)<0&&(C.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(y,C)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=Re();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function Gy(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function WT(i,e){const n=Te(i),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const m=[];e.targetChanges.forEach(((E,C)=>{const R=a.get(C);if(!R)return;m.push(n.Pi.removeMatchingKeys(c,E.removedDocuments,C).next((()=>n.Pi.addMatchingKeys(c,E.addedDocuments,C))));let z=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?z=z.withResumeToken(kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):E.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(E.resumeToken,s)),a=a.insert(C,z),(function($,F,pe){return $.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=$T?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(R,z,E)&&m.push(n.Pi.updateTargetData(c,z))}));let y=Ar(),v=Re();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,E))})),m.push(QT(c,f,e.documentUpdates).next((E=>{y=E.ks,v=E.qs}))),!s.isEqual(Ee.min())){const E=n.Pi.getLastRemoteSnapshotVersion(c).next((C=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(E)}return q.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=a,c)))}function QT(i,e,n){let s=Re(),a=Re();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=Ar();return n.forEach(((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Ee.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):re(Tf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{ks:f,qs:a}}))}function KT(i,e){const n=Te(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=lf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function YT(i,e){const n=Te(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((c=>c?(a=c,q.resolve(a)):n.Pi.allocateTargetId(s).next((f=>(a=new Xr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Gh(i,e,n){const s=Te(i),a=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!oo(f))throw f;re(Tf,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function ng(i,e,n){const s=Te(i);let a=Ee.min(),c=Re();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,v,E){const C=Te(y),R=C.xs.get(E);return R!==void 0?q.resolve(C.Ms.get(R)):C.Pi.getTargetData(v,E)})(s,f,Zn(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?a:Ee.min(),n?c:Re()))).next((m=>(XT(s,OE(e),m),{documents:m,Qs:c})))))}function XT(i,e,n){let s=i.Os.get(e)||Ee.min();n.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class rg{constructor(){this.activeTargetIds=zE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JT{constructor(){this.Mo=new rg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="ConnectivityMonitor";class sg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(ig,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(ig,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function Wh(){return Jl===null?Jl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="RestConnection",e1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===lu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,c){const f=Wh(),m=this.zo(e,n.toUriEncodedString());re(Ih,`Sending RPC '${e}' ${f}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,a,c);const{host:v}=new URL(m),E=nf(v);return this.Jo(e,m,y,s,E).then((C=>(re(Ih,`Received RPC '${e}' ${f}: `,C),C)),(C=>{throw Js(Ih,`RPC '${e}' ${f} failed with error: `,C,"url: ",m,"request:",s),C}))}Ho(e,n,s,a,c,f){return this.Go(e,n,s,a,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+io})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}zo(e,n){const s=e1[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class r1 extends t1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Wh();return new Promise(((m,y)=>{const v=new Kg;v.setWithCredentials(!0),v.listenOnce(Yg.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Zl.NO_ERROR:const C=v.getResponseJson();re(Lt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(C)),m(C);break;case Zl.TIMEOUT:re(Lt,`RPC '${e}' ${f} timed out`),y(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const R=v.getStatus();if(re(Lt,`RPC '${e}' ${f} failed with status:`,R,"response text:",v.getResponseText()),R>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const G=z?.error;if(G&&G.status&&G.message){const $=(function(pe){const me=pe.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(me)>=0?me:B.UNKNOWN})(G.status);y(new ee($,G.message))}else y(new ee(B.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ee(B.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{re(Lt,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(a);re(Lt,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",E,s,15)}))}T_(e,n,s){const a=Wh(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Zg(),m=Jg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const E=c.join("");re(Lt,`Creating RPC '${e}' stream ${a}: ${E}`,y);const C=f.createWebChannel(E,y);this.I_(C);let R=!1,z=!1;const G=new n1({Yo:F=>{z?re(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(R||(re(Lt,`Opening RPC '${e}' stream ${a} transport.`),C.open(),R=!0),re(Lt,`RPC '${e}' stream ${a} sending:`,F),C.send(F))},Zo:()=>C.close()}),$=(F,pe,me)=>{F.listen(pe,(fe=>{try{me(fe)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return $(C,sa.EventType.OPEN,(()=>{z||(re(Lt,`RPC '${e}' stream ${a} transport opened.`),G.o_())})),$(C,sa.EventType.CLOSE,(()=>{z||(z=!0,re(Lt,`RPC '${e}' stream ${a} transport closed`),G.a_(),this.E_(C))})),$(C,sa.EventType.ERROR,(F=>{z||(z=!0,Js(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),G.a_(new ee(B.UNAVAILABLE,"The operation could not be completed")))})),$(C,sa.EventType.MESSAGE,(F=>{if(!z){const pe=F.data[0];be(!!pe,16349);const me=pe,fe=me?.error||me[0]?.error;if(fe){re(Lt,`RPC '${e}' stream ${a} received error:`,fe);const ce=fe.status;let ie=(function(I){const A=at[I];if(A!==void 0)return Dy(A)})(ce),le=fe.message;ie===void 0&&(ie=B.INTERNAL,le="Unknown error status: "+ce+" with message "+fe.message),z=!0,G.a_(new ee(ie,le)),C.close()}else re(Lt,`RPC '${e}' stream ${a} received:`,pe),G.u_(pe)}})),$(m,Xg.STAT_EVENT,(F=>{F.stat===Mh.PROXY?re(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===Mh.NOPROXY&&re(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(i){return new aT(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,s=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="PersistentStream";class Qy{constructor(e,n,s,a,c,f,m,y){this.Mi=e,this.S_=s,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new ee(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(og,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(og,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class i1 extends Qy{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cT(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ee.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ee.min():f.readTime?er(f.readTime):Ee.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Hh(this.serializer),n.addTarget=(function(c,f){let m;const y=f.target;if(m=jh(y)?{documents:dT(c,y)}:{query:pT(c,y).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Ly(c,f.resumeToken);const v=Bh(c,f.expectedCount);v!==null&&(m.expectedCount=v)}else if(f.snapshotVersion.compareTo(Ee.min())>0){m.readTime=fu(c,f.snapshotVersion.toTimestamp());const v=Bh(c,f.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=gT(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.q_(n)}}class s1 extends Qy{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fT(e.writeResults,e.commitTime),s=er(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Hh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>hT(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{}class a1 extends o1{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,$h(n,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ee(B.UNKNOWN,c.toString())}))}Ho(e,n,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,$h(n,s),a,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ee(B.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class l1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class u1{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{es(this)&&(re(Qi,"Restarting streams for network reachability change."),await(async function(y){const v=Te(y);v.Ea.add(4),await ka(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Nu(v)})(this))}))})),this.Ra=new l1(s,a)}}async function Nu(i){if(es(i))for(const e of i.da)await e(!0)}async function ka(i){for(const e of i.da)await e(!1)}function Ky(i,e){const n=Te(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cf(n)?Af(n):lo(n).O_()&&Sf(n,e))}function If(i,e){const n=Te(i),s=lo(n);n.Ia.delete(e),s.O_()&&Yy(n,e),n.Ia.size===0&&(s.O_()?s.L_():es(n)&&n.Ra.set("Unknown"))}function Sf(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(i).Y_(e)}function Yy(i,e){i.Va.Ue(e),lo(i).Z_(e)}function Af(i){i.Va=new rT({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lo(i).start(),i.Ra.ua()}function Cf(i){return es(i)&&!lo(i).x_()&&i.Ia.size>0}function es(i){return Te(i).Ea.size===0}function Xy(i){i.Va=void 0}async function c1(i){i.Ra.set("Online")}async function h1(i){i.Ia.forEach(((e,n)=>{Sf(i,e)}))}async function f1(i,e){Xy(i),Cf(i)?(i.Ra.ha(e),Af(i)):i.Ra.set("Unknown")}async function d1(i,e,n){if(i.Ra.set("Online"),e instanceof Oy&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const m of c.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.Ia.delete(m),a.Va.removeTarget(m))})(i,e)}catch(s){re(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pu(i,s)}else if(e instanceof ru?i.Va.Ze(e):e instanceof My?i.Va.st(e):i.Va.tt(e),!n.isEqual(Ee.min()))try{const s=await Gy(i.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=c.Ia.get(v);E&&c.Ia.set(v,E.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,v)=>{const E=c.Ia.get(y);if(!E)return;c.Ia.set(y,E.withResumeToken(kt.EMPTY_BYTE_STRING,E.snapshotVersion)),Yy(c,y);const C=new Xr(E.target,y,v,E.sequenceNumber);Sf(c,C)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){re(Qi,"Failed to raise snapshot:",s),await pu(i,s)}}async function pu(i,e,n){if(!oo(e))throw e;i.Ea.add(1),await ka(i),i.Ra.set("Offline"),n||(n=()=>Gy(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{re(Qi,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Nu(i)}))}function Jy(i,e){return e().catch((n=>pu(i,n,e)))}async function Vu(i){const e=Te(i),n=li(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lf;for(;p1(e);)try{const a=await KT(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,m1(e,a)}catch(a){await pu(e,a)}Zy(e)&&e_(e)}function p1(i){return es(i)&&i.Ta.length<10}function m1(i,e){i.Ta.push(e);const n=li(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Zy(i){return es(i)&&!li(i).x_()&&i.Ta.length>0}function e_(i){li(i).start()}async function g1(i){li(i).ra()}async function y1(i){const e=li(i);for(const n of i.Ta)e.ea(n.mutations)}async function _1(i,e,n){const s=i.Ta.shift(),a=gf.from(s,e,n);await Jy(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Vu(i)}async function v1(i,e){e&&li(i).X_&&await(async function(s,a){if((function(f){return eT(f)&&f!==B.ABORTED})(a.code)){const c=s.Ta.shift();li(s).B_(),await Jy(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Vu(s)}})(i,e),Zy(i)&&e_(i)}async function ag(i,e){const n=Te(i);n.asyncQueue.verifyOperationInProgress(),re(Qi,"RemoteStore received new credentials");const s=es(n);n.Ea.add(3),await ka(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nu(n)}async function w1(i,e){const n=Te(i);e?(n.Ea.delete(2),await Nu(n)):e||(n.Ea.add(2),await ka(n),n.Ra.set("Unknown"))}function lo(i){return i.ma||(i.ma=(function(n,s,a){const c=Te(n);return c.sa(),new i1(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:c1.bind(null,i),t_:h1.bind(null,i),r_:f1.bind(null,i),H_:d1.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Cf(i)?Af(i):i.Ra.set("Unknown")):(await i.ma.stop(),Xy(i))}))),i.ma}function li(i){return i.fa||(i.fa=(function(n,s,a){const c=Te(n);return c.sa(),new s1(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:g1.bind(null,i),r_:v1.bind(null,i),ta:y1.bind(null,i),na:_1.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Vu(i)):(await i.fa.stop(),i.Ta.length>0&&(re(Qi,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,m=new Rf(e,n,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pf(i,e){if(Sr("AsyncQueue",`${e}: ${i}`),oo(i))return new ee(B.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{static emptySet(e){return new Xs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||de.comparator(n.key,s.key):(n,s)=>de.comparator(n.key,s.key),this.keyedMap=oa(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Xs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.ga=new Ze(de.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class ro{constructor(e,n,s,a,c,f,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new ro(e,n,Xs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class T1{constructor(){this.queries=ug(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Te(n),c=a.queries;a.queries=ug(),c.forEach(((f,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function ug(){return new Zi((i=>Ey(i)),Au)}async function t_(i,e){const n=Te(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.ba()&&e.Da()&&(s=2):(c=new E1,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(a,!0);break;case 1:c.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const m=Pf(f,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&kf(n)}async function n_(i,e){const n=Te(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function I1(i,e){const n=Te(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(a)&&(s=!0);f.wa=a}}s&&kf(n)}function S1(i,e,n){const s=Te(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function kf(i){i.Ca.forEach((e=>{e.next()}))}var Qh,cg;(cg=Qh||(Qh={})).Ma="default",cg.Cache="cache";class r_{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.key=e}}class s_{constructor(e){this.key=e}}class A1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=Ty(e),this.tu=new Xs(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new lg,a=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((E,C)=>{const R=a.get(E),z=Cu(this.query,C)?C:null,G=!!R&&this.mutatedKeys.has(R.key),$=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let F=!1;R&&z?R.data.isEqual(z.data)?G!==$&&(s.track({type:3,doc:z}),F=!0):this.su(R,z)||(s.track({type:2,doc:z}),F=!0,(y&&this.eu(z,y)>0||v&&this.eu(z,v)<0)&&(m=!0)):!R&&z?(s.track({type:0,doc:z}),F=!0):R&&!z&&(s.track({type:1,doc:R}),F=!0,(y||v)&&(m=!0)),F&&(z?(f=f.add(z),c=$?c.add(E):c.delete(E)):(f=f.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),c=c.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,C)=>(function(z,G){const $=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:F})}};return $(z)-$(G)})(E.type,C.type)||this.eu(E.doc,C.doc))),this.ou(s),a=a??!1;const m=n&&!a?this._u():[],y=this.Xa.size===0&&this.current&&!a?1:0,v=y!==this.Za;return this.Za=y,f.length!==0||v?{snapshot:new ro(this.query,e.tu,c,f,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new s_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new i_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xf="SyncEngine";class C1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class R1{constructor(e){this.key=e,this.hu=!1}}class P1{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Zi((m=>Ey(m)),Au),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(de.comparator),this.Au=new Map,this.Ru=new vf,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k1(i,e,n=!0){const s=h_(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await o_(s,e,n,!0),a}async function x1(i,e){const n=h_(i);await o_(n,e,!0,!1)}async function o_(i,e,n,s){const a=await YT(i.localStore,Zn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await N1(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&Ky(i.remoteStore,a),m}async function N1(i,e,n,s,a){i.pu=(C,R,z)=>(async function($,F,pe,me){let fe=F.view.ru(pe);fe.Cs&&(fe=await ng($.localStore,F.query,!1).then((({documents:N})=>F.view.ru(N,fe))));const ce=me&&me.targetChanges.get(F.targetId),ie=me&&me.targetMismatches.get(F.targetId)!=null,le=F.view.applyChanges(fe,$.isPrimaryClient,ce,ie);return fg($,F.targetId,le.au),le.snapshot})(i,C,R,z);const c=await ng(i.localStore,e,!0),f=new A1(e,c.Qs),m=f.ru(c.documents),y=Pa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(m,i.isPrimaryClient,y);fg(i,n,v.au);const E=new C1(e,n,f);return i.Tu.set(e,E),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),v.snapshot}async function V1(i,e,n){const s=Te(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((f=>!Au(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Gh(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&If(s.remoteStore,a.targetId),Kh(s,a.targetId)})).catch(so)):(Kh(s,a.targetId),await Gh(s.localStore,a.targetId,!0))}async function D1(i,e){const n=Te(i),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),If(n.remoteStore,s.targetId))}async function M1(i,e,n){const s=z1(i);try{const a=await(function(f,m){const y=Te(f),v=Qe.now(),E=m.reduce(((z,G)=>z.add(G.key)),Re());let C,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let G=Ar(),$=Re();return y.Ns.getEntries(z,E).next((F=>{G=F,G.forEach(((pe,me)=>{me.isValidDocument()||($=$.add(pe))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,G))).next((F=>{C=F;const pe=[];for(const me of m){const fe=KE(me,C.get(me.key).overlayedDocument);fe!=null&&pe.push(new fi(me.key,fe,dy(fe.value.mapValue),Fn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,pe,m)})).next((F=>{R=F;const pe=F.applyToLocalDocumentSet(C,$);return y.documentOverlayCache.saveOverlays(z,F.batchId,pe)}))})).then((()=>({batchId:R.batchId,changes:Sy(C)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,m,y){let v=f.Vu[f.currentUser.toKey()];v||(v=new Ze(Ce)),v=v.insert(m,y),f.Vu[f.currentUser.toKey()]=v})(s,a.batchId,n),await xa(s,a.changes),await Vu(s.remoteStore)}catch(a){const c=Pf(a,"Failed to persist write");n.reject(c)}}async function a_(i,e){const n=Te(i);try{const s=await WT(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=n.Au.get(c);f&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?be(f.hu,14607):a.removedDocuments.size>0&&(be(f.hu,42227),f.hu=!1))})),await xa(n,s,e)}catch(s){await so(s)}}function hg(i,e,n){const s=Te(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(f,m){const y=Te(f);y.onlineState=m;let v=!1;y.queries.forEach(((E,C)=>{for(const R of C.Sa)R.va(m)&&(v=!0)})),v&&kf(y)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O1(i,e,n){const s=Te(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),c=a&&a.key;if(c){let f=new Ze(de.comparator);f=f.insert(c,bt.newNoDocument(c,Ee.min()));const m=Re().add(c),y=new ku(Ee.min(),new Map,new Ze(Ce),f,m);await a_(s,y),s.du=s.du.remove(c),s.Au.delete(e),Nf(s)}else await Gh(s.localStore,e,!1).then((()=>Kh(s,e,n))).catch(so)}async function L1(i,e){const n=Te(i),s=e.batch.batchId;try{const a=await GT(n.localStore,e);u_(n,s,null),l_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xa(n,a)}catch(a){await so(a)}}async function F1(i,e,n){const s=Te(i);try{const a=await(function(f,m){const y=Te(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,m).next((C=>(be(C!==null,37113),E=C.keys(),y.mutationQueue.removeMutationBatch(v,C)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(s.localStore,e);u_(s,e,n),l_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await xa(s,a)}catch(a){await so(a)}}function l_(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function u_(i,e,n){const s=Te(i);let a=s.Vu[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Kh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||c_(i,s)}))}function c_(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(If(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Nf(i))}function fg(i,e,n){for(const s of n)s instanceof i_?(i.Ru.addReference(s.key,e),b1(i,s)):s instanceof s_?(re(xf,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||c_(i,s.key)):ve(19791,{wu:s})}function b1(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(re(xf,"New document in limbo: "+n),i.Eu.add(s),Nf(i))}function Nf(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new de(He.fromString(e)),s=i.fu.next();i.Au.set(s,new R1(n)),i.du=i.du.insert(n,s),Ky(i.remoteStore,new Xr(Zn(df(n.path)),s,"TargetPurposeLimboResolution",Tu.ce))}}async function xa(i,e,n){const s=Te(i),a=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{f.push(s.pu(y,e,n).then((v=>{if((v||n)&&s.isPrimaryClient){const E=v?!v.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){a.push(v);const E=Ef.As(y.targetId,v);c.push(E)}})))})),await Promise.all(f),s.Pu.H_(a),await(async function(y,v){const E=Te(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>q.forEach(v,(R=>q.forEach(R.Es,(z=>E.persistence.referenceDelegate.addReference(C,R.targetId,z))).next((()=>q.forEach(R.ds,(z=>E.persistence.referenceDelegate.removeReference(C,R.targetId,z)))))))))}catch(C){if(!oo(C))throw C;re(Tf,"Failed to update sequence numbers: "+C)}for(const C of v){const R=C.targetId;if(!C.fromCache){const z=E.Ms.get(R),G=z.snapshotVersion,$=z.withLastLimboFreeSnapshotVersion(G);E.Ms=E.Ms.insert(R,$)}}})(s.localStore,c))}async function j1(i,e){const n=Te(i);if(!n.currentUser.isEqual(e)){re(xf,"User change. New user:",e.toKey());const s=await Hy(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((y=>{y.reject(new ee(B.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xa(n,s.Ls)}}function U1(i,e){const n=Te(i),s=n.Au.get(e);if(s&&s.hu)return Re().add(s.key);{let a=Re();const c=n.Iu.get(e);if(!c)return a;for(const f of c){const m=n.Tu.get(f);a=a.unionWith(m.view.nu)}return a}}function h_(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O1.bind(null,e),e.Pu.H_=I1.bind(null,e.eventManager),e.Pu.yu=S1.bind(null,e.eventManager),e}function z1(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HT(this.persistence,new BT,e.initialUser,this.serializer)}Cu(e){return new qy(wf.mi,this.serializer)}Du(e){return new JT}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mu.provider={build:()=>new mu};class B1 extends mu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){be(this.persistence.referenceDelegate instanceof du,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new RT(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new qy((s=>du.mi(s,n)),this.serializer)}}class Yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>hg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=j1.bind(null,this.syncEngine),await w1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new T1})()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),s=(function(c){return new r1(c)})(e.databaseInfo);return(function(c,f,m,y){return new a1(c,f,m,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,c,f,m){return new u1(s,a,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>hg(this.syncEngine,n,0)),(function(){return sg.v()?new sg:new ZT})())}createSyncEngine(e,n){return(function(a,c,f,m,y,v,E){const C=new P1(a,c,f,m,y,v);return E&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Te(n);re(Qi,"RemoteStore shutting down."),s.Ea.add(5),await ka(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yh.provider={build:()=>new Yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class $1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{re(ui,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(re(ui,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Pf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ah(i,e){i.asyncQueue.verifyOperationInProgress(),re(ui,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Hy(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function dg(i,e){i.asyncQueue.verifyOperationInProgress();const n=await q1(i);re(ui,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>ag(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>ag(e.remoteStore,a))),i._onlineComponents=e}async function q1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(ui,"Using user provided OfflineComponentProvider");try{await Ah(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===B.FAILED_PRECONDITION||a.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await Ah(i,new mu)}}else re(ui,"Using default OfflineComponentProvider"),await Ah(i,new B1(void 0));return i._offlineComponents}async function d_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(ui,"Using user provided OnlineComponentProvider"),await dg(i,i._uninitializedComponentsProvider._online)):(re(ui,"Using default OnlineComponentProvider"),await dg(i,new Yh))),i._onlineComponents}function H1(i){return d_(i).then((e=>e.syncEngine))}async function Xh(i){const e=await d_(i),n=e.eventManager;return n.onListen=k1.bind(null,e.syncEngine),n.onUnlisten=V1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D1.bind(null,e.syncEngine),n}function G1(i,e,n={}){const s=new ti;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,y,v){const E=new f_({next:R=>{E.Nu(),f.enqueueAndForget((()=>n_(c,C))),R.fromCache&&y.source==="server"?v.reject(new ee(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),C=new r_(m,E,{includeMetadataChanges:!0,qa:!0});return t_(c,C)})(await Xh(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="firestore.googleapis.com",mg=!0;class gg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m_,this.ssl=mg}else this.host=e.host,this.ssl=e.ssl??mg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$y;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AT)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Du{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Jw;switch(s.type){case"firstParty":return new nE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=pg.get(n);s&&(re("ComponentProvider","Removing Datastore"),pg.delete(n),s.terminate())})(this),Promise.resolve()}}function W1(i,e,n,s={}){i=Jn(i,Du);const a=nf(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;a&&(C0(`https://${m}`),x0("Firestore",!0)),c.host!==m_&&c.host!==m&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:a,emulatorOptions:s};if(!ma(y,f)&&(i._setSettings(y),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=Ft.MOCK_USER;else{v=R0(s.mockUserToken,i._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ft(C)}i._authCredentials=new Zw(new ty(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class ct{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ca(n,ct._jsonSchema))return new ct(e,s||null,new de(He.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:ut("string",ct._jsonSchemaVersion),referencePath:ut("string")};class ni extends di{constructor(e,n,s){super(e,n,df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new de(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function gu(i,e,...n){if(i=En(i),ny("collection","path",e),i instanceof Du){const s=He.fromString(e,...n);return km(s),new ni(i,null,s)}{if(!(i instanceof ct||i instanceof ni))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return km(s),new ni(i.firestore,null,s)}}function Mu(i,e,...n){if(i=En(i),arguments.length===1&&(e=af.newId()),ny("doc","path",e),i instanceof Du){const s=He.fromString(e,...n);return Pm(s),new ct(i,null,new de(s))}{if(!(i instanceof ct||i instanceof ni))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return Pm(s),new ct(i.firestore,i instanceof ni?i.converter:null,new de(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="AsyncQueue";class _g{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wy(this,"async_queue_retry"),this._c=()=>{const s=Sh();s&&re(yg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oo(e))throw e;re(yg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Sr("INTERNAL UNHANDLED ERROR: ",vg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Rf.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&ve(47125,{Pc:vg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vg(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}class Ki extends Du{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new _g,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _g(e),this._firestoreClient=void 0,await e}}}function Q1(i,e){const n=typeof i=="object"?i:Hg(),s=typeof i=="string"?i:lu,a=Aa(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=S0("firestore");c&&W1(a,...c)}return a}function Vf(i){if(i._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||K1(i),i._firestoreClient}function K1(i){const e=i._freezeSettings(),n=(function(a,c,f,m){return new vE(a,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,p_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new $1(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(kt.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wn(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ca(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:ut("string",wn._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tr._jsonSchemaVersion}}static fromJSON(e){if(Ca(e,tr._jsonSchema))return new tr(e.latitude,e.longitude)}}tr._jsonSchemaVersion="firestore/geoPoint/1.0",tr._jsonSchema={type:ut("string",tr._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ca(e,nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new nr(e.vectorValues);throw new ee(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nr._jsonSchemaVersion="firestore/vectorValue/1.0",nr._jsonSchema={type:ut("string",nr._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=/^__.*__$/;class X1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ra(e,this.data,n,this.fieldTransforms)}}class g_{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:i})}}class Df{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Df({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(y_(this.Ac)&&Y1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||xu(e)}Cc(e,n,s,a=!1){return new Df({Ac:e,methodName:n,Dc:s,path:Pt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mf(i){const e=i._freezeSettings(),n=xu(i._databaseId);return new J1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Z1(i,e,n,s,a,c={}){const f=i.Cc(c.merge||c.mergeFields?2:0,e,n,a);Lf("Data must be an object, but it was:",f,s);const m=__(s,f);let y,v;if(c.merge)y=new ln(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const E=[];for(const C of c.mergeFields){const R=Jh(e,C,n);if(!f.contains(R))throw new ee(B.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);w_(E,R)||E.push(R)}y=new ln(E),v=f.fieldTransforms.filter((C=>y.covers(C.field)))}else y=null,v=f.fieldTransforms;return new X1(new Jt(m),y,v)}class Fu extends Lu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}class Of extends Lu{_toFieldTransform(e){return new HE(e.path,new Ta)}isEqual(e){return e instanceof Of}}function eI(i,e,n,s){const a=i.Cc(1,e,n);Lf("Data must be an object, but it was:",a,s);const c=[],f=Jt.empty();hi(s,((y,v)=>{const E=Ff(e,y,n);v=En(v);const C=a.yc(E);if(v instanceof Fu)c.push(E);else{const R=Na(v,C);R!=null&&(c.push(E),f.set(E,R))}}));const m=new ln(c);return new g_(f,m,a.fieldTransforms)}function tI(i,e,n,s,a,c){const f=i.Cc(1,e,n),m=[Jh(e,s,n)],y=[a];if(c.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)m.push(Jh(e,c[R])),y.push(c[R+1]);const v=[],E=Jt.empty();for(let R=m.length-1;R>=0;--R)if(!w_(v,m[R])){const z=m[R];let G=y[R];G=En(G);const $=f.yc(z);if(G instanceof Fu)v.push(z);else{const F=Na(G,$);F!=null&&(v.push(z),E.set(z,F))}}const C=new ln(v);return new g_(E,C,f.fieldTransforms)}function nI(i,e,n,s=!1){return Na(n,i.Cc(s?4:3,e))}function Na(i,e){if(v_(i=En(i)))return Lf("Unsupported field value:",e,i),__(i,e);if(i instanceof Lu)return(function(s,a){if(!y_(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const m of s){let y=Na(m,a.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=En(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Qe.fromDate(s);return{timestampValue:fu(a.serializer,c)}}if(s instanceof Qe){const c=new Qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fu(a.serializer,c)}}if(s instanceof tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:Ly(a.serializer,s._byteString)};if(s instanceof ct){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:_f(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof nr)return(function(f,m){return{mapValue:{fields:{[hy]:{stringValue:fy},[uu]:{arrayValue:{values:f.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return pf(m.serializer,v)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Eu(s)}`)})(i,e)}function __(i,e){const n={};return sy(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(i,((s,a)=>{const c=Na(a,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function v_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qe||i instanceof tr||i instanceof wn||i instanceof ct||i instanceof Lu||i instanceof nr)}function Lf(i,e,n){if(!v_(n)||!ry(n)){const s=Eu(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Jh(i,e,n){if((e=En(e))instanceof Ou)return e._internalPath;if(typeof e=="string")return Ff(i,e);throw yu("Field path arguments must be of type string or ",i,!1,void 0,n)}const rI=new RegExp("[~\\*/\\[\\]]");function Ff(i,e,n){if(e.search(rI)>=0)throw yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ou(...e.split("."))._internalPath}catch{throw yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function yu(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new ee(B.INVALID_ARGUMENT,m+i+y)}function w_(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iI extends E_{data(){return super.data()}}function bf(i,e){return typeof e=="string"?Ff(i,e):e instanceof Ou?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ee(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class I_ extends jf{}function sI(i,e,...n){let s=[];e instanceof jf&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((y=>y instanceof zf)).length,m=c.filter((y=>y instanceof Uf)).length;if(f>1||f>0&&m>0)throw new ee(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class Uf extends I_{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Uf(e,n,s)}_apply(e){const n=this._parse(e);return S_(e._query,n),new di(e.firestore,e.converter,Uh(e._query,n))}_parse(e){const n=Mf(e.firestore);return(function(c,f,m,y,v,E,C){let R;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ee(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Tg(C,E);const G=[];for(const $ of C)G.push(Eg(y,c,$));R={arrayValue:{values:G}}}else R=Eg(y,c,C)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Tg(C,E),R=nI(m,f,C,E==="in"||E==="not-in");return lt.create(v,E,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class zf extends jf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zf(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let f=a;const m=c.getFlattenedFilters();for(const y of m)S_(f,y),f=Uh(f,y)})(e._query,n),new di(e.firestore,e.converter,Uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bf extends I_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bf(e,n)}_apply(e){const n=(function(a,c,f){if(a.startAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ea(c,f)})(e._query,this._field,this._direction);return new di(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new ao(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function oI(i,e="asc"){const n=e,s=bf("orderBy",i);return Bf._create(s,n)}function Eg(i,e,n){if(typeof(n=En(n))=="string"){if(n==="")throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wy(e)&&n.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!de.isDocumentKey(s))throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fm(i,new de(s))}if(n instanceof ct)return Fm(i,n._key);throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eu(n)}.`)}function Tg(i,e){if(!Array.isArray(i)||i.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S_(i,e){const n=(function(a,c){for(const f of a)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aI{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return hi(e,((a,c)=>{s[a]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[uu].arrayValue?.values?.map((s=>it(s.doubleValue)));return new nr(n)}convertGeoPoint(e){return new tr(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Su(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(_a(e));default:return null}}convertTimestamp(e){const n=si(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);be(By(s),9688,{name:e});const a=new va(s.get(1),s.get(3)),c=new de(s.popFirst(5));return a.isEqual(n)||Sr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class la{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hi extends E_{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(bf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:ut("string",Hi._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class iu extends Hi{data(e={}){return super.data(e)}}class Gi{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new la(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new iu(this._firestore,this._userDataWriter,s.key,s,new la(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((m=>{const y=new iu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new la(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new iu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new la(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,E=-1;return m.type!==0&&(v=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:uI(m.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}Gi._jsonSchemaVersion="firestore/querySnapshot/1.0",Gi._jsonSchema={type:ut("string",Gi._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class $f extends aI{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function A_(i){i=Jn(i,di);const e=Jn(i.firestore,Ki),n=Vf(e),s=new $f(e);return T_(i._query),G1(n,i._query).then((a=>new Gi(e,s,i,a)))}function C_(i,e,n,...s){i=Jn(i,ct);const a=Jn(i.firestore,Ki),c=Mf(a);let f;return f=typeof(e=En(e))=="string"||e instanceof Ou?tI(c,"updateDoc",i._key,e,n,s):eI(c,"updateDoc",i._key,e),qf(a,[f.toMutation(i._key,Fn.exists(!0))])}function cI(i){return qf(Jn(i.firestore,Ki),[new mf(i._key,Fn.none())])}function hI(i,e){const n=Jn(i.firestore,Ki),s=Mu(i),a=lI(i.converter,e);return qf(n,[Z1(Mf(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Fn.exists(!1))]).then((()=>s))}function fI(i,...e){i=En(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wg(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wg(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,f,m;if(i instanceof ct)f=Jn(i.firestore,Ki),m=df(i._key.path),c={next:y=>{e[s]&&e[s](dI(f,i,y))},error:e[s+1],complete:e[s+2]};else{const y=Jn(i,di);f=Jn(y.firestore,Ki),m=y._query;const v=new $f(f);c={next:E=>{e[s]&&e[s](new Gi(f,v,y,E))},error:e[s+1],complete:e[s+2]},T_(i._query)}return(function(v,E,C,R){const z=new f_(R),G=new r_(E,z,C);return v.asyncQueue.enqueueAndForget((async()=>t_(await Xh(v),G))),()=>{z.Nu(),v.asyncQueue.enqueueAndForget((async()=>n_(await Xh(v),G)))}})(Vf(f),m,a,c)}function qf(i,e){return(function(s,a){const c=new ti;return s.asyncQueue.enqueueAndForget((async()=>M1(await H1(s),a,c))),c.promise})(Vf(i),e)}function dI(i,e,n){const s=n.docs.get(e._key),a=new $f(i);return new Hi(i,a,e._key,s,new la(n.hasPendingWrites,n.fromCache),e.converter)}function pI(){return new Of("serverTimestamp")}(function(e,n=!0){(function(a){io=a})(zw),ri(new Tr("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Ki(new eE(s.getProvider("auth-internal")),new rE(f,s.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(v.options.projectId,E)})(f,a),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Xn(Sm,Am,e),Xn(Sm,Am,"esm2020")})();var mI="firebase",gI="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(mI,gI,"app");const R_="@firebase/installations",Hf="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=1e4,k_=`w:${Hf}`,x_="FIS_v2",yI="https://firebaseinstallations.googleapis.com/v1",_I=3600*1e3,vI="installations",wI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Yi=new wu(vI,wI,EI);function N_(i){return i instanceof ci&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_({projectId:i}){return`${yI}/projects/${i}/installations`}function D_(i){return{token:i.token,requestStatus:2,expiresIn:II(i.expiresIn),creationTime:Date.now()}}async function M_(i,e){const s=(await e.json()).error;return Yi.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function O_({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function TI(i,{refreshToken:e}){const n=O_(i);return n.append("Authorization",SI(e)),n}async function L_(i){const e=await i();return e.status>=500&&e.status<600?i():e}function II(i){return Number(i.replace("s","000"))}function SI(i){return`${x_} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=V_(i),a=O_(i),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&a.append("x-firebase-client",v)}const f={fid:n,authVersion:x_,appId:i.appId,sdkVersion:k_},m={method:"POST",headers:a,body:JSON.stringify(f)},y=await L_(()=>fetch(s,m));if(y.ok){const v=await y.json();return{fid:v.fid||n,registrationStatus:2,refreshToken:v.refreshToken,authToken:D_(v.authToken)}}else throw await M_("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=/^[cdef][\w-]{21}$/,Zh="";function PI(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=kI(i);return RI.test(n)?n:Zh}catch{return Zh}}function kI(i){return CI(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function j_(i,e){const n=bu(i);U_(n,e),xI(n,e)}function U_(i,e){const n=b_.get(i);if(n)for(const s of n)s(e)}function xI(i,e){const n=NI();n&&n.postMessage({key:i,fid:e}),VI()}let qi=null;function NI(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=i=>{U_(i.data.key,i.data.fid)}),qi}function VI(){b_.size===0&&qi&&(qi.close(),qi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebase-installations-database",MI=1,Xi="firebase-installations-store";let Ch=null;function Gf(){return Ch||(Ch=$g(DI,MI,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Xi)}}})),Ch}async function _u(i,e){const n=bu(i),a=(await Gf()).transaction(Xi,"readwrite"),c=a.objectStore(Xi),f=await c.get(n);return await c.put(e,n),await a.done,(!f||f.fid!==e.fid)&&j_(i,e.fid),e}async function z_(i){const e=bu(i),s=(await Gf()).transaction(Xi,"readwrite");await s.objectStore(Xi).delete(e),await s.done}async function ju(i,e){const n=bu(i),a=(await Gf()).transaction(Xi,"readwrite"),c=a.objectStore(Xi),f=await c.get(n),m=e(f);return m===void 0?await c.delete(n):await c.put(m,n),await a.done,m&&(!f||f.fid!==m.fid)&&j_(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wf(i){let e;const n=await ju(i.appConfig,s=>{const a=OI(s),c=LI(i,a);return e=c.registrationPromise,c.installationEntry});return n.fid===Zh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function OI(i){const e=i||{fid:PI(),registrationStatus:0};return B_(e)}function LI(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Yi.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=FI(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:bI(i)}:{installationEntry:e}}async function FI(i,e){try{const n=await AI(i,e);return _u(i.appConfig,n)}catch(n){throw N_(n)&&n.customData.serverCode===409?await z_(i.appConfig):await _u(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function bI(i){let e=await Ig(i.appConfig);for(;e.registrationStatus===1;)await F_(100),e=await Ig(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Wf(i);return s||n}return e}function Ig(i){return ju(i,e=>{if(!e)throw Yi.create("installation-not-found");return B_(e)})}function B_(i){return jI(i)?{fid:i.fid,registrationStatus:0}:i}function jI(i){return i.registrationStatus===1&&i.registrationTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI({appConfig:i,heartbeatServiceProvider:e},n){const s=zI(i,n),a=TI(i,n),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&a.append("x-firebase-client",v)}const f={installation:{sdkVersion:k_,appId:i.appId}},m={method:"POST",headers:a,body:JSON.stringify(f)},y=await L_(()=>fetch(s,m));if(y.ok){const v=await y.json();return D_(v)}else throw await M_("Generate Auth Token",y)}function zI(i,{fid:e}){return`${V_(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(i,e=!1){let n;const s=await ju(i.appConfig,c=>{if(!$_(c))throw Yi.create("not-registered");const f=c.authToken;if(!e&&qI(f))return c;if(f.requestStatus===1)return n=BI(i,e),c;{if(!navigator.onLine)throw Yi.create("app-offline");const m=GI(c);return n=$I(i,m),m}});return n?await n:s.authToken}async function BI(i,e){let n=await Sg(i.appConfig);for(;n.authToken.requestStatus===1;)await F_(100),n=await Sg(i.appConfig);const s=n.authToken;return s.requestStatus===0?Qf(i,e):s}function Sg(i){return ju(i,e=>{if(!$_(e))throw Yi.create("not-registered");const n=e.authToken;return WI(n)?{...e,authToken:{requestStatus:0}}:e})}async function $I(i,e){try{const n=await UI(i,e),s={...e,authToken:n};return await _u(i.appConfig,s),n}catch(n){if(N_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await z_(i.appConfig);else{const s={...e,authToken:{requestStatus:0}};await _u(i.appConfig,s)}throw n}}function $_(i){return i!==void 0&&i.registrationStatus===2}function qI(i){return i.requestStatus===2&&!HI(i)}function HI(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+_I}function GI(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function WI(i){return i.requestStatus===1&&i.requestTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(i){const e=i,{installationEntry:n,registrationPromise:s}=await Wf(e);return s?s.catch(console.error):Qf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(i,e=!1){const n=i;return await YI(n),(await Qf(n,e)).token}async function YI(i){const{registrationPromise:e}=await Wf(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(i){if(!i||!i.options)throw Rh("App Configuration");if(!i.name)throw Rh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Rh(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Rh(i){return Yi.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="installations",JI="installations-internal",ZI=i=>{const e=i.getProvider("app").getImmediate(),n=XI(e),s=Aa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},eS=i=>{const e=i.getProvider("app").getImmediate(),n=Aa(e,q_).getImmediate();return{getId:()=>QI(n),getToken:a=>KI(n,a)}};function tS(){ri(new Tr(q_,ZI,"PUBLIC")),ri(new Tr(JI,eS,"PRIVATE"))}tS();Xn(R_,Hf);Xn(R_,Hf,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="analytics",nS="firebase_id",rS="origin",iS=60*1e3,sS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=new rf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},un=new wu("analytics","Analytics",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(i){if(!i.startsWith(Kf)){const e=un.create("invalid-gtag-resource",{gtagURL:i});return Zt.warn(e.message),""}return i}function H_(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function lS(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function uS(i,e){const n=lS("firebase-js-sdk-policy",{createScriptURL:aS}),s=document.createElement("script"),a=`${Kf}?l=${i}&id=${e}`;s.src=n?n?.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function cS(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function hS(i,e,n,s,a,c){const f=s[a];try{if(f)await e[f];else{const y=(await H_(n)).find(v=>v.measurementId===a);y&&await e[y.appId]}}catch(m){Zt.error(m)}i("config",a,c)}async function fS(i,e,n,s,a){try{let c=[];if(a&&a.send_to){let f=a.send_to;Array.isArray(f)||(f=[f]);const m=await H_(n);for(const y of f){const v=m.find(C=>C.measurementId===y),E=v&&e[v.appId];if(E)c.push(E);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",s,a||{})}catch(c){Zt.error(c)}}function dS(i,e,n,s){async function a(c,...f){try{if(c==="event"){const[m,y]=f;await fS(i,e,n,m,y)}else if(c==="config"){const[m,y]=f;await hS(i,e,n,s,m,y)}else if(c==="consent"){const[m,y]=f;i("consent",m,y)}else if(c==="get"){const[m,y,v]=f;i("get",m,y,v)}else if(c==="set"){const[m]=f;i("set",m)}else i(c,...f)}catch(m){Zt.error(m)}}return a}function pS(i,e,n,s,a){let c=function(...f){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(c=window[a]),window[a]=dS(c,i,e,n),{gtagCore:c,wrappedGtag:window[a]}}function mS(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Kf)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=30,yS=1e3;class _S{constructor(e={},n=yS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const G_=new _S;function vS(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function wS(i){const{appId:e,apiKey:n}=i,s={method:"GET",headers:vS(n)},a=sS.replace("{app-id}",e),c=await fetch(a,s);if(c.status!==200&&c.status!==304){let f="";try{const m=await c.json();m.error?.message&&(f=m.error.message)}catch{}throw un.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function ES(i,e=G_,n){const{appId:s,apiKey:a,measurementId:c}=i.options;if(!s)throw un.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:s};throw un.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new SS;return setTimeout(async()=>{m.abort()},iS),W_({appId:s,apiKey:a,measurementId:c},f,m,e)}async function W_(i,{throttleEndTimeMillis:e,backoffCount:n},s,a=G_){const{appId:c,measurementId:f}=i;try{await TS(s,e)}catch(m){if(f)return Zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:f};throw m}try{const m=await wS(i);return a.deleteThrottleMetadata(c),m}catch(m){const y=m;if(!IS(y)){if(a.deleteThrottleMetadata(c),f)return Zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:f};throw m}const v=Number(y?.customData?.httpStatus)===503?pm(n,a.intervalMillis,gS):pm(n,a.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return a.setThrottleMetadata(c,E),Zt.debug(`Calling attemptFetch again in ${v} millis`),W_(i,E,s,a)}}function TS(i,e){return new Promise((n,s)=>{const a=Math.max(e-Date.now(),0),c=setTimeout(n,a);i.addEventListener(()=>{clearTimeout(c),s(un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function IS(i){if(!(i instanceof ci)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class SS{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AS(i,e,n,s,a){if(a&&a.global){i("event",n,s);return}else{const c=await e,f={...s,send_to:c};i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(){if(jg())try{await Ug()}catch(i){return Zt.warn(un.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return Zt.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RS(i,e,n,s,a,c,f){const m=ES(i);m.then(R=>{n[R.measurementId]=R.appId,i.options.measurementId&&R.measurementId!==i.options.measurementId&&Zt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Zt.error(R)),e.push(m);const y=CS().then(R=>{if(R)return s.getId()}),[v,E]=await Promise.all([m,y]);mS(c)||uS(c,v.measurementId),a("js",new Date);const C=f?.config??{};return C[rS]="firebase",C.update=!0,E!=null&&(C[nS]=E),a("config",v.measurementId,C),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.app=e}_delete(){return delete pa[this.app.options.appId],Promise.resolve()}}let pa={},Ag=[];const Cg={};let Ph="dataLayer",kS="gtag",Rg,Q_,Pg=!1;function xS(){const i=[];if(D0()&&i.push("This is a browser extension environment."),O0()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,a)=>`(${a+1}) ${s}`).join(" "),n=un.create("invalid-analytics-context",{errorInfo:e});Zt.warn(n.message)}}function NS(i,e,n){xS();const s=i.options.appId;if(!s)throw un.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw un.create("no-api-key");if(pa[s]!=null)throw un.create("already-exists",{id:s});if(!Pg){cS(Ph);const{wrappedGtag:c,gtagCore:f}=pS(pa,Ag,Cg,Ph,kS);Q_=c,Rg=f,Pg=!0}return pa[s]=RS(i,Ag,Cg,e,Rg,Ph,n),new PS(i)}function VS(i=Hg()){i=En(i);const e=Aa(i,vu);return e.isInitialized()?e.getImmediate():DS(i)}function DS(i,e={}){const n=Aa(i,vu);if(n.isInitialized()){const a=n.getImmediate();if(ma(e,n.getOptions()))return a;throw un.create("already-initialized")}return n.initialize({options:e})}function MS(i,e,n,s){i=En(i),AS(Q_,pa[i.app.options.appId],e,n,s).catch(a=>Zt.error(a))}const kg="@firebase/analytics",xg="0.10.18";function OS(){ri(new Tr(vu,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return NS(s,a,n)},"PUBLIC")),ri(new Tr("analytics-internal",i,"PRIVATE")),Xn(kg,xg),Xn(kg,xg,"esm2020");function i(e){try{const n=e.getProvider(vu).getImmediate();return{logEvent:(s,a,c)=>MS(n,s,a,c)}}catch(n){throw un.create("interop-component-reg-failed",{reason:n})}}}OS();const LS={apiKey:"AIzaSyBhAiDI1pfGZhFhrmkBP1UIWQd0LwHghxw",authDomain:"react-wishlist-1e632.firebaseapp.com",projectId:"react-wishlist-1e632",storageBucket:"react-wishlist-1e632.firebasestorage.app",messagingSenderId:"825865680841",appId:"1:825865680841:web:b40de5ac90e201d1e35a18",measurementId:"G-2978XB21ZK"},K_=qg(LS);VS(K_);const Ji=Q1(K_);function FS(i,e){const n=sI(gu(Ji,"gifts"),oI("createdAt","desc"));let s=!1;return fI(n,async c=>{try{console.debug("subscribeToGifts snapshot size:",c.size);try{const m=c.docs.map(v=>v.id),y=c.docs.map(v=>v.data().name||"<no-name>");console.debug("subscribeToGifts snapshot ids:",m),console.debug("subscribeToGifts snapshot titles:",y)}catch(m){console.debug("subscribeToGifts: failed to enumerate docs",m)}const f=c.docs.map(m=>({id:m.id,...m.data()}));if(i(f),!s){s=!0;try{e?.()}catch(m){console.debug("subscribeToGifts onInitialized threw",m)}}if(c.empty){const m=await A_(gu(Ji,"gifts"));if(!m.empty){console.warn("subscribeToGifts: ordered query returned empty, but unordered query returned docs. This may indicate missing createdAt fields.");const y=m.docs.map(v=>({id:v.id,...v.data()}));i(y)}}}catch(f){console.error("subscribeToGifts processing error",f)}},c=>{console.error("subscribeToGifts onSnapshot error",c)})}async function bS(i){return hI(gu(Ji,"gifts"),{...i,isBooked:!1,bookedBy:null,createdAt:pI()})}async function jS(i,e){const n=Mu(Ji,"gifts",i);return C_(n,{isBooked:e!=null,bookedBy:e??null})}async function US(i){return cI(Mu(Ji,"gifts",i))}async function zS(){try{const i=await A_(gu(Ji,"gifts")),e=[];if(i.docs.forEach(n=>{const s=n.data();(s.createdAt===void 0||s.createdAt===null)&&e.push({id:n.id,ref:Mu(Ji,"gifts",n.id)})}),e.length===0){console.info("migrateMissingCreatedAt: no documents missing createdAt");return}console.info(`migrateMissingCreatedAt: updating ${e.length} documents`);for(const n of e)await C_(n.ref,{createdAt:new Date});console.info("migrateMissingCreatedAt: done")}catch(i){console.error("migrateMissingCreatedAt error",i)}}const Ng="wishlist-items-v1";function BS(){const[i,e]=Oe.useState([]),[n,s]=Oe.useState(!0),[a,c]=Oe.useState(new Set),[f,m]=Oe.useState({}),[y,v]=Oe.useState({}),[E,C]=Oe.useState(new Set);Oe.useEffect(()=>{try{const $=localStorage.getItem(Ng);if($){const F=JSON.parse($);Array.isArray(F)&&F.length&&e(F)}}catch{}},[]),Oe.useEffect(()=>{try{localStorage.setItem(Ng,JSON.stringify(i))}catch{}},[i]),Oe.useEffect(()=>{const $=FS(e,()=>{s(!1)});return()=>$()},[]);const R=Oe.useCallback(async $=>{const F=$.id;console.debug("deleteItem (optimistic) called for",F,$.name);const pe=i.findIndex(ce=>ce.id===F);v(ce=>({...ce,[F]:pe>=0?pe:Object.keys(ce).length})),c(ce=>{const ie=new Set(ce);return ie.add(F),ie}),m(ce=>({...ce,[F]:$}));const fe=setTimeout(()=>{c(ce=>{const ie=new Set(ce);return ie.delete(F),ie}),C(ce=>{const ie=new Set(ce);return ie.add(F),ie})},420);try{await US(F),console.debug("deleteGift succeeded for",F),clearTimeout(fe),m(ce=>{const ie={...ce};return delete ie[F],ie}),v(ce=>{const ie={...ce};return delete ie[F],ie}),C(ce=>{const ie=new Set(ce);return ie.delete(F),ie})}catch(ce){console.error("deleteGift failed, rolling back",ce,F),clearTimeout(fe),C(ie=>{const le=new Set(ie);return le.delete(F),le}),c(ie=>{const le=new Set(ie);return le.delete(F),le}),m(ie=>{const le={...ie};return delete le[F],le}),v(ie=>{const le={...ie};return delete le[F],le});try{typeof window<"u"&&window.alert(" .   .")}catch{}}},[i]),z=Oe.useCallback(async($,F)=>{try{await jS($,F??null)}catch(pe){console.error("updateBooking error",pe)}},[]),G=Oe.useMemo(()=>{const $=i.filter(F=>!E.has(F.id));return Object.keys(y).forEach(F=>{const pe=y[F],me=$.findIndex(ie=>ie.id===F);if(E.has(F))return;const fe=$.find(ie=>ie.id===F)||f[F];if(!fe)return;me>=0&&$.splice(me,1);const ce=Math.max(0,Math.min(pe,$.length));$.splice(ce,0,fe)}),Object.keys(f).forEach(F=>{E.has(F)||$.find(pe=>pe.id===F)||$.push(f[F])}),$},[i,f,y,E]);return{items:i,displayItems:G,loading:n,pendingDeletes:a,deleteItem:R,toggleBooked:z}}function Vg(i=10){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let n="";const s=new Uint32Array(i);crypto.getRandomValues(s);for(let a=0;a<i;a++)n+=e[s[a]%e.length];return n}const Y_=2300,X_=600,$S=Y_+X_;function qS(){const[i,e]=Oe.useState([]),[n,s]=Oe.useState([]),a=Oe.useRef([]),c=Oe.useRef([]),f=Oe.useRef(null),m=Oe.useCallback(()=>{let v=performance.now();const E=.05,C=$S,R=()=>{const z=performance.now(),G=(z-v)/1e3;v=z;let $=!1;a.current=a.current.filter(F=>z-F.born>C?!1:(F.x+=F.vx*G,F.y+=F.vy*G,F.vx*=1-E*G,F.r+=F.vr*G,$=!0,F.y<=window.scrollY+window.innerHeight+120)),c.current=c.current.filter(F=>z-F.born>C?!1:(F.x+=F.vx*G,F.y+=F.vy*G,F.vx*=1-E*.5*G,F.r+=F.vr*G,$=!0,F.y<=window.scrollY+window.innerHeight+120)),$&&(e([...a.current]),s([...c.current])),a.current.length||c.current.length?f.current=requestAnimationFrame(R):f.current=null};f.current=requestAnimationFrame(R)},[]),y=Oe.useCallback(()=>{const E=performance.now(),C=["rgb(255,0,43)","rgb(228,0,43)","rgba(255,0,43,0.75)","rgba(228,0,43,0.65)"],R=window.innerWidth,z=window.innerHeight,G=Array.from({length:60},()=>({id:Vg(),x:Math.random()*R,y:window.scrollY+Math.random()*z,vx:(Math.random()*2-1)*25,vy:50+Math.random()*120,r:Math.random()*360,vr:(Math.random()*2-1)*60,font:24+Math.random()*60,born:E,color:C[Math.floor(Math.random()*C.length)]})),F=Array.from({length:180},()=>({id:Vg(),x:Math.random()*R,y:window.scrollY+Math.random()*z,vx:(Math.random()*2-1)*60,vy:30+Math.random()*80,r:Math.random()*360,vr:(Math.random()*2-1)*180,size:8+Math.random()*16,born:E,color:C[Math.floor(Math.random()*C.length)]}));a.current=[...a.current,...G].slice(-800),c.current=[...c.current,...F].slice(-800*2),e(a.current),s(c.current),f.current==null&&m()},[m]);return{bursts:i,miniFireworks:n,spawn25:y,PARTICLE_FADE_START:Y_,PARTICLE_FADE_DURATION:X_}}const HS=""+new URL("photo-Bu3m49K9.jpg",import.meta.url).href,GS=({fancy:i,loading:e,hasItems:n,onToggleFancy:s,onSpawn25:a,children:c})=>Y.jsxs("header",{className:"relative w-full max-w-3xl pt-6 flex flex-col items-center text-center",children:[Y.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[Y.jsxs("button",{type:"button",onClick:s,className:"rounded-full bg-accent/10 text-accent px-3 py-1 text-xs font-medium hover:bg-accent/20 transition",children:[i?"Classic":"Fancy"," UI"]}),e&&n&&Y.jsx("div",{className:"flex items-center gap-2 rounded-full bg-neutral-50/60 px-3 py-1 text-xs text-neutral-600",children:""}),typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Y.jsx("button",{type:"button",onClick:()=>zS().catch(f=>console.error(f)),className:"rounded-full bg-red-100 text-red-700 px-3 py-1 text-xs font-medium hover:bg-red-200 transition",title:"Fix missing createdAt in Firestore (dev only)",children:"Fix timestamps"})]}),Y.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[Y.jsx("div",{className:"font-extrabold tracking-tight text-accent text-2xl sm:text-3xl md:text-4xl leading-snug",children:"Wishlist"}),Y.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[Y.jsx("div",{className:"relative","aria-label":"",children:Y.jsx("div",{className:"h-48 w-48 sm:h-56 sm:w-56 rounded-full border-4 border-accent flex items-center justify-center overflow-hidden bg-white shadow-md select-none",children:Y.jsx("img",{src:HS,alt:"",className:"h-full w-full object-cover pointer-events-none"})})}),Y.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tight text-accent drop-shadow-sm select-none",children:"Happy Birthday"}),Y.jsx("div",{onClick:a,className:"text-5xl sm:text-6xl font-black text-neutral-900/90 select-none cursor-pointer transition-transform active:scale-90 hover:scale-105",title:"Fire 25 fireworks",children:"25"})]})]}),c]}),J_=[" 1000"," 2000"," 3000",""],Dg={name:"",description:"",category:J_[0]},WS=({fancy:i})=>{const[e,n]=Oe.useState(Dg),s=(f,m)=>{n(y=>({...y,[f]:m}))},a=()=>n(Dg),c=async f=>{if(f.preventDefault(),!!e.name.trim())try{await bS({name:e.name.trim(),description:e.description.trim(),category:e.category}),a()}catch(m){console.error("addGift error",m)}};return Y.jsxs("form",{onSubmit:c,className:`mt-8 w-full grid gap-4 rounded-xl p-5 border shadow-sm md:grid-cols-2 ${i?"glass border-white/40 card-elevated":"bg-white border-neutral-200"}`,children:[Y.jsx("div",{className:"flex flex-col gap-2 md:col-span-2",children:Y.jsx("input",{type:"text",placeholder:" ",value:e.name,onChange:f=>s("name",f.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none",required:!0})}),Y.jsx("div",{className:"flex flex-col gap-2 md:col-span-2",children:Y.jsx("textarea",{placeholder:" / ",value:e.description,onChange:f=>s("description",f.target.value),rows:3,className:"w-full resize-y rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none"})}),Y.jsx("div",{className:"flex flex-col gap-2",children:Y.jsx("select",{value:e.category,onChange:f=>s("category",f.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none",children:J_.map(f=>Y.jsx("option",{children:f},f))})}),Y.jsx("div",{className:"flex flex-col gap-2",children:Y.jsx("button",{type:"submit",className:"h-full rounded-md bg-accent px-6 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-booked focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""})})]})},Mg=[" 1000"," 2000"," 3000",""],QS=({selectedCategory:i,onSelectCategory:e})=>Y.jsxs("div",{className:"col-span-full flex items-center justify-between gap-3 mb-2",children:[Y.jsxs("select",{value:i,onChange:n=>e(n.target.value),className:"block md:hidden rounded-md border px-3 py-2 text-sm","aria-label":" ",children:[Y.jsx("option",{value:"all",children:" "}),Mg.map(n=>Y.jsx("option",{value:n,children:n},n))]}),Y.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>e("all"),className:`px-3 py-1 rounded-full text-sm ${i==="all"?"bg-accent text-white":"bg-neutral-100 text-neutral-700"}`,children:""}),Mg.map(n=>Y.jsx("button",{type:"button",onClick:()=>e(n),className:`px-3 py-1 rounded-full text-sm ${i===n?"bg-accent text-white":"bg-neutral-100 text-neutral-700"}`,children:n},n))]})]}),KS=({item:i,onClose:e,onConfirm:n})=>{const s=Oe.useRef(null);return Oe.useEffect(()=>{if(i){const a=setTimeout(()=>s.current?.focus(),0);return()=>clearTimeout(a)}},[i]),Oe.useEffect(()=>{const a=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),i?Y.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center px-4",children:[Y.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),Y.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title",className:"relative z-50 w-full max-w-md transform rounded-xl bg-white p-6 shadow-2xl transition-all duration-200 ease-out translate-y-0",children:[Y.jsx("h3",{id:"confirm-title",className:"text-lg font-semibold text-neutral-900",children:" "}),Y.jsxs("p",{className:"mt-2 text-sm text-neutral-600",children:[" ,     ",Y.jsxs("span",{className:"font-semibold",children:['"',i.name,'"']}),i.category?`  ${i.category}`:"","?"]}),Y.jsxs("p",{className:"mt-2 text-xs text-neutral-400 break-words",children:["ID: ",Y.jsx("span",{className:"font-mono text-xs text-neutral-600",children:i.id})]}),Y.jsxs("div",{className:"mt-4 flex items-center justify-end gap-3",children:[Y.jsx("button",{type:"button",onClick:e,className:"rounded-md px-4 py-2 bg-neutral-100 text-neutral-800 hover:bg-neutral-200 transition",children:""}),Y.jsx("button",{ref:s,type:"button",onClick:()=>n(i),className:"rounded-md px-4 py-2 bg-red-600 text-white hover:bg-red-700 transition",children:""})]})]})]}):null},YS=({bursts:i,miniFireworks:e,fadeStart:n,fadeDuration:s})=>Y.jsxs("div",{className:"pointer-events-none fixed inset-0 z-50 overflow-hidden",children:[i.map(a=>{const c=performance.now()-a.born,f=c<120?c/120:c>n?Math.max(0,1-(c-n)/s):1,m=Math.min(1,c/900);let v=.4+(1-Math.pow(1-m,3))*.8;return c>n&&(v*=.9),Y.jsx("div",{className:"font-black select-none",style:{position:"absolute",left:0,top:0,transform:`translate(${a.x}px, ${a.y}px) translate(-50%, -50%) rotate(${Math.round(a.r)}deg) scale(${v.toFixed(3)})`,fontSize:a.font,opacity:f,color:a.color,textShadow:`0 0 4px ${a.color}55, 0 0 10px ${a.color}55, 0 2px 4px rgba(0,0,0,.25)`,filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.25))",willChange:"transform, opacity"},children:"25"},a.id)}),e.map(a=>{const c=performance.now()-a.born,f=c<100?c/100:c>n?Math.max(0,1-(c-n)/s):1,m=Math.min(1,c/600);let v=.3+(1-Math.pow(1-m,2))*.7;return c>n&&(v*=.8),Y.jsx("div",{className:"font-bold select-none",style:{position:"absolute",left:0,top:0,transform:`translate(${a.x}px, ${a.y}px) translate(-50%, -50%) rotate(${Math.round(a.r)}deg) scale(${v.toFixed(3)})`,fontSize:a.size,opacity:f,color:a.color,textShadow:`0 0 2px ${a.color}77, 0 0 6px ${a.color}44`,filter:"drop-shadow(0 2px 3px rgba(0,0,0,0.2))",willChange:"transform, opacity"},children:""},a.id)})]}),XS=()=>Y.jsx("div",{className:"col-span-full flex items-center justify-center py-16",children:Y.jsxs("div",{role:"status","aria-live":"polite",className:"flex flex-col items-center gap-4",children:[Y.jsxs("svg",{className:"w-16 h-16 text-accent",viewBox:"0 0 50 50","aria-hidden":"true",focusable:"false",children:[Y.jsx("defs",{children:Y.jsxs("linearGradient",{id:"g1",x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[Y.jsx("stop",{offset:"0%",stopColor:"#ff0045"}),Y.jsx("stop",{offset:"100%",stopColor:"#ff6b85"})]})}),Y.jsx("circle",{cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"4",className:"opacity-20",fill:"none"}),Y.jsx("path",{d:"M45 25a20 20 0 0 1-20 20",stroke:"url(#g1)",strokeWidth:"4",strokeLinecap:"round",fill:"none",className:"origin-center animate-spin",style:{transformOrigin:"25px 25px"}})]}),Y.jsx("div",{className:"text-sm text-neutral-500",children:" "})]})}),JS=()=>{const{displayItems:i,loading:e,pendingDeletes:n,deleteItem:s,toggleBooked:a}=BS(),{bursts:c,miniFireworks:f,spawn25:m,PARTICLE_FADE_START:y,PARTICLE_FADE_DURATION:v}=qS(),[E,C]=Oe.useState(null),[R,z]=Oe.useState(!0),[G,$]=Oe.useState("all"),F=Oe.useCallback(ie=>{C(ie)},[]),pe=Oe.useCallback(async ie=>{C(null);try{await s(ie)}catch(le){console.error("confirm modal delete error",le)}},[s]),me=ie=>{const le=ie.createdAt;if(!le)return 0;if(typeof le=="object"&&(le.seconds||le.toDate))try{return le.seconds?le.seconds*1e3:le.toDate().getTime()}catch{return 0}if(le instanceof Date)return le.getTime();const N=Date.parse(String(le));return isNaN(N)?0:N},fe=Oe.useMemo(()=>i.filter(le=>G==="all"||le.category===G).sort((le,N)=>me(N)-me(le)),[i,G]),ce=e&&i.length===0;return Y.jsxs("div",{className:`relative min-h-screen w-full flex flex-col items-center px-4 pb-16 ${R?"design-grid":""}`,children:[Y.jsx(GS,{fancy:R,loading:e,hasItems:i.length>0,onToggleFancy:()=>z(ie=>!ie),onSpawn25:m,children:Y.jsx(WS,{fancy:R})}),Y.jsxs("main",{className:"w-full max-w-6xl mt-10 grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[Y.jsx(QS,{selectedCategory:G,onSelectCategory:$}),ce?Y.jsx(XS,{}):fe.length===0?Y.jsx("p",{className:"col-span-full text-center text-sm text-neutral-500",children:"     !"}):fe.map(ie=>Y.jsx(d0,{item:ie,onToggle:a,onDelete:()=>F(ie),isDeleting:n.has(ie.id)},ie.id))]}),Y.jsx(YS,{bursts:c,miniFireworks:f,fadeStart:y,fadeDuration:v}),Y.jsx(KS,{item:E,onClose:()=>C(null),onConfirm:pe})]})};f0.createRoot(document.getElementById("root")).render(Y.jsx(s0.StrictMode,{children:Y.jsx(JS,{})}));
