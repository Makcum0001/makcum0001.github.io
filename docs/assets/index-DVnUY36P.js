(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function sg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var eh={exports:{}},Xo={},th={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function nv(){if(Mp)return Ae;Mp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=C&&D[C]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function M(D,W,he){this.props=D,this.context=W,this.refs=$,this.updater=he||z}M.prototype.isReactComponent={},M.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function fe(){}fe.prototype=M.prototype;function me(D,W,he){this.props=D,this.context=W,this.refs=$,this.updater=he||z}var de=me.prototype=new fe;de.constructor=me,B(de,M.prototype),de.isPureReactComponent=!0;var ce=Array.isArray,ie=Object.prototype.hasOwnProperty,le={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function I(D,W,he){var Ie,Se={},ke=null,Le=null;if(W!=null)for(Ie in W.ref!==void 0&&(Le=W.ref),W.key!==void 0&&(ke=""+W.key),W)ie.call(W,Ie)&&!V.hasOwnProperty(Ie)&&(Se[Ie]=W[Ie]);var Fe=arguments.length-2;if(Fe===1)Se.children=he;else if(1<Fe){for(var Be=Array(Fe),yt=0;yt<Fe;yt++)Be[yt]=arguments[yt+2];Se.children=Be}if(D&&D.defaultProps)for(Ie in Fe=D.defaultProps,Fe)Se[Ie]===void 0&&(Se[Ie]=Fe[Ie]);return{$$typeof:i,type:D,key:ke,ref:Le,props:Se,_owner:le.current}}function A(D,W){return{$$typeof:i,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function N(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(he){return W[he]})}var O=/\/+/g;function S(D,W){return typeof D=="object"&&D!==null&&D.key!=null?N(""+D.key):W.toString(36)}function tt(D,W,he,Ie,Se){var ke=typeof D;(ke==="undefined"||ke==="boolean")&&(D=null);var Le=!1;if(D===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(D.$$typeof){case i:case e:Le=!0}}if(Le)return Le=D,Se=Se(Le),D=Ie===""?"."+S(Le,0):Ie,ce(Se)?(he="",D!=null&&(he=D.replace(O,"$&/")+"/"),tt(Se,W,he,"",function(yt){return yt})):Se!=null&&(x(Se)&&(Se=A(Se,he+(!Se.key||Le&&Le.key===Se.key?"":(""+Se.key).replace(O,"$&/")+"/")+D)),W.push(Se)),1;if(Le=0,Ie=Ie===""?".":Ie+":",ce(D))for(var Fe=0;Fe<D.length;Fe++){ke=D[Fe];var Be=Ie+S(ke,Fe);Le+=tt(ke,W,he,Be,Se)}else if(Be=R(D),typeof Be=="function")for(D=Be.call(D),Fe=0;!(ke=D.next()).done;)ke=ke.value,Be=Ie+S(ke,Fe++),Le+=tt(ke,W,he,Be,Se);else if(ke==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Le}function xt(D,W,he){if(D==null)return D;var Ie=[],Se=0;return tt(D,Ie,"","",function(ke){return W.call(he,ke,Se++)}),Ie}function Vt(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(he){(D._status===0||D._status===-1)&&(D._status=1,D._result=he)},function(he){(D._status===0||D._status===-1)&&(D._status=2,D._result=he)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var Ue={current:null},Z={transition:null},ge={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Z,ReactCurrentOwner:le};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:xt,forEach:function(D,W,he){xt(D,function(){W.apply(this,arguments)},he)},count:function(D){var W=0;return xt(D,function(){W++}),W},toArray:function(D){return xt(D,function(W){return W})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ae.Component=M,Ae.Fragment=n,Ae.Profiler=a,Ae.PureComponent=me,Ae.StrictMode=s,Ae.Suspense=y,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ae.act=ne,Ae.cloneElement=function(D,W,he){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Ie=B({},D.props),Se=D.key,ke=D.ref,Le=D._owner;if(W!=null){if(W.ref!==void 0&&(ke=W.ref,Le=le.current),W.key!==void 0&&(Se=""+W.key),D.type&&D.type.defaultProps)var Fe=D.type.defaultProps;for(Be in W)ie.call(W,Be)&&!V.hasOwnProperty(Be)&&(Ie[Be]=W[Be]===void 0&&Fe!==void 0?Fe[Be]:W[Be])}var Be=arguments.length-2;if(Be===1)Ie.children=he;else if(1<Be){Fe=Array(Be);for(var yt=0;yt<Be;yt++)Fe[yt]=arguments[yt+2];Ie.children=Fe}return{$$typeof:i,type:D.type,key:Se,ref:ke,props:Ie,_owner:Le}},Ae.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:c,_context:D},D.Consumer=D},Ae.createElement=I,Ae.createFactory=function(D){var W=I.bind(null,D);return W.type=D,W},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(D){return{$$typeof:m,render:D}},Ae.isValidElement=x,Ae.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:Vt}},Ae.memo=function(D,W){return{$$typeof:v,type:D,compare:W===void 0?null:W}},Ae.startTransition=function(D){var W=Z.transition;Z.transition={};try{D()}finally{Z.transition=W}},Ae.unstable_act=ne,Ae.useCallback=function(D,W){return Ue.current.useCallback(D,W)},Ae.useContext=function(D){return Ue.current.useContext(D)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(D){return Ue.current.useDeferredValue(D)},Ae.useEffect=function(D,W){return Ue.current.useEffect(D,W)},Ae.useId=function(){return Ue.current.useId()},Ae.useImperativeHandle=function(D,W,he){return Ue.current.useImperativeHandle(D,W,he)},Ae.useInsertionEffect=function(D,W){return Ue.current.useInsertionEffect(D,W)},Ae.useLayoutEffect=function(D,W){return Ue.current.useLayoutEffect(D,W)},Ae.useMemo=function(D,W){return Ue.current.useMemo(D,W)},Ae.useReducer=function(D,W,he){return Ue.current.useReducer(D,W,he)},Ae.useRef=function(D){return Ue.current.useRef(D)},Ae.useState=function(D){return Ue.current.useState(D)},Ae.useSyncExternalStore=function(D,W,he){return Ue.current.useSyncExternalStore(D,W,he)},Ae.useTransition=function(){return Ue.current.useTransition()},Ae.version="18.3.1",Ae}var Op;function bh(){return Op||(Op=1,th.exports=nv()),th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function rv(){if(Lp)return Xo;Lp=1;var i=bh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,v){var w,C={},R=null,z=null;v!==void 0&&(R=""+v),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(z=y.ref);for(w in y)s.call(y,w)&&!c.hasOwnProperty(w)&&(C[w]=y[w]);if(m&&m.defaultProps)for(w in y=m.defaultProps,y)C[w]===void 0&&(C[w]=y[w]);return{$$typeof:e,type:m,key:R,ref:z,props:C,_owner:a.current}}return Xo.Fragment=n,Xo.jsx=f,Xo.jsxs=f,Xo}var Fp;function iv(){return Fp||(Fp=1,eh.exports=rv()),eh.exports}var Y=iv(),Oe=bh();const sv=sg(Oe);var bl={},nh={exports:{}},Yt={},rh={exports:{}},ih={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function ov(){return bp||(bp=1,(function(i){function e(Z,ge){var ne=Z.length;Z.push(ge);e:for(;0<ne;){var D=ne-1>>>1,W=Z[D];if(0<a(W,ge))Z[D]=ge,Z[ne]=W,ne=D;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ge=Z[0],ne=Z.pop();if(ne!==ge){Z[0]=ne;e:for(var D=0,W=Z.length,he=W>>>1;D<he;){var Ie=2*(D+1)-1,Se=Z[Ie],ke=Ie+1,Le=Z[ke];if(0>a(Se,ne))ke<W&&0>a(Le,Se)?(Z[D]=Le,Z[ke]=ne,D=ke):(Z[D]=Se,Z[Ie]=ne,D=Ie);else if(ke<W&&0>a(Le,ne))Z[D]=Le,Z[ke]=ne,D=ke;else break e}}return ge}function a(Z,ge){var ne=Z.sortIndex-ge.sortIndex;return ne!==0?ne:Z.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],v=[],w=1,C=null,R=3,z=!1,B=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(Z){for(var ge=n(v);ge!==null;){if(ge.callback===null)s(v);else if(ge.startTime<=Z)s(v),ge.sortIndex=ge.expirationTime,e(y,ge);else break;ge=n(v)}}function ce(Z){if($=!1,de(Z),!B)if(n(y)!==null)B=!0,Vt(ie);else{var ge=n(v);ge!==null&&Ue(ce,ge.startTime-Z)}}function ie(Z,ge){B=!1,$&&($=!1,fe(I),I=-1),z=!0;var ne=R;try{for(de(ge),C=n(y);C!==null&&(!(C.expirationTime>ge)||Z&&!N());){var D=C.callback;if(typeof D=="function"){C.callback=null,R=C.priorityLevel;var W=D(C.expirationTime<=ge);ge=i.unstable_now(),typeof W=="function"?C.callback=W:C===n(y)&&s(y),de(ge)}else s(y);C=n(y)}if(C!==null)var he=!0;else{var Ie=n(v);Ie!==null&&Ue(ce,Ie.startTime-ge),he=!1}return he}finally{C=null,R=ne,z=!1}}var le=!1,V=null,I=-1,A=5,x=-1;function N(){return!(i.unstable_now()-x<A)}function O(){if(V!==null){var Z=i.unstable_now();x=Z;var ge=!0;try{ge=V(!0,Z)}finally{ge?S():(le=!1,V=null)}}else le=!1}var S;if(typeof me=="function")S=function(){me(O)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,xt=tt.port2;tt.port1.onmessage=O,S=function(){xt.postMessage(null)}}else S=function(){M(O,0)};function Vt(Z){V=Z,le||(le=!0,S())}function Ue(Z,ge){I=M(function(){Z(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){B||z||(B=!0,Vt(ie))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(Z){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var ne=R;R=ge;try{return Z()}finally{R=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=R;R=Z;try{return ge()}finally{R=ne}},i.unstable_scheduleCallback=function(Z,ge,ne){var D=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?D+ne:D):ne=D,Z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,Z={id:w++,callback:ge,priorityLevel:Z,startTime:ne,expirationTime:W,sortIndex:-1},ne>D?(Z.sortIndex=ne,e(v,Z),n(y)===null&&Z===n(v)&&($?(fe(I),I=-1):$=!0,Ue(ce,ne-D))):(Z.sortIndex=W,e(y,Z),B||z||(B=!0,Vt(ie))),Z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(Z){var ge=R;return function(){var ne=R;R=ge;try{return Z.apply(this,arguments)}finally{R=ne}}}})(ih)),ih}var jp;function av(){return jp||(jp=1,rh.exports=ov()),rh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function lv(){if(Up)return Yt;Up=1;var i=bh(),e=av();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},C={};function R(t){return y.call(C,t)?!0:y.call(w,t)?!1:v.test(t)?C[t]=!0:(w[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function $(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){M[t]=new $(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];M[r]=new $(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){M[t]=new $(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){M[t]=new $(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){M[t]=new $(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){M[t]=new $(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){M[t]=new $(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){M[t]=new $(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){M[t]=new $(t,5,!1,t.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function me(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(fe,me);M[r]=new $(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(fe,me);M[r]=new $(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(fe,me);M[r]=new $(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){M[t]=new $(t,1,!1,t.toLowerCase(),null,!1,!1)}),M.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){M[t]=new $(t,1,!1,t.toLowerCase(),null,!0,!0)});function de(t,r,o,u){var h=M.hasOwnProperty(r)?M[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(B(r,o,h,u)&&(o=null),u||h===null?R(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ce=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),le=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,D;function W(t){if(D===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+t}var he=!1;function Ie(t,r){if(!t||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var u=j}Reflect.construct(t,[],r)}else{try{r.call()}catch(j){u=j}t.call(r.prototype)}else{try{throw Error()}catch(j){u=j}t()}}catch(j){if(j&&u&&typeof j.stack=="string"){for(var h=j.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,T=p.length-1;1<=_&&0<=T&&h[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(h[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||h[_]!==p[T]){var P=`
`+h[_].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=_&&0<=T);break}}}finally{he=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?W(t):""}function Se(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case le:return"Portal";case A:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case tt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case x:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case Vt:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function tr(t){t._valueTracker||(t._valueTracker=yt(t))}function Wi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Tr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function li(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Gi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function no(t,r){r=r.checked,r!=null&&de(t,"checked",r,!1)}function ro(t,r){no(t,r);var o=Fe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Qi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Qi(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ia(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Qi(t,r,o){(r!=="number"||Tr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var nr=Array.isArray;function rr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function io(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ki(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(nr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Yi(t,r){var o=Fe(r.value),u=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function so(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ht(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ir,oo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ir(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ci.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ui[r]=ui[t]})});function ao(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ui.hasOwnProperty(t)&&ui[t]?(""+r).trim():r+"px"}function lo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=ao(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var uo=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(t,r){if(r){if(uo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ho(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Xi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ji=null,ln=null,Ln=null;function Zi(t){if(t=Lo(t)){if(typeof Ji!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Za(r),Ji(t.stateNode,t.type,r))}}function Fn(t){ln?Ln?Ln.push(t):Ln=[t]:ln=t}function fo(){if(ln){var t=ln,r=Ln;if(Ln=ln=null,Zi(t),r)for(t=0;t<r.length;t++)Zi(r[t])}}function fi(t,r){return t(r)}function po(){}var sr=!1;function mo(t,r,o){if(sr)return t(r,o);sr=!0;try{return fi(t,r,o)}finally{sr=!1,(ln!==null||Ln!==null)&&(po(),fo())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=Za(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var es=!1;if(m)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){es=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{es=!1}function di(t,r,o,u,h,p,_,T,P){var j=Array.prototype.slice.call(arguments,3);try{r.apply(o,j)}catch(Q){this.onError(Q)}}var pi=!1,ts=null,En=!1,go=null,Pu={onError:function(t){pi=!0,ts=t}};function ns(t,r,o,u,h,p,_,T,P){pi=!1,ts=null,di.apply(Pu,arguments)}function Sa(t,r,o,u,h,p,_,T,P){if(ns.apply(this,arguments),pi){if(pi){var j=ts;pi=!1,ts=null}else throw Error(n(198));En||(En=!0,go=j)}}function wn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function mi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Tn(t){if(wn(t)!==t)throw Error(n(188))}function Aa(t){var r=t.alternate;if(!r){if(r=wn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Tn(h),t;if(p===u)return Tn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,T=h.child;T;){if(T===o){_=!0,o=h,u=p;break}if(T===u){_=!0,u=h,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=h;break}if(T===u){_=!0,u=p,o=h;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function yo(t){return t=Aa(t),t!==null?rs(t):null}function rs(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=rs(t);if(r!==null)return r;t=t.sibling}return null}var is=e.unstable_scheduleCallback,_o=e.unstable_cancelCallback,Ca=e.unstable_shouldYield,ku=e.unstable_requestPaint,$e=e.unstable_now,Ra=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,vo=e.unstable_LowPriority,Pa=e.unstable_IdlePriority,yi=null,Zt=null;function ka(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Va,Eo=Math.log,xa=Math.LN2;function Va(t){return t>>>=0,t===0?32:31-(Eo(t)/xa|0)|0}var ss=64,os=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~h;T!==0?u=Ar(T):(p&=_,p!==0&&(u=Ar(p)))}else _=o&~h,_!==0?u=Ar(_):p!==0&&(u=Ar(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-jt(r),h=1<<o,u|=t[o],r&=~h;return u}function xu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function or(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-jt(p),T=1<<_,P=h[_];P===-1?((T&o)===0||(T&u)!==0)&&(h[_]=xu(T,r)):P<=r&&(t.expiredLanes|=T),p&=~T}}function en(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=ss;return ss<<=1,(ss&4194240)===0&&(ss=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Rr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-jt(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-jt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Pr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-jt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Pe=0;function kr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Na,as,Da,Ma,Oa,wo=!1,bn=[],It=null,In=null,Sn=null,xr=new Map,cn=new Map,jn=[],Vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function La(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":xr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(r.pointerId)}}function $t(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Lo(r),r!==null&&as(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Nu(t,r,o,u,h){switch(r){case"focusin":return It=$t(It,t,r,o,u,h),!0;case"dragenter":return In=$t(In,t,r,o,u,h),!0;case"mouseover":return Sn=$t(Sn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return xr.set(p,$t(xr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,cn.set(p,$t(cn.get(p)||null,t,r,o,u,h)),!0}return!1}function Fa(t){var r=Si(t.target);if(r!==null){var o=wn(r);if(o!==null){if(r=o.tag,r===13){if(r=mi(o),r!==null){t.blockedOn=r,Oa(t.priority,function(){Da(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ar(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ls(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);hi=u,o.target.dispatchEvent(u),hi=null}else return r=Lo(o),r!==null&&as(r),t.blockedOn=o,!1;r.shift()}return!0}function Ei(t,r,o){ar(t)&&o.delete(r)}function ba(){wo=!1,It!==null&&ar(It)&&(It=null),In!==null&&ar(In)&&(In=null),Sn!==null&&ar(Sn)&&(Sn=null),xr.forEach(Ei),cn.forEach(Ei)}function An(t,r){t.blockedOn===r&&(t.blockedOn=null,wo||(wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ba)))}function Cn(t){function r(h){return An(h,t)}if(0<bn.length){An(bn[0],t);for(var o=1;o<bn.length;o++){var u=bn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&An(It,t),In!==null&&An(In,t),Sn!==null&&An(Sn,t),xr.forEach(r),cn.forEach(r),o=0;o<jn.length;o++)u=jn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<jn.length&&(o=jn[0],o.blockedOn===null);)Fa(o),o.blockedOn===null&&jn.shift()}var lr=ce.ReactCurrentBatchConfig,Vr=!0;function Ke(t,r,o,u){var h=Pe,p=lr.transition;lr.transition=null;try{Pe=1,To(t,r,o,u)}finally{Pe=h,lr.transition=p}}function Du(t,r,o,u){var h=Pe,p=lr.transition;lr.transition=null;try{Pe=4,To(t,r,o,u)}finally{Pe=h,lr.transition=p}}function To(t,r,o,u){if(Vr){var h=ls(t,r,o,u);if(h===null)qu(t,r,u,wi,o),La(t,u);else if(Nu(h,t,r,o,u))u.stopPropagation();else if(La(t,u),r&4&&-1<Vu.indexOf(t)){for(;h!==null;){var p=Lo(h);if(p!==null&&Na(p),p=ls(t,r,o,u),p===null&&qu(t,r,u,wi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else qu(t,r,u,null,o)}}var wi=null;function ls(t,r,o,u){if(wi=null,t=Xi(u),t=Si(t),t!==null)if(r=wn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=mi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return wi=t,null}function Io(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ra()){case gi:return 1;case Sr:return 4;case un:case vo:return 16;case Pa:return 536870912;default:return 16}default:return 16}}var tn=null,us=null,qt=null;function So(){if(qt)return qt;var t,r=us,o=r.length,u,h="value"in tn?tn.value:tn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function cs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Un(){return!0}function Ao(){return!1}function St(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Un:Ao,this.isPropagationStopped=Ao,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=St(Rn),zn=ne({},Rn,{view:0,detail:0}),Mu=St(zn),fs,ur,Nr,Ti=ne({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(fs=t.screenX-Nr.screenX,ur=t.screenY-Nr.screenY):ur=fs=0,Nr=t),fs)},movementY:function(t){return"movementY"in t?t.movementY:ur}}),ds=St(Ti),Co=ne({},Ti,{dataTransfer:0}),ja=St(Co),ps=ne({},zn,{relatedTarget:0}),ms=St(ps),Ua=ne({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),cr=St(Ua),za=ne({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ba=St(za),$a=ne({},Rn,{data:0}),Ro=St($a),gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ha(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=qa[t])?!!r[t]:!1}function Bn(){return Ha}var l=ne({},zn,{key:function(t){if(t.key){var r=gs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=cs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ut[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(t){return t.type==="keypress"?cs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=St(l),g=ne({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=St(g),L=ne({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn}),U=St(L),J=ne({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=St(J),dt=ne({},Ti,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=St(dt),_t=[9,13,27,32],st=m&&"CompositionEvent"in window,hn=null;m&&"documentMode"in document&&(hn=document.documentMode);var nn=m&&"TextEvent"in window&&!hn,Ii=m&&(!st||hn&&8<hn&&11>=hn),ys=" ",Pf=!1;function kf(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function Zy(t,r){switch(t){case"compositionend":return xf(r);case"keypress":return r.which!==32?null:(Pf=!0,ys);case"textInput":return t=r.data,t===ys&&Pf?null:t;default:return null}}function e_(t,r){if(_s)return t==="compositionend"||!st&&kf(t,r)?(t=So(),qt=us=tn=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ii&&r.locale!=="ko"?null:r.data;default:return null}}var t_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!t_[t.type]:r==="textarea"}function Nf(t,r,o,u){Fn(u),r=Ya(r,"onChange"),0<r.length&&(o=new hs("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Po=null,ko=null;function n_(t){Yf(t,0)}function Wa(t){var r=Is(t);if(Wi(r))return t}function r_(t,r){if(t==="change")return r}var Df=!1;if(m){var Ou;if(m){var Lu="oninput"in document;if(!Lu){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),Lu=typeof Mf.oninput=="function"}Ou=Lu}else Ou=!1;Df=Ou&&(!document.documentMode||9<document.documentMode)}function Of(){Po&&(Po.detachEvent("onpropertychange",Lf),ko=Po=null)}function Lf(t){if(t.propertyName==="value"&&Wa(ko)){var r=[];Nf(r,ko,t,Xi(t)),mo(n_,r)}}function i_(t,r,o){t==="focusin"?(Of(),Po=r,ko=o,Po.attachEvent("onpropertychange",Lf)):t==="focusout"&&Of()}function s_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa(ko)}function o_(t,r){if(t==="click")return Wa(r)}function a_(t,r){if(t==="input"||t==="change")return Wa(r)}function l_(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pn=typeof Object.is=="function"?Object.is:l_;function xo(t,r){if(Pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Pn(t[h],r[h]))return!1}return!0}function Ff(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bf(t,r){var o=Ff(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ff(o)}}function jf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?jf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Uf(){for(var t=window,r=Tr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Tr(t.document)}return r}function Fu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function u_(t){var r=Uf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&jf(o.ownerDocument.documentElement,o)){if(u!==null&&Fu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=bf(o,p);var _=bf(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var c_=m&&"documentMode"in document&&11>=document.documentMode,vs=null,bu=null,Vo=null,ju=!1;function zf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ju||vs==null||vs!==Tr(u)||(u=vs,"selectionStart"in u&&Fu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vo&&xo(Vo,u)||(Vo=u,u=Ya(bu,"onSelect"),0<u.length&&(r=new hs("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=vs)))}function Ga(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Es={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},Uu={},Bf={};m&&(Bf=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Qa(t){if(Uu[t])return Uu[t];if(!Es[t])return t;var r=Es[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Bf)return Uu[t]=r[o];return t}var $f=Qa("animationend"),qf=Qa("animationiteration"),Hf=Qa("animationstart"),Wf=Qa("transitionend"),Gf=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,r){Gf.set(t,r),c(r,[t])}for(var zu=0;zu<Qf.length;zu++){var Bu=Qf[zu],h_=Bu.toLowerCase(),f_=Bu[0].toUpperCase()+Bu.slice(1);Dr(h_,"on"+f_)}Dr($f,"onAnimationEnd"),Dr(qf,"onAnimationIteration"),Dr(Hf,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Wf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d_=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Kf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,Sa(u,r,void 0,t),t.currentTarget=null}function Yf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],P=T.instance,j=T.currentTarget;if(T=T.listener,P!==p&&h.isPropagationStopped())break e;Kf(h,T,j),p=P}else for(_=0;_<u.length;_++){if(T=u[_],P=T.instance,j=T.currentTarget,T=T.listener,P!==p&&h.isPropagationStopped())break e;Kf(h,T,j),p=P}}}if(En)throw t=go,En=!1,go=null,t}function We(t,r){var o=r[Yu];o===void 0&&(o=r[Yu]=new Set);var u=t+"__bubble";o.has(u)||(Xf(r,t,2,!1),o.add(u))}function $u(t,r,o){var u=0;r&&(u|=4),Xf(o,t,u,r)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[Ka]){t[Ka]=!0,s.forEach(function(o){o!=="selectionchange"&&(d_.has(o)||$u(o,!1,t),$u(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ka]||(r[Ka]=!0,$u("selectionchange",!1,r))}}function Xf(t,r,o,u){switch(Io(r)){case 1:var h=Ke;break;case 4:h=Du;break;default:h=To}o=h.bind(null,r,o,t),h=void 0,!es||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function qu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===h||P.nodeType===8&&P.parentNode===h))return;_=_.return}for(;T!==null;){if(_=Si(T),_===null)return;if(P=_.tag,P===5||P===6){u=p=_;continue e}T=T.parentNode}}u=u.return}mo(function(){var j=p,Q=Xi(o),K=[];e:{var G=Gf.get(t);if(G!==void 0){var te=hs,oe=t;switch(t){case"keypress":if(cs(o)===0)break e;case"keydown":case"keyup":te=d;break;case"focusin":oe="focus",te=ms;break;case"focusout":oe="blur",te=ms;break;case"beforeblur":case"afterblur":te=ms;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=ds;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=U;break;case $f:case qf:case Hf:te=cr;break;case Wf:te=je;break;case"scroll":te=Mu;break;case"wheel":te=xe;break;case"copy":case"cut":case"paste":te=Ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=E}var ae=(r&4)!==0,rt=!ae&&t==="scroll",F=ae?G!==null?G+"Capture":null:G;ae=[];for(var k=j,b;k!==null;){b=k;var X=b.stateNode;if(b.tag===5&&X!==null&&(b=X,F!==null&&(X=nt(k,F),X!=null&&ae.push(Mo(k,X,b)))),rt)break;k=k.return}0<ae.length&&(G=new te(G,oe,null,o,Q),K.push({event:G,listeners:ae}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",G&&o!==hi&&(oe=o.relatedTarget||o.fromElement)&&(Si(oe)||oe[hr]))break e;if((te||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,te?(oe=o.relatedTarget||o.toElement,te=j,oe=oe?Si(oe):null,oe!==null&&(rt=wn(oe),oe!==rt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(te=null,oe=j),te!==oe)){if(ae=ds,X="onMouseLeave",F="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ae=E,X="onPointerLeave",F="onPointerEnter",k="pointer"),rt=te==null?G:Is(te),b=oe==null?G:Is(oe),G=new ae(X,k+"leave",te,o,Q),G.target=rt,G.relatedTarget=b,X=null,Si(Q)===j&&(ae=new ae(F,k+"enter",oe,o,Q),ae.target=b,ae.relatedTarget=rt,X=ae),rt=X,te&&oe)t:{for(ae=te,F=oe,k=0,b=ae;b;b=ws(b))k++;for(b=0,X=F;X;X=ws(X))b++;for(;0<k-b;)ae=ws(ae),k--;for(;0<b-k;)F=ws(F),b--;for(;k--;){if(ae===F||F!==null&&ae===F.alternate)break t;ae=ws(ae),F=ws(F)}ae=null}else ae=null;te!==null&&Jf(K,G,te,ae,!1),oe!==null&&rt!==null&&Jf(K,rt,oe,ae,!0)}}e:{if(G=j?Is(j):window,te=G.nodeName&&G.nodeName.toLowerCase(),te==="select"||te==="input"&&G.type==="file")var ue=r_;else if(Vf(G))if(Df)ue=a_;else{ue=s_;var ye=i_}else(te=G.nodeName)&&te.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ue=o_);if(ue&&(ue=ue(t,j))){Nf(K,ue,o,Q);break e}ye&&ye(t,G,j),t==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&Qi(G,"number",G.value)}switch(ye=j?Is(j):window,t){case"focusin":(Vf(ye)||ye.contentEditable==="true")&&(vs=ye,bu=j,Vo=null);break;case"focusout":Vo=bu=vs=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,zf(K,o,Q);break;case"selectionchange":if(c_)break;case"keydown":case"keyup":zf(K,o,Q)}var _e;if(st)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else _s?kf(t,o)&&(Ee="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ii&&o.locale!=="ko"&&(_s||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&_s&&(_e=So()):(tn=Q,us="value"in tn?tn.value:tn.textContent,_s=!0)),ye=Ya(j,Ee),0<ye.length&&(Ee=new Ro(Ee,t,null,o,Q),K.push({event:Ee,listeners:ye}),_e?Ee.data=_e:(_e=xf(o),_e!==null&&(Ee.data=_e)))),(_e=nn?Zy(t,o):e_(t,o))&&(j=Ya(j,"onBeforeInput"),0<j.length&&(Q=new Ro("onBeforeInput","beforeinput",null,o,Q),K.push({event:Q,listeners:j}),Q.data=_e))}Yf(K,r)})}function Mo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ya(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nt(t,o),p!=null&&u.unshift(Mo(t,p,h)),p=nt(t,r),p!=null&&u.push(Mo(t,p,h))),t=t.return}return u}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,P=T.alternate,j=T.stateNode;if(P!==null&&P===u)break;T.tag===5&&j!==null&&(T=j,h?(P=nt(o,p),P!=null&&_.unshift(Mo(o,P,T))):h||(P=nt(o,p),P!=null&&_.push(Mo(o,P,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var p_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function Zf(t){return(typeof t=="string"?t:""+t).replace(p_,`
`).replace(m_,"")}function Xa(t,r,o){if(r=Zf(r),Zf(t)!==r&&o)throw Error(n(425))}function Ja(){}var Hu=null,Wu=null;function Gu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qu=typeof setTimeout=="function"?setTimeout:void 0,g_=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,y_=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(t){return ed.resolve(null).then(t).catch(__)}:Qu;function __(t){setTimeout(function(){throw t})}function Ku(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Cn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Cn(r)}function Mr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function td(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),$n="__reactFiber$"+Ts,Oo="__reactProps$"+Ts,hr="__reactContainer$"+Ts,Yu="__reactEvents$"+Ts,v_="__reactListeners$"+Ts,E_="__reactHandles$"+Ts;function Si(t){var r=t[$n];if(r)return r;for(var o=t.parentNode;o;){if(r=o[hr]||o[$n]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=td(t);t!==null;){if(o=t[$n])return o;t=td(t)}return r}t=o,o=t.parentNode}return null}function Lo(t){return t=t[$n]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Za(t){return t[Oo]||null}var Xu=[],Ss=-1;function Or(t){return{current:t}}function Ge(t){0>Ss||(t.current=Xu[Ss],Xu[Ss]=null,Ss--)}function qe(t,r){Ss++,Xu[Ss]=t.current,t.current=r}var Lr={},Nt=Or(Lr),Ht=Or(!1),Ai=Lr;function As(t,r){var o=t.type.contextTypes;if(!o)return Lr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Wt(t){return t=t.childContextTypes,t!=null}function el(){Ge(Ht),Ge(Nt)}function nd(t,r,o){if(Nt.current!==Lr)throw Error(n(168));qe(Nt,r),qe(Ht,o)}function rd(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ne({},o,u)}function tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lr,Ai=Nt.current,qe(Nt,t),qe(Ht,Ht.current),!0}function id(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=rd(t,r,Ai),u.__reactInternalMemoizedMergedChildContext=t,Ge(Ht),Ge(Nt),qe(Nt,t)):Ge(Ht),qe(Ht,o)}var fr=null,nl=!1,Ju=!1;function sd(t){fr===null?fr=[t]:fr.push(t)}function w_(t){nl=!0,sd(t)}function Fr(){if(!Ju&&fr!==null){Ju=!0;var t=0,r=Pe;try{var o=fr;for(Pe=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}fr=null,nl=!1}catch(h){throw fr!==null&&(fr=fr.slice(t+1)),is(gi,Fr),h}finally{Pe=r,Ju=!1}}return null}var Cs=[],Rs=0,rl=null,il=0,fn=[],dn=0,Ci=null,dr=1,pr="";function Ri(t,r){Cs[Rs++]=il,Cs[Rs++]=rl,rl=t,il=r}function od(t,r,o){fn[dn++]=dr,fn[dn++]=pr,fn[dn++]=Ci,Ci=t;var u=dr;t=pr;var h=32-jt(u)-1;u&=~(1<<h),o+=1;var p=32-jt(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,dr=1<<32-jt(r)+h|o<<h|u,pr=p+t}else dr=1<<p|o<<h|u,pr=t}function Zu(t){t.return!==null&&(Ri(t,1),od(t,1,0))}function ec(t){for(;t===rl;)rl=Cs[--Rs],Cs[Rs]=null,il=Cs[--Rs],Cs[Rs]=null;for(;t===Ci;)Ci=fn[--dn],fn[dn]=null,pr=fn[--dn],fn[dn]=null,dr=fn[--dn],fn[dn]=null}var rn=null,sn=null,Ye=!1,kn=null;function ad(t,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function ld(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,rn=t,sn=Mr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,rn=t,sn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ci!==null?{id:dr,overflow:pr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,rn=t,sn=null,!0):!1;default:return!1}}function tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nc(t){if(Ye){var r=sn;if(r){var o=r;if(!ld(t,r)){if(tc(t))throw Error(n(418));r=Mr(o.nextSibling);var u=rn;r&&ld(t,r)?ad(u,o):(t.flags=t.flags&-4097|2,Ye=!1,rn=t)}}else{if(tc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ye=!1,rn=t}}}function ud(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function sl(t){if(t!==rn)return!1;if(!Ye)return ud(t),Ye=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Gu(t.type,t.memoizedProps)),r&&(r=sn)){if(tc(t))throw cd(),Error(n(418));for(;r;)ad(t,r),r=Mr(r.nextSibling)}if(ud(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){sn=Mr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}sn=null}}else sn=rn?Mr(t.stateNode.nextSibling):null;return!0}function cd(){for(var t=sn;t;)t=Mr(t.nextSibling)}function Ps(){sn=rn=null,Ye=!1}function rc(t){kn===null?kn=[t]:kn.push(t)}var T_=ce.ReactCurrentBatchConfig;function Fo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=h.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ol(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function hd(t){var r=t._init;return r(t._payload)}function fd(t){function r(F,k){if(t){var b=F.deletions;b===null?(F.deletions=[k],F.flags|=16):b.push(k)}}function o(F,k){if(!t)return null;for(;k!==null;)r(F,k),k=k.sibling;return null}function u(F,k){for(F=new Map;k!==null;)k.key!==null?F.set(k.key,k):F.set(k.index,k),k=k.sibling;return F}function h(F,k){return F=Hr(F,k),F.index=0,F.sibling=null,F}function p(F,k,b){return F.index=b,t?(b=F.alternate,b!==null?(b=b.index,b<k?(F.flags|=2,k):b):(F.flags|=2,k)):(F.flags|=1048576,k)}function _(F){return t&&F.alternate===null&&(F.flags|=2),F}function T(F,k,b,X){return k===null||k.tag!==6?(k=Qc(b,F.mode,X),k.return=F,k):(k=h(k,b),k.return=F,k)}function P(F,k,b,X){var ue=b.type;return ue===V?Q(F,k,b.props.children,X,b.key):k!==null&&(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Vt&&hd(ue)===k.type)?(X=h(k,b.props),X.ref=Fo(F,k,b),X.return=F,X):(X=xl(b.type,b.key,b.props,null,F.mode,X),X.ref=Fo(F,k,b),X.return=F,X)}function j(F,k,b,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=Kc(b,F.mode,X),k.return=F,k):(k=h(k,b.children||[]),k.return=F,k)}function Q(F,k,b,X,ue){return k===null||k.tag!==7?(k=Oi(b,F.mode,X,ue),k.return=F,k):(k=h(k,b),k.return=F,k)}function K(F,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Qc(""+k,F.mode,b),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ie:return b=xl(k.type,k.key,k.props,null,F.mode,b),b.ref=Fo(F,null,k),b.return=F,b;case le:return k=Kc(k,F.mode,b),k.return=F,k;case Vt:var X=k._init;return K(F,X(k._payload),b)}if(nr(k)||ge(k))return k=Oi(k,F.mode,b,null),k.return=F,k;ol(F,k)}return null}function G(F,k,b,X){var ue=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return ue!==null?null:T(F,k,""+b,X);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ie:return b.key===ue?P(F,k,b,X):null;case le:return b.key===ue?j(F,k,b,X):null;case Vt:return ue=b._init,G(F,k,ue(b._payload),X)}if(nr(b)||ge(b))return ue!==null?null:Q(F,k,b,X,null);ol(F,b)}return null}function te(F,k,b,X,ue){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(b)||null,T(k,F,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case ie:return F=F.get(X.key===null?b:X.key)||null,P(k,F,X,ue);case le:return F=F.get(X.key===null?b:X.key)||null,j(k,F,X,ue);case Vt:var ye=X._init;return te(F,k,b,ye(X._payload),ue)}if(nr(X)||ge(X))return F=F.get(b)||null,Q(k,F,X,ue,null);ol(k,X)}return null}function oe(F,k,b,X){for(var ue=null,ye=null,_e=k,Ee=k=0,wt=null;_e!==null&&Ee<b.length;Ee++){_e.index>Ee?(wt=_e,_e=null):wt=_e.sibling;var Me=G(F,_e,b[Ee],X);if(Me===null){_e===null&&(_e=wt);break}t&&_e&&Me.alternate===null&&r(F,_e),k=p(Me,k,Ee),ye===null?ue=Me:ye.sibling=Me,ye=Me,_e=wt}if(Ee===b.length)return o(F,_e),Ye&&Ri(F,Ee),ue;if(_e===null){for(;Ee<b.length;Ee++)_e=K(F,b[Ee],X),_e!==null&&(k=p(_e,k,Ee),ye===null?ue=_e:ye.sibling=_e,ye=_e);return Ye&&Ri(F,Ee),ue}for(_e=u(F,_e);Ee<b.length;Ee++)wt=te(_e,F,Ee,b[Ee],X),wt!==null&&(t&&wt.alternate!==null&&_e.delete(wt.key===null?Ee:wt.key),k=p(wt,k,Ee),ye===null?ue=wt:ye.sibling=wt,ye=wt);return t&&_e.forEach(function(Wr){return r(F,Wr)}),Ye&&Ri(F,Ee),ue}function ae(F,k,b,X){var ue=ge(b);if(typeof ue!="function")throw Error(n(150));if(b=ue.call(b),b==null)throw Error(n(151));for(var ye=ue=null,_e=k,Ee=k=0,wt=null,Me=b.next();_e!==null&&!Me.done;Ee++,Me=b.next()){_e.index>Ee?(wt=_e,_e=null):wt=_e.sibling;var Wr=G(F,_e,Me.value,X);if(Wr===null){_e===null&&(_e=wt);break}t&&_e&&Wr.alternate===null&&r(F,_e),k=p(Wr,k,Ee),ye===null?ue=Wr:ye.sibling=Wr,ye=Wr,_e=wt}if(Me.done)return o(F,_e),Ye&&Ri(F,Ee),ue;if(_e===null){for(;!Me.done;Ee++,Me=b.next())Me=K(F,Me.value,X),Me!==null&&(k=p(Me,k,Ee),ye===null?ue=Me:ye.sibling=Me,ye=Me);return Ye&&Ri(F,Ee),ue}for(_e=u(F,_e);!Me.done;Ee++,Me=b.next())Me=te(_e,F,Ee,Me.value,X),Me!==null&&(t&&Me.alternate!==null&&_e.delete(Me.key===null?Ee:Me.key),k=p(Me,k,Ee),ye===null?ue=Me:ye.sibling=Me,ye=Me);return t&&_e.forEach(function(tv){return r(F,tv)}),Ye&&Ri(F,Ee),ue}function rt(F,k,b,X){if(typeof b=="object"&&b!==null&&b.type===V&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ie:e:{for(var ue=b.key,ye=k;ye!==null;){if(ye.key===ue){if(ue=b.type,ue===V){if(ye.tag===7){o(F,ye.sibling),k=h(ye,b.props.children),k.return=F,F=k;break e}}else if(ye.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Vt&&hd(ue)===ye.type){o(F,ye.sibling),k=h(ye,b.props),k.ref=Fo(F,ye,b),k.return=F,F=k;break e}o(F,ye);break}else r(F,ye);ye=ye.sibling}b.type===V?(k=Oi(b.props.children,F.mode,X,b.key),k.return=F,F=k):(X=xl(b.type,b.key,b.props,null,F.mode,X),X.ref=Fo(F,k,b),X.return=F,F=X)}return _(F);case le:e:{for(ye=b.key;k!==null;){if(k.key===ye)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){o(F,k.sibling),k=h(k,b.children||[]),k.return=F,F=k;break e}else{o(F,k);break}else r(F,k);k=k.sibling}k=Kc(b,F.mode,X),k.return=F,F=k}return _(F);case Vt:return ye=b._init,rt(F,k,ye(b._payload),X)}if(nr(b))return oe(F,k,b,X);if(ge(b))return ae(F,k,b,X);ol(F,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(o(F,k.sibling),k=h(k,b),k.return=F,F=k):(o(F,k),k=Qc(b,F.mode,X),k.return=F,F=k),_(F)):o(F,k)}return rt}var ks=fd(!0),dd=fd(!1),al=Or(null),ll=null,xs=null,ic=null;function sc(){ic=xs=ll=null}function oc(t){var r=al.current;Ge(al),t._currentValue=r}function ac(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Vs(t,r){ll=t,ic=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Gt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:r,next:null},xs===null){if(ll===null)throw Error(n(308));xs=t,ll.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return r}var Pi=null;function lc(t){Pi===null?Pi=[t]:Pi.push(t)}function pd(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,lc(r)):(o.next=h.next,h.next=o),r.interleaved=o,mr(t,u)}function mr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var br=!1;function uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function md(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function jr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,mr(t,o)}return h=u.interleaved,h===null?(r.next=r,lc(u)):(r.next=h.next,h.next=r),u.interleaved=r,mr(t,o)}function ul(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}function gd(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function cl(t,r,o,u){var h=t.updateQueue;br=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var P=T,j=P.next;P.next=null,_===null?p=j:_.next=j,_=P;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=j:T.next=j,Q.lastBaseUpdate=P))}if(p!==null){var K=h.baseState;_=0,Q=j=P=null,T=p;do{var G=T.lane,te=T.eventTime;if((u&G)===G){Q!==null&&(Q=Q.next={eventTime:te,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=t,ae=T;switch(G=r,te=o,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){K=oe.call(te,K,G);break e}K=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,G=typeof oe=="function"?oe.call(te,K,G):oe,G==null)break e;K=ne({},K,G);break e;case 2:br=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,G=h.effects,G===null?h.effects=[T]:G.push(T))}else te={eventTime:te,lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(j=Q=te,P=K):Q=Q.next=te,_|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);if(Q===null&&(P=K),h.baseState=P,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Vi|=_,t.lanes=_,t.memoizedState=K}}function yd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var bo={},qn=Or(bo),jo=Or(bo),Uo=Or(bo);function ki(t){if(t===bo)throw Error(n(174));return t}function cc(t,r){switch(qe(Uo,r),qe(jo,t),qe(qn,bo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ft(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ft(r,t)}Ge(qn),qe(qn,r)}function Ns(){Ge(qn),Ge(jo),Ge(Uo)}function _d(t){ki(Uo.current);var r=ki(qn.current),o=ft(r,t.type);r!==o&&(qe(jo,t),qe(qn,o))}function hc(t){jo.current===t&&(Ge(qn),Ge(jo))}var Xe=Or(0);function hl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var fc=[];function dc(){for(var t=0;t<fc.length;t++)fc[t]._workInProgressVersionPrimary=null;fc.length=0}var fl=ce.ReactCurrentDispatcher,pc=ce.ReactCurrentBatchConfig,xi=0,Je=null,pt=null,vt=null,dl=!1,zo=!1,Bo=0,I_=0;function Dt(){throw Error(n(321))}function mc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Pn(t[o],r[o]))return!1;return!0}function gc(t,r,o,u,h,p){if(xi=p,Je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,fl.current=t===null||t.memoizedState===null?R_:P_,t=o(u,h),zo){p=0;do{if(zo=!1,Bo=0,25<=p)throw Error(n(301));p+=1,vt=pt=null,r.updateQueue=null,fl.current=k_,t=o(u,h)}while(zo)}if(fl.current=gl,r=pt!==null&&pt.next!==null,xi=0,vt=pt=Je=null,dl=!1,r)throw Error(n(300));return t}function yc(){var t=Bo!==0;return Bo=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Je.memoizedState=vt=t:vt=vt.next=t,vt}function mn(){if(pt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var r=vt===null?Je.memoizedState:vt.next;if(r!==null)vt=r,pt=t;else{if(t===null)throw Error(n(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?Je.memoizedState=vt=t:vt=vt.next=t}return vt}function $o(t,r){return typeof r=="function"?r(t):r}function _c(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=pt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=_=null,P=null,j=p;do{var Q=j.lane;if((xi&Q)===Q)P!==null&&(P=P.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),u=j.hasEagerState?j.eagerState:t(u,j.action);else{var K={lane:Q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};P===null?(T=P=K,_=u):P=P.next=K,Je.lanes|=Q,Vi|=Q}j=j.next}while(j!==null&&j!==p);P===null?_=u:P.next=T,Pn(u,r.memoizedState)||(Gt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=P,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Je.lanes|=p,Vi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function vc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);Pn(p,r.memoizedState)||(Gt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function vd(){}function Ed(t,r){var o=Je,u=mn(),h=r(),p=!Pn(u.memoizedState,h);if(p&&(u.memoizedState=h,Gt=!0),u=u.queue,Ec(Id.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,qo(9,Td.bind(null,o,u,h,r),void 0,null),Et===null)throw Error(n(349));(xi&30)!==0||wd(o,r,h)}return h}function wd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Td(t,r,o,u){r.value=o,r.getSnapshot=u,Sd(r)&&Ad(t)}function Id(t,r,o){return o(function(){Sd(r)&&Ad(t)})}function Sd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Pn(t,o)}catch{return!0}}function Ad(t){var r=mr(t,1);r!==null&&Dn(r,t,1,-1)}function Cd(t){var r=Hn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},r.queue=t,t=t.dispatch=C_.bind(null,Je,t),[r.memoizedState,t]}function qo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Je.updateQueue,r===null?(r={lastEffect:null,stores:null},Je.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Rd(){return mn().memoizedState}function pl(t,r,o,u){var h=Hn();Je.flags|=t,h.memoizedState=qo(1|r,o,void 0,u===void 0?null:u)}function ml(t,r,o,u){var h=mn();u=u===void 0?null:u;var p=void 0;if(pt!==null){var _=pt.memoizedState;if(p=_.destroy,u!==null&&mc(u,_.deps)){h.memoizedState=qo(r,o,p,u);return}}Je.flags|=t,h.memoizedState=qo(1|r,o,p,u)}function Pd(t,r){return pl(8390656,8,t,r)}function Ec(t,r){return ml(2048,8,t,r)}function kd(t,r){return ml(4,2,t,r)}function xd(t,r){return ml(4,4,t,r)}function Vd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Nd(t,r,o){return o=o!=null?o.concat([t]):null,ml(4,4,Vd.bind(null,r,t),o)}function wc(){}function Dd(t,r){var o=mn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&mc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Md(t,r){var o=mn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&mc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Od(t,r,o){return(xi&21)===0?(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=o):(Pn(o,r)||(o=vi(),Je.lanes|=o,Vi|=o,t.baseState=!0),r)}function S_(t,r){var o=Pe;Pe=o!==0&&4>o?o:4,t(!0);var u=pc.transition;pc.transition={};try{t(!1),r()}finally{Pe=o,pc.transition=u}}function Ld(){return mn().memoizedState}function A_(t,r,o){var u=$r(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Fd(t))bd(r,o);else if(o=pd(t,r,o,u),o!==null){var h=Bt();Dn(o,t,u,h),jd(o,r,u)}}function C_(t,r,o){var u=$r(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fd(t))bd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(h.hasEagerState=!0,h.eagerState=T,Pn(T,_)){var P=r.interleaved;P===null?(h.next=h,lc(r)):(h.next=P.next,P.next=h),r.interleaved=h;return}}catch{}finally{}o=pd(t,r,h,u),o!==null&&(h=Bt(),Dn(o,t,u,h),jd(o,r,u))}}function Fd(t){var r=t.alternate;return t===Je||r!==null&&r===Je}function bd(t,r){zo=dl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function jd(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}var gl={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},R_={readContext:pn,useCallback:function(t,r){return Hn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:Pd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,pl(4194308,4,Vd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return pl(4194308,4,t,r)},useInsertionEffect:function(t,r){return pl(4,2,t,r)},useMemo:function(t,r){var o=Hn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Hn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=A_.bind(null,Je,t),[u.memoizedState,t]},useRef:function(t){var r=Hn();return t={current:t},r.memoizedState=t},useState:Cd,useDebugValue:wc,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=Cd(!1),r=t[0];return t=S_.bind(null,t[1]),Hn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Je,h=Hn();if(Ye){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Et===null)throw Error(n(349));(xi&30)!==0||wd(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Pd(Id.bind(null,u,p,t),[t]),u.flags|=2048,qo(9,Td.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Hn(),r=Et.identifierPrefix;if(Ye){var o=pr,u=dr;o=(u&~(1<<32-jt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Bo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=I_++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},P_={readContext:pn,useCallback:Dd,useContext:pn,useEffect:Ec,useImperativeHandle:Nd,useInsertionEffect:kd,useLayoutEffect:xd,useMemo:Md,useReducer:_c,useRef:Rd,useState:function(){return _c($o)},useDebugValue:wc,useDeferredValue:function(t){var r=mn();return Od(r,pt.memoizedState,t)},useTransition:function(){var t=_c($o)[0],r=mn().memoizedState;return[t,r]},useMutableSource:vd,useSyncExternalStore:Ed,useId:Ld,unstable_isNewReconciler:!1},k_={readContext:pn,useCallback:Dd,useContext:pn,useEffect:Ec,useImperativeHandle:Nd,useInsertionEffect:kd,useLayoutEffect:xd,useMemo:Md,useReducer:vc,useRef:Rd,useState:function(){return vc($o)},useDebugValue:wc,useDeferredValue:function(t){var r=mn();return pt===null?r.memoizedState=t:Od(r,pt.memoizedState,t)},useTransition:function(){var t=vc($o)[0],r=mn().memoizedState;return[t,r]},useMutableSource:vd,useSyncExternalStore:Ed,useId:Ld,unstable_isNewReconciler:!1};function xn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Tc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var yl={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=$r(t),p=gr(u,h);p.payload=r,o!=null&&(p.callback=o),r=jr(t,p,h),r!==null&&(Dn(r,t,h,u),ul(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=$r(t),p=gr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=jr(t,p,h),r!==null&&(Dn(r,t,h,u),ul(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),u=$r(t),h=gr(o,u);h.tag=2,r!=null&&(h.callback=r),r=jr(t,h,u),r!==null&&(Dn(r,t,u,o),ul(r,t,u))}};function Ud(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!xo(o,u)||!xo(h,p):!0}function zd(t,r,o){var u=!1,h=Lr,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(h=Wt(r)?Ai:Nt.current,u=r.contextTypes,p=(u=u!=null)?As(t,h):Lr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=yl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Bd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&yl.enqueueReplaceState(r,r.state,null)}function Ic(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},uc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=pn(p):(p=Wt(r)?Ai:Nt.current,h.context=As(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Tc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&yl.enqueueReplaceState(h,h.state,null),cl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,r){try{var o="",u=r;do o+=Se(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Sc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Ac(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var x_=typeof WeakMap=="function"?WeakMap:Map;function $d(t,r,o){o=gr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Sl||(Sl=!0,Uc=u),Ac(t,r)},o}function qd(t,r,o){o=gr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Ac(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Ac(t,r),typeof u!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Hd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new x_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=q_.bind(null,t,r,o),r.then(t,t))}function Wd(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Gd(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=gr(-1,1),r.tag=2,jr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var V_=ce.ReactCurrentOwner,Gt=!1;function zt(t,r,o,u){r.child=t===null?dd(r,null,o,u):ks(r,t.child,o,u)}function Qd(t,r,o,u,h){o=o.render;var p=r.ref;return Vs(r,h),u=gc(t,r,o,u,p,h),o=yc(),t!==null&&!Gt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,yr(t,r,h)):(Ye&&o&&Zu(r),r.flags|=1,zt(t,r,u,h),r.child)}function Kd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Gc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Yd(t,r,p,u,h)):(t=xl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:xo,o(_,u)&&t.ref===r.ref)return yr(t,r,h)}return r.flags|=1,t=Hr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Yd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(xo(p,u)&&t.ref===r.ref)if(Gt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Gt=!0);else return r.lanes=t.lanes,yr(t,r,h)}return Cc(t,r,o,u,h)}function Xd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Os,on),on|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(Os,on),on|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(Os,on),on|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(Os,on),on|=u;return zt(t,r,h,o),r.child}function Jd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Cc(t,r,o,u,h){var p=Wt(o)?Ai:Nt.current;return p=As(r,p),Vs(r,h),o=gc(t,r,o,u,p,h),u=yc(),t!==null&&!Gt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,yr(t,r,h)):(Ye&&u&&Zu(r),r.flags|=1,zt(t,r,o,h),r.child)}function Zd(t,r,o,u,h){if(Wt(o)){var p=!0;tl(r)}else p=!1;if(Vs(r,h),r.stateNode===null)vl(t,r),zd(r,o,u),Ic(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var P=_.context,j=o.contextType;typeof j=="object"&&j!==null?j=pn(j):(j=Wt(o)?Ai:Nt.current,j=As(r,j));var Q=o.getDerivedStateFromProps,K=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";K||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||P!==j)&&Bd(r,_,u,j),br=!1;var G=r.memoizedState;_.state=G,cl(r,u,_,h),P=r.memoizedState,T!==u||G!==P||Ht.current||br?(typeof Q=="function"&&(Tc(r,o,Q,u),P=r.memoizedState),(T=br||Ud(r,o,T,u,G,P,j))?(K||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),_.props=u,_.state=P,_.context=j,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,md(t,r),T=r.memoizedProps,j=r.type===r.elementType?T:xn(r.type,T),_.props=j,K=r.pendingProps,G=_.context,P=o.contextType,typeof P=="object"&&P!==null?P=pn(P):(P=Wt(o)?Ai:Nt.current,P=As(r,P));var te=o.getDerivedStateFromProps;(Q=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==K||G!==P)&&Bd(r,_,u,P),br=!1,G=r.memoizedState,_.state=G,cl(r,u,_,h);var oe=r.memoizedState;T!==K||G!==oe||Ht.current||br?(typeof te=="function"&&(Tc(r,o,te,u),oe=r.memoizedState),(j=br||Ud(r,o,j,u,G,oe,P)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,oe,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,oe,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=oe),_.props=u,_.state=oe,_.context=P,u=j):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),u=!1)}return Rc(t,r,o,u,p,h)}function Rc(t,r,o,u,h,p){Jd(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&id(r,o,!1),yr(t,r,p);u=r.stateNode,V_.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=ks(r,t.child,null,p),r.child=ks(r,null,T,p)):zt(t,r,T,p),r.memoizedState=u.state,h&&id(r,o,!0),r.child}function ep(t){var r=t.stateNode;r.pendingContext?nd(t,r.pendingContext,r.pendingContext!==r.context):r.context&&nd(t,r.context,!1),cc(t,r.containerInfo)}function tp(t,r,o,u,h){return Ps(),rc(h),r.flags|=256,zt(t,r,o,u),r.child}var Pc={dehydrated:null,treeContext:null,retryLane:0};function kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function np(t,r,o){var u=r.pendingProps,h=Xe.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qe(Xe,h&1),t===null)return nc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Vl(_,u,0,null),t=Oi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=kc(o),r.memoizedState=Pc,t):xc(r,_));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return N_(t,r,_,u,T,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,T=h.sibling;var P={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=P,r.deletions=null):(u=Hr(h,P),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Hr(T,p):(p=Oi(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?kc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Pc,u}return p=t.child,t=p.sibling,u=Hr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function xc(t,r){return r=Vl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function _l(t,r,o,u){return u!==null&&rc(u),ks(r,t.child,null,o),t=xc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function N_(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=Sc(Error(n(422))),_l(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Vl({mode:"visible",children:u.children},h,0,null),p=Oi(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&ks(r,t.child,null,_),r.child.memoizedState=kc(_),r.memoizedState=Pc,p);if((r.mode&1)===0)return _l(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=Sc(p,u,void 0),_l(t,r,_,u)}if(T=(_&t.childLanes)!==0,Gt||T){if(u=Et,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,mr(t,h),Dn(u,t,h,-1))}return Wc(),u=Sc(Error(n(421))),_l(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=H_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,sn=Mr(h.nextSibling),rn=r,Ye=!0,kn=null,t!==null&&(fn[dn++]=dr,fn[dn++]=pr,fn[dn++]=Ci,dr=t.id,pr=t.overflow,Ci=r),r=xc(r,u.children),r.flags|=4096,r)}function rp(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),ac(t.return,r,o)}function Vc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function ip(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Xe.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rp(t,o,r);else if(t.tag===19)rp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Xe,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&hl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Vc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&hl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Vc(r,!0,o,null,p);break;case"together":Vc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function vl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function yr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Vi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Hr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Hr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function D_(t,r,o){switch(r.tag){case 3:ep(r),Ps();break;case 5:_d(r);break;case 1:Wt(r.type)&&tl(r);break;case 4:cc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;qe(al,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Xe,Xe.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?np(t,r,o):(qe(Xe,Xe.current&1),t=yr(t,r,o),t!==null?t.sibling:null);qe(Xe,Xe.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return ip(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Xe,Xe.current),u)break;return null;case 22:case 23:return r.lanes=0,Xd(t,r,o)}return yr(t,r,o)}var sp,Nc,op,ap;sp=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Nc=function(){},op=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,ki(qn.current);var p=null;switch(o){case"input":h=li(t,h),u=li(t,u),p=[];break;case"select":h=ne({},h,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":h=io(t,h),u=io(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ja)}co(o,u);var _;o=null;for(j in h)if(!u.hasOwnProperty(j)&&h.hasOwnProperty(j)&&h[j]!=null)if(j==="style"){var T=h[j];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(a.hasOwnProperty(j)?p||(p=[]):(p=p||[]).push(j,null));for(j in u){var P=u[j];if(T=h?.[j],u.hasOwnProperty(j)&&P!==T&&(P!=null||T!=null))if(j==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in P)P.hasOwnProperty(_)&&T[_]!==P[_]&&(o||(o={}),o[_]=P[_])}else o||(p||(p=[]),p.push(j,o)),o=P;else j==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(p=p||[]).push(j,P)):j==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(j,""+P):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(a.hasOwnProperty(j)?(P!=null&&j==="onScroll"&&We("scroll",t),p||T===P||(p=[])):(p=p||[]).push(j,P))}o&&(p=p||[]).push("style",o);var j=p;(r.updateQueue=j)&&(r.flags|=4)}},ap=function(t,r,o,u){o!==u&&(r.flags|=4)};function Ho(t,r){if(!Ye)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function M_(t,r,o){var u=r.pendingProps;switch(ec(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Wt(r.type)&&el(),Mt(r),null;case 3:return u=r.stateNode,Ns(),Ge(Ht),Ge(Nt),dc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(sl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kn!==null&&($c(kn),kn=null))),Nc(t,r),Mt(r),null;case 5:hc(r);var h=ki(Uo.current);if(o=r.type,t!==null&&r.stateNode!=null)op(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Mt(r),null}if(t=ki(qn.current),sl(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[$n]=r,u[Oo]=p,t=(r.mode&1)!==0,o){case"dialog":We("cancel",u),We("close",u);break;case"iframe":case"object":case"embed":We("load",u);break;case"video":case"audio":for(h=0;h<No.length;h++)We(No[h],u);break;case"source":We("error",u);break;case"img":case"image":case"link":We("error",u),We("load",u);break;case"details":We("toggle",u);break;case"input":Gi(u,p),We("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},We("invalid",u);break;case"textarea":Ki(u,p),We("invalid",u)}co(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Xa(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Xa(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&We("scroll",u)}switch(o){case"input":tr(u),Ia(u,p,!0);break;case"textarea":tr(u),so(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ja)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ht(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[$n]=r,t[Oo]=u,sp(t,r,!1,!1),r.stateNode=t;e:{switch(_=ho(o,u),o){case"dialog":We("cancel",t),We("close",t),h=u;break;case"iframe":case"object":case"embed":We("load",t),h=u;break;case"video":case"audio":for(h=0;h<No.length;h++)We(No[h],t);h=u;break;case"source":We("error",t),h=u;break;case"img":case"image":case"link":We("error",t),We("load",t),h=u;break;case"details":We("toggle",t),h=u;break;case"input":Gi(t,u),h=li(t,u),We("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ne({},u,{value:void 0}),We("invalid",t);break;case"textarea":Ki(t,u),h=io(t,u),We("invalid",t);break;default:h=u}co(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var P=T[p];p==="style"?lo(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&oo(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Ir(t,P):typeof P=="number"&&Ir(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&We("scroll",t):P!=null&&de(t,p,P,_))}switch(o){case"input":tr(t),Ia(t,u,!1);break;case"textarea":tr(t),so(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Fe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?rr(t,!!u.multiple,p,!1):u.defaultValue!=null&&rr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ja)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(t&&r.stateNode!=null)ap(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=ki(Uo.current),ki(qn.current),sl(r)){if(u=r.stateNode,o=r.memoizedProps,u[$n]=r,(p=u.nodeValue!==o)&&(t=rn,t!==null))switch(t.tag){case 3:Xa(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[$n]=r,r.stateNode=u}return Mt(r),null;case 13:if(Ge(Xe),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&sn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)cd(),Ps(),r.flags|=98560,p=!1;else if(p=sl(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[$n]=r}else Ps(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else kn!==null&&($c(kn),kn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Xe.current&1)!==0?mt===0&&(mt=3):Wc())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Ns(),Nc(t,r),t===null&&Do(r.stateNode.containerInfo),Mt(r),null;case 10:return oc(r.type._context),Mt(r),null;case 17:return Wt(r.type)&&el(),Mt(r),null;case 19:if(Ge(Xe),p=r.memoizedState,p===null)return Mt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Ho(p,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=hl(t),_!==null){for(r.flags|=128,Ho(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Xe,Xe.current&1|2),r.child}t=t.sibling}p.tail!==null&&$e()>Ls&&(r.flags|=128,u=!0,Ho(p,!1),r.lanes=4194304)}else{if(!u)if(t=hl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Ho(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ye)return Mt(r),null}else 2*$e()-p.renderingStartTime>Ls&&o!==1073741824&&(r.flags|=128,u=!0,Ho(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=$e(),r.sibling=null,o=Xe.current,qe(Xe,u?o&1|2:o&1),r):(Mt(r),null);case 22:case 23:return Hc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(on&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function O_(t,r){switch(ec(r),r.tag){case 1:return Wt(r.type)&&el(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ns(),Ge(Ht),Ge(Nt),dc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return hc(r),null;case 13:if(Ge(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ps()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ge(Xe),null;case 4:return Ns(),null;case 10:return oc(r.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var El=!1,Ot=!1,L_=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ms(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){et(t,r,u)}else o.current=null}function Dc(t,r,o){try{o()}catch(u){et(t,r,u)}}var lp=!1;function F_(t,r){if(Hu=Vr,t=Uf(),Fu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,P=-1,j=0,Q=0,K=t,G=null;t:for(;;){for(var te;K!==o||h!==0&&K.nodeType!==3||(T=_+h),K!==p||u!==0&&K.nodeType!==3||(P=_+u),K.nodeType===3&&(_+=K.nodeValue.length),(te=K.firstChild)!==null;)G=K,K=te;for(;;){if(K===t)break t;if(G===o&&++j===h&&(T=_),G===p&&++Q===u&&(P=_),(te=K.nextSibling)!==null)break;K=G,G=K.parentNode}K=te}o=T===-1||P===-1?null:{start:T,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Wu={focusedElem:t,selectionRange:o},Vr=!1,se=r;se!==null;)if(r=se,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,se=t;else for(;se!==null;){r=se;try{var oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,rt=oe.memoizedState,F=r.stateNode,k=F.getSnapshotBeforeUpdate(r.elementType===r.type?ae:xn(r.type,ae),rt);F.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){et(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,se=t;break}se=r.return}return oe=lp,lp=!1,oe}function Wo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Dc(r,o,p)}h=h.next}while(h!==u)}}function wl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Mc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function up(t){var r=t.alternate;r!==null&&(t.alternate=null,up(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[$n],delete r[Oo],delete r[Yu],delete r[v_],delete r[E_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cp(t){return t.tag===5||t.tag===3||t.tag===4}function hp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ja));else if(u!==4&&(t=t.child,t!==null))for(Oc(t,r,o),t=t.sibling;t!==null;)Oc(t,r,o),t=t.sibling}function Lc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Lc(t,r,o),t=t.sibling;t!==null;)Lc(t,r,o),t=t.sibling}var At=null,Vn=!1;function Ur(t,r,o){for(o=o.child;o!==null;)fp(t,r,o),o=o.sibling}function fp(t,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(yi,o)}catch{}switch(o.tag){case 5:Ot||Ms(o,r);case 6:var u=At,h=Vn;At=null,Ur(t,r,o),At=u,Vn=h,At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):At.removeChild(o.stateNode));break;case 18:At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?Ku(t.parentNode,o):t.nodeType===1&&Ku(t,o),Cn(t)):Ku(At,o.stateNode));break;case 4:u=At,h=Vn,At=o.stateNode.containerInfo,Vn=!0,Ur(t,r,o),At=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Dc(o,r,_),h=h.next}while(h!==u)}Ur(t,r,o);break;case 1:if(!Ot&&(Ms(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){et(o,r,T)}Ur(t,r,o);break;case 21:Ur(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Ur(t,r,o),Ot=u):Ur(t,r,o);break;default:Ur(t,r,o)}}function dp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new L_),r.forEach(function(u){var h=W_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Nn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:At=T.stateNode,Vn=!1;break e;case 3:At=T.stateNode.containerInfo,Vn=!0;break e;case 4:At=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(At===null)throw Error(n(160));fp(p,_,h),At=null,Vn=!1;var P=h.alternate;P!==null&&(P.return=null),h.return=null}catch(j){et(h,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)pp(r,t),r=r.sibling}function pp(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(r,t),Wn(t),u&4){try{Wo(3,t,t.return),wl(3,t)}catch(ae){et(t,t.return,ae)}try{Wo(5,t,t.return)}catch(ae){et(t,t.return,ae)}}break;case 1:Nn(r,t),Wn(t),u&512&&o!==null&&Ms(o,o.return);break;case 5:if(Nn(r,t),Wn(t),u&512&&o!==null&&Ms(o,o.return),t.flags&32){var h=t.stateNode;try{Ir(h,"")}catch(ae){et(t,t.return,ae)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&no(h,p),ho(T,_);var j=ho(T,p);for(_=0;_<P.length;_+=2){var Q=P[_],K=P[_+1];Q==="style"?lo(h,K):Q==="dangerouslySetInnerHTML"?oo(h,K):Q==="children"?Ir(h,K):de(h,Q,K,j)}switch(T){case"input":ro(h,p);break;case"textarea":Yi(h,p);break;case"select":var G=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var te=p.value;te!=null?rr(h,!!p.multiple,te,!1):G!==!!p.multiple&&(p.defaultValue!=null?rr(h,!!p.multiple,p.defaultValue,!0):rr(h,!!p.multiple,p.multiple?[]:"",!1))}h[Oo]=p}catch(ae){et(t,t.return,ae)}}break;case 6:if(Nn(r,t),Wn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ae){et(t,t.return,ae)}}break;case 3:if(Nn(r,t),Wn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Cn(r.containerInfo)}catch(ae){et(t,t.return,ae)}break;case 4:Nn(r,t),Wn(t);break;case 13:Nn(r,t),Wn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(jc=$e())),u&4&&dp(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(j=Ot)||Q,Nn(r,t),Ot=j):Nn(r,t),Wn(t),u&8192){if(j=t.memoizedState!==null,(t.stateNode.isHidden=j)&&!Q&&(t.mode&1)!==0)for(se=t,Q=t.child;Q!==null;){for(K=se=Q;se!==null;){switch(G=se,te=G.child,G.tag){case 0:case 11:case 14:case 15:Wo(4,G,G.return);break;case 1:Ms(G,G.return);var oe=G.stateNode;if(typeof oe.componentWillUnmount=="function"){u=G,o=G.return;try{r=u,oe.props=r.memoizedProps,oe.state=r.memoizedState,oe.componentWillUnmount()}catch(ae){et(u,o,ae)}}break;case 5:Ms(G,G.return);break;case 22:if(G.memoizedState!==null){yp(K);continue}}te!==null?(te.return=G,se=te):yp(K)}Q=Q.sibling}e:for(Q=null,K=t;;){if(K.tag===5){if(Q===null){Q=K;try{h=K.stateNode,j?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=K.stateNode,P=K.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=ao("display",_))}catch(ae){et(t,t.return,ae)}}}else if(K.tag===6){if(Q===null)try{K.stateNode.nodeValue=j?"":K.memoizedProps}catch(ae){et(t,t.return,ae)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===t)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===t)break e;for(;K.sibling===null;){if(K.return===null||K.return===t)break e;Q===K&&(Q=null),K=K.return}Q===K&&(Q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Nn(r,t),Wn(t),u&4&&dp(t);break;case 21:break;default:Nn(r,t),Wn(t)}}function Wn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(cp(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ir(h,""),u.flags&=-33);var p=hp(t);Lc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,T=hp(t);Oc(t,T,_);break;default:throw Error(n(161))}}catch(P){et(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function b_(t,r,o){se=t,mp(t)}function mp(t,r,o){for(var u=(t.mode&1)!==0;se!==null;){var h=se,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||El;if(!_){var T=h.alternate,P=T!==null&&T.memoizedState!==null||Ot;T=El;var j=Ot;if(El=_,(Ot=P)&&!j)for(se=h;se!==null;)_=se,P=_.child,_.tag===22&&_.memoizedState!==null?_p(h):P!==null?(P.return=_,se=P):_p(h);for(;p!==null;)se=p,mp(p),p=p.sibling;se=h,El=T,Ot=j}gp(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,se=p):gp(t)}}function gp(t){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||wl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:xn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&yd(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}yd(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var Q=j.memoizedState;if(Q!==null){var K=Q.dehydrated;K!==null&&Cn(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Mc(r)}catch(G){et(r,r.return,G)}}if(r===t){se=null;break}if(o=r.sibling,o!==null){o.return=r.return,se=o;break}se=r.return}}function yp(t){for(;se!==null;){var r=se;if(r===t){se=null;break}var o=r.sibling;if(o!==null){o.return=r.return,se=o;break}se=r.return}}function _p(t){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{wl(4,r)}catch(P){et(r,o,P)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(P){et(r,h,P)}}var p=r.return;try{Mc(r)}catch(P){et(r,p,P)}break;case 5:var _=r.return;try{Mc(r)}catch(P){et(r,_,P)}}}catch(P){et(r,r.return,P)}if(r===t){se=null;break}var T=r.sibling;if(T!==null){T.return=r.return,se=T;break}se=r.return}}var j_=Math.ceil,Tl=ce.ReactCurrentDispatcher,Fc=ce.ReactCurrentOwner,gn=ce.ReactCurrentBatchConfig,De=0,Et=null,ot=null,Ct=0,on=0,Os=Or(0),mt=0,Go=null,Vi=0,Il=0,bc=0,Qo=null,Qt=null,jc=0,Ls=1/0,_r=null,Sl=!1,Uc=null,zr=null,Al=!1,Br=null,Cl=0,Ko=0,zc=null,Rl=-1,Pl=0;function Bt(){return(De&6)!==0?$e():Rl!==-1?Rl:Rl=$e()}function $r(t){return(t.mode&1)===0?1:(De&2)!==0&&Ct!==0?Ct&-Ct:T_.transition!==null?(Pl===0&&(Pl=vi()),Pl):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:Io(t.type)),t)}function Dn(t,r,o,u){if(50<Ko)throw Ko=0,zc=null,Error(n(185));Rr(t,o,u),((De&2)===0||t!==Et)&&(t===Et&&((De&2)===0&&(Il|=o),mt===4&&qr(t,Ct)),Kt(t,u),o===1&&De===0&&(r.mode&1)===0&&(Ls=$e()+500,nl&&Fr()))}function Kt(t,r){var o=t.callbackNode;or(t,r);var u=_i(t,t===Et?Ct:0);if(u===0)o!==null&&_o(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&_o(o),r===1)t.tag===0?w_(Ep.bind(null,t)):sd(Ep.bind(null,t)),y_(function(){(De&6)===0&&Fr()}),o=null;else{switch(kr(u)){case 1:o=gi;break;case 4:o=Sr;break;case 16:o=un;break;case 536870912:o=Pa;break;default:o=un}o=Pp(o,vp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function vp(t,r){if(Rl=-1,Pl=0,(De&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Fs()&&t.callbackNode!==o)return null;var u=_i(t,t===Et?Ct:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=kl(t,u);else{r=u;var h=De;De|=2;var p=Tp();(Et!==t||Ct!==r)&&(_r=null,Ls=$e()+500,Di(t,r));do try{B_();break}catch(T){wp(t,T)}while(!0);sc(),Tl.current=p,De=h,ot!==null?r=0:(Et=null,Ct=0,r=mt)}if(r!==0){if(r===2&&(h=en(t),h!==0&&(u=h,r=Bc(t,h))),r===1)throw o=Go,Di(t,0),qr(t,u),Kt(t,$e()),o;if(r===6)qr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!U_(h)&&(r=kl(t,u),r===2&&(p=en(t),p!==0&&(u=p,r=Bc(t,p))),r===1))throw o=Go,Di(t,0),qr(t,u),Kt(t,$e()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Mi(t,Qt,_r);break;case 3:if(qr(t,u),(u&130023424)===u&&(r=jc+500-$e(),10<r)){if(_i(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Bt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Qu(Mi.bind(null,t,Qt,_r),r);break}Mi(t,Qt,_r);break;case 4:if(qr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-jt(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=$e()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*j_(u/1960))-u,10<u){t.timeoutHandle=Qu(Mi.bind(null,t,Qt,_r),u);break}Mi(t,Qt,_r);break;case 5:Mi(t,Qt,_r);break;default:throw Error(n(329))}}}return Kt(t,$e()),t.callbackNode===o?vp.bind(null,t):null}function Bc(t,r){var o=Qo;return t.current.memoizedState.isDehydrated&&(Di(t,r).flags|=256),t=kl(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&$c(r)),t}function $c(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function U_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Pn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qr(t,r){for(r&=~bc,r&=~Il,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-jt(r),u=1<<o;t[o]=-1,r&=~u}}function Ep(t){if((De&6)!==0)throw Error(n(327));Fs();var r=_i(t,0);if((r&1)===0)return Kt(t,$e()),null;var o=kl(t,r);if(t.tag!==0&&o===2){var u=en(t);u!==0&&(r=u,o=Bc(t,u))}if(o===1)throw o=Go,Di(t,0),qr(t,r),Kt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Mi(t,Qt,_r),Kt(t,$e()),null}function qc(t,r){var o=De;De|=1;try{return t(r)}finally{De=o,De===0&&(Ls=$e()+500,nl&&Fr())}}function Ni(t){Br!==null&&Br.tag===0&&(De&6)===0&&Fs();var r=De;De|=1;var o=gn.transition,u=Pe;try{if(gn.transition=null,Pe=1,t)return t()}finally{Pe=u,gn.transition=o,De=r,(De&6)===0&&Fr()}}function Hc(){on=Os.current,Ge(Os)}function Di(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,g_(o)),ot!==null)for(o=ot.return;o!==null;){var u=o;switch(ec(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&el();break;case 3:Ns(),Ge(Ht),Ge(Nt),dc();break;case 5:hc(u);break;case 4:Ns();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:oc(u.type._context);break;case 22:case 23:Hc()}o=o.return}if(Et=t,ot=t=Hr(t.current,null),Ct=on=r,mt=0,Go=null,bc=Il=Vi=0,Qt=Qo=null,Pi!==null){for(r=0;r<Pi.length;r++)if(o=Pi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}Pi=null}return t}function wp(t,r){do{var o=ot;try{if(sc(),fl.current=gl,dl){for(var u=Je.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}dl=!1}if(xi=0,vt=pt=Je=null,zo=!1,Bo=0,Fc.current=null,o===null||o.return===null){mt=1,Go=r,ot=null;break}e:{var p=t,_=o.return,T=o,P=r;if(r=Ct,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=P,Q=T,K=Q.tag;if((Q.mode&1)===0&&(K===0||K===11||K===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var te=Wd(_);if(te!==null){te.flags&=-257,Gd(te,_,T,p,r),te.mode&1&&Hd(p,j,r),r=te,P=j;var oe=r.updateQueue;if(oe===null){var ae=new Set;ae.add(P),r.updateQueue=ae}else oe.add(P);break e}else{if((r&1)===0){Hd(p,j,r),Wc();break e}P=Error(n(426))}}else if(Ye&&T.mode&1){var rt=Wd(_);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Gd(rt,_,T,p,r),rc(Ds(P,T));break e}}p=P=Ds(P,T),mt!==4&&(mt=2),Qo===null?Qo=[p]:Qo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var F=$d(p,P,r);gd(p,F);break e;case 1:T=P;var k=p.type,b=p.stateNode;if((p.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zr===null||!zr.has(b)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=qd(p,T,r);gd(p,X);break e}}p=p.return}while(p!==null)}Sp(o)}catch(ue){r=ue,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function Tp(){var t=Tl.current;return Tl.current=gl,t===null?gl:t}function Wc(){(mt===0||mt===3||mt===2)&&(mt=4),Et===null||(Vi&268435455)===0&&(Il&268435455)===0||qr(Et,Ct)}function kl(t,r){var o=De;De|=2;var u=Tp();(Et!==t||Ct!==r)&&(_r=null,Di(t,r));do try{z_();break}catch(h){wp(t,h)}while(!0);if(sc(),De=o,Tl.current=u,ot!==null)throw Error(n(261));return Et=null,Ct=0,mt}function z_(){for(;ot!==null;)Ip(ot)}function B_(){for(;ot!==null&&!Ca();)Ip(ot)}function Ip(t){var r=Rp(t.alternate,t,on);t.memoizedProps=t.pendingProps,r===null?Sp(t):ot=r,Fc.current=null}function Sp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=M_(o,r,on),o!==null){ot=o;return}}else{if(o=O_(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ot=null;return}}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);mt===0&&(mt=5)}function Mi(t,r,o){var u=Pe,h=gn.transition;try{gn.transition=null,Pe=1,$_(t,r,o,u)}finally{gn.transition=h,Pe=u}return null}function $_(t,r,o,u){do Fs();while(Br!==null);if((De&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===Et&&(ot=Et=null,Ct=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Al||(Al=!0,Pp(un,function(){return Fs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=gn.transition,gn.transition=null;var _=Pe;Pe=1;var T=De;De|=4,Fc.current=null,F_(t,o),pp(o,t),u_(Wu),Vr=!!Hu,Wu=Hu=null,t.current=o,b_(o),ku(),De=T,Pe=_,gn.transition=p}else t.current=o;if(Al&&(Al=!1,Br=t,Cl=h),p=t.pendingLanes,p===0&&(zr=null),ka(o.stateNode),Kt(t,$e()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(Sl)throw Sl=!1,t=Uc,Uc=null,t;return(Cl&1)!==0&&t.tag!==0&&Fs(),p=t.pendingLanes,(p&1)!==0?t===zc?Ko++:(Ko=0,zc=t):Ko=0,Fr(),null}function Fs(){if(Br!==null){var t=kr(Cl),r=gn.transition,o=Pe;try{if(gn.transition=null,Pe=16>t?16:t,Br===null)var u=!1;else{if(t=Br,Br=null,Cl=0,(De&6)!==0)throw Error(n(331));var h=De;for(De|=4,se=t.current;se!==null;){var p=se,_=p.child;if((se.flags&16)!==0){var T=p.deletions;if(T!==null){for(var P=0;P<T.length;P++){var j=T[P];for(se=j;se!==null;){var Q=se;switch(Q.tag){case 0:case 11:case 15:Wo(8,Q,p)}var K=Q.child;if(K!==null)K.return=Q,se=K;else for(;se!==null;){Q=se;var G=Q.sibling,te=Q.return;if(up(Q),Q===j){se=null;break}if(G!==null){G.return=te,se=G;break}se=te}}}var oe=p.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var rt=ae.sibling;ae.sibling=null,ae=rt}while(ae!==null)}}se=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,se=_;else e:for(;se!==null;){if(p=se,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Wo(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,se=F;break e}se=p.return}}var k=t.current;for(se=k;se!==null;){_=se;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,se=b;else e:for(_=k;se!==null;){if(T=se,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:wl(9,T)}}catch(ue){et(T,T.return,ue)}if(T===_){se=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,se=X;break e}se=T.return}}if(De=h,Fr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(yi,t)}catch{}u=!0}return u}finally{Pe=o,gn.transition=r}}return!1}function Ap(t,r,o){r=Ds(o,r),r=$d(t,r,1),t=jr(t,r,1),r=Bt(),t!==null&&(Rr(t,1,r),Kt(t,r))}function et(t,r,o){if(t.tag===3)Ap(t,t,o);else for(;r!==null;){if(r.tag===3){Ap(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(zr===null||!zr.has(u))){t=Ds(o,t),t=qd(r,t,1),r=jr(r,t,1),t=Bt(),r!==null&&(Rr(r,1,t),Kt(r,t));break}}r=r.return}}function q_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,Et===t&&(Ct&o)===o&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>$e()-jc?Di(t,0):bc|=o),Kt(t,r)}function Cp(t,r){r===0&&((t.mode&1)===0?r=1:(r=os,os<<=1,(os&130023424)===0&&(os=4194304)));var o=Bt();t=mr(t,r),t!==null&&(Rr(t,r,o),Kt(t,o))}function H_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Cp(t,o)}function W_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Cp(t,o)}var Rp;Rp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ht.current)Gt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Gt=!1,D_(t,r,o);Gt=(t.flags&131072)!==0}else Gt=!1,Ye&&(r.flags&1048576)!==0&&od(r,il,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;vl(t,r),t=r.pendingProps;var h=As(r,Nt.current);Vs(r,o),h=gc(null,r,u,t,h,o);var p=yc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wt(u)?(p=!0,tl(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,uc(r),h.updater=yl,r.stateNode=h,h._reactInternals=r,Ic(r,u,t,o),r=Rc(null,r,u,!0,p,o)):(r.tag=0,Ye&&p&&Zu(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(vl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Q_(u),t=xn(u,t),h){case 0:r=Cc(null,r,u,t,o);break e;case 1:r=Zd(null,r,u,t,o);break e;case 11:r=Qd(null,r,u,t,o);break e;case 14:r=Kd(null,r,u,xn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Cc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Zd(t,r,u,h,o);case 3:e:{if(ep(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,md(t,r),cl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Ds(Error(n(423)),r),r=tp(t,r,u,o,h);break e}else if(u!==h){h=Ds(Error(n(424)),r),r=tp(t,r,u,o,h);break e}else for(sn=Mr(r.stateNode.containerInfo.firstChild),rn=r,Ye=!0,kn=null,o=dd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ps(),u===h){r=yr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return _d(r),t===null&&nc(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Gu(u,h)?_=null:p!==null&&Gu(u,p)&&(r.flags|=32),Jd(t,r),zt(t,r,_,o),r.child;case 6:return t===null&&nc(r),null;case 13:return np(t,r,o);case 4:return cc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ks(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Qd(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,qe(al,u._currentValue),u._currentValue=_,p!==null)if(Pn(p.value,_)){if(p.children===h.children&&!Ht.current){r=yr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var P=T.firstContext;P!==null;){if(P.context===u){if(p.tag===1){P=gr(-1,o&-o),P.tag=2;var j=p.updateQueue;if(j!==null){j=j.shared;var Q=j.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),j.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),ac(p.return,o,r),T.lanes|=o;break}P=P.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),ac(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Vs(r,o),h=pn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=xn(u,r.pendingProps),h=xn(u.type,h),Kd(t,r,u,h,o);case 15:return Yd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),vl(t,r),r.tag=1,Wt(u)?(t=!0,tl(r)):t=!1,Vs(r,o),zd(r,u,h),Ic(r,u,h,o),Rc(null,r,u,!0,t,o);case 19:return ip(t,r,o);case 22:return Xd(t,r,o)}throw Error(n(156,r.tag))};function Pp(t,r){return is(t,r)}function G_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,o,u){return new G_(t,r,o,u)}function Gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q_(t){if(typeof t=="function")return Gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===xt)return 14}return 2}function Hr(t,r){var o=t.alternate;return o===null?(o=yn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function xl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Gc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case V:return Oi(o.children,h,p,r);case I:_=8,h|=8;break;case A:return t=yn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=yn(13,o,r,h),t.elementType=S,t.lanes=p,t;case tt:return t=yn(19,o,r,h),t.elementType=tt,t.lanes=p,t;case Ue:return Vl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:_=10;break e;case N:_=9;break e;case O:_=11;break e;case xt:_=14;break e;case Vt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=yn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Oi(t,r,o,u){return t=yn(7,t,u,r),t.lanes=o,t}function Vl(t,r,o,u){return t=yn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Qc(t,r,o){return t=yn(6,t,null,r),t.lanes=o,t}function Kc(t,r,o){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function K_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Yc(t,r,o,u,h,p,_,T,P){return t=new K_(t,r,o,T,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=yn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(p),t}function Y_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function kp(t){if(!t)return Lr;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Wt(o))return rd(t,o,r)}return r}function xp(t,r,o,u,h,p,_,T,P){return t=Yc(o,u,!0,t,h,p,_,T,P),t.context=kp(null),o=t.current,u=Bt(),h=$r(o),p=gr(u,h),p.callback=r??null,jr(o,p,h),t.current.lanes=h,Rr(t,h,u),Kt(t,u),t}function Nl(t,r,o,u){var h=r.current,p=Bt(),_=$r(h);return o=kp(o),r.context===null?r.context=o:r.pendingContext=o,r=gr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=jr(h,r,_),t!==null&&(Dn(t,h,_,p),ul(t,h,_)),_}function Dl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Xc(t,r){Vp(t,r),(t=t.alternate)&&Vp(t,r)}function X_(){return null}var Np=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jc(t){this._internalRoot=t}Ml.prototype.render=Jc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Nl(t,r,null,null)},Ml.prototype.unmount=Jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ni(function(){Nl(null,t,null,null)}),r[hr]=null}};function Ml(t){this._internalRoot=t}Ml.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ma();t={blockedOn:null,target:t,priority:r};for(var o=0;o<jn.length&&r!==0&&r<jn[o].priority;o++);jn.splice(o,0,t),o===0&&Fa(t)}};function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function J_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var j=Dl(_);p.call(j)}}var _=xp(r,u,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=_,t[hr]=_.current,Do(t.nodeType===8?t.parentNode:t),Ni(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var j=Dl(P);T.call(j)}}var P=Yc(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=P,t[hr]=P.current,Do(t.nodeType===8?t.parentNode:t),Ni(function(){Nl(r,P,o,u)}),P}function Ll(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var T=h;h=function(){var P=Dl(_);T.call(P)}}Nl(r,_,t,h)}else _=J_(o,r,t,h,u);return Dl(_)}Na=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(Pr(r,o|1),Kt(r,$e()),(De&6)===0&&(Ls=$e()+500,Fr()))}break;case 13:Ni(function(){var u=mr(t,1);if(u!==null){var h=Bt();Dn(u,t,1,h)}}),Xc(t,1)}},as=function(t){if(t.tag===13){var r=mr(t,134217728);if(r!==null){var o=Bt();Dn(r,t,134217728,o)}Xc(t,134217728)}},Da=function(t){if(t.tag===13){var r=$r(t),o=mr(t,r);if(o!==null){var u=Bt();Dn(o,t,r,u)}Xc(t,r)}},Ma=function(){return Pe},Oa=function(t,r){var o=Pe;try{return Pe=t,r()}finally{Pe=o}},Ji=function(t,r,o){switch(r){case"input":if(ro(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Za(u);if(!h)throw Error(n(90));Wi(u),ro(u,h)}}}break;case"textarea":Yi(t,o);break;case"select":r=o.value,r!=null&&rr(t,!!o.multiple,r,!1)}},fi=qc,po=Ni;var Z_={usingClientEntryPoint:!1,Events:[Lo,Is,Za,Fn,fo,qc]},Yo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yo(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||X_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{yi=Fl.inject(ev),Zt=Fl}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z_,Yt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(r))throw Error(n(200));return Y_(t,r,null,o)},Yt.createRoot=function(t,r){if(!Zc(t))throw Error(n(299));var o=!1,u="",h=Np;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Yc(t,1,!1,null,null,o,!1,u,h),t[hr]=r.current,Do(t.nodeType===8?t.parentNode:t),new Jc(r)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=yo(r),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return Ni(t)},Yt.hydrate=function(t,r,o){if(!Ol(r))throw Error(n(200));return Ll(null,t,r,!0,o)},Yt.hydrateRoot=function(t,r,o){if(!Zc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=Np;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=xp(r,null,t,1,o??null,h,!1,p,_),t[hr]=r.current,Do(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Ml(r)},Yt.render=function(t,r,o){if(!Ol(r))throw Error(n(200));return Ll(null,t,r,!1,o)},Yt.unmountComponentAtNode=function(t){if(!Ol(t))throw Error(n(40));return t._reactRootContainer?(Ni(function(){Ll(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1},Yt.unstable_batchedUpdates=qc,Yt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Ol(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ll(t,r,o,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var zp;function uv(){if(zp)return nh.exports;zp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nh.exports=lv(),nh.exports}var Bp;function cv(){if(Bp)return bl;Bp=1;var i=uv();return bl.createRoot=i.createRoot,bl.hydrateRoot=i.hydrateRoot,bl}var hv=cv();const fv=sg(hv),dv=({item:i,onToggle:e,onDelete:n,isDeleting:s})=>{const[a,c]=Oe.useState(!1),[f,m]=Oe.useState(i.bookedBy??""),y=()=>{e(i.id,f.trim()||""),c(!1)},v=()=>{c(!1),m(i.bookedBy??"")},w=()=>{c(!0)},C=()=>{e(i.id,void 0)};return Y.jsxs("div",{"aria-busy":s||void 0,className:`group relative flex flex-col gap-3 rounded-xl border p-4 shadow-sm transition-transform duration-300 transform card-elevated ${i.isBooked?"bg-booked text-white border-booked":"bg-white border-neutral-200"} ${s?"opacity-80 pointer-events-none scale-98":"opacity-100 scale-100"}`,children:[s&&Y.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center rounded-xl transition-opacity duration-300 ${i.isBooked?"bg-black/24":"bg-white/60"}`,role:"status","aria-live":"polite",children:Y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Y.jsxs("svg",{className:`${i.isBooked?"text-white":"text-neutral-800"} w-9 h-9 animate-spin`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[Y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),Y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),Y.jsx("span",{className:`${i.isBooked?"text-white/90":"text-neutral-800 text-opacity-90"} text-xs`,children:""})]})}),Y.jsx("button",{type:"button",onClick:n,disabled:s,className:`absolute top-3 right-3 rounded-full p-2.5 flex items-center justify-center transition-shadow shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${i.isBooked?"bg-white/20 text-white hover:bg-white/30 focus:ring-white focus:ring-offset-booked":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 focus:ring-accent"}`,"aria-label":""}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("h3",{className:"text-lg font-semibold leading-tight break-words pr-10",children:i.name}),i.description&&Y.jsx("p",{className:"mt-1 text-sm opacity-80 whitespace-pre-wrap break-words",children:i.description}),Y.jsx("p",{className:"mt-2 inline-block rounded-full bg-accent/10 px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-accent group-hover:bg-accent/15 transition",children:i.category})]}),Y.jsx("div",{className:"flex flex-col gap-2",children:i.isBooked?Y.jsxs(Y.Fragment,{children:[i.bookedBy&&Y.jsxs("p",{className:"text-sm text-center",children:[": ",Y.jsx("span",{className:"font-semibold",children:i.bookedBy})]}),Y.jsx("button",{onClick:C,className:"rounded-md px-4 py-2 text-sm font-semibold shadow-sm bg-white text-booked hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-booked",children:" "})]}):a?Y.jsxs(Y.Fragment,{children:[Y.jsx("input",{type:"text",className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm text-neutral-900 placeholder-neutral-400 focus:border-accent focus:outline-none",placeholder:"  ()",value:f,onChange:R=>m(R.target.value),autoFocus:!0}),Y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Y.jsx("button",{onClick:y,className:"rounded-md px-4 py-2 text-sm font-semibold bg-accent text-white hover:bg-booked shadow-sm focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""}),Y.jsx("button",{onClick:v,className:"rounded-md px-4 py-2 text-sm font-semibold bg-neutral-200 text-neutral-800 hover:bg-neutral-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2",children:""})]})]}):Y.jsx("button",{onClick:w,className:"rounded-md px-4 py-2 text-sm font-semibold bg-accent text-white hover:bg-booked shadow-sm focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""})}),typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Y.jsxs("div",{className:"mt-1 text-xs text-neutral-400 break-words select-text",children:["ID: ",i.id]})]})},pv=()=>{};var $p={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},mv=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},ag={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,w=c>>2,C=(c&3)<<4|m>>4;let R=(m&15)<<2|v>>6,z=v&63;y||(z=64,f||(R=64)),s.push(n[w],n[C],n[R],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(og(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):mv(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const C=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||v==null||C==null)throw new gv;const R=c<<2|m>>4;if(s.push(R),v!==64){const z=m<<4&240|v>>2;if(s.push(z),C!==64){const B=v<<6&192|C;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class gv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yv=function(i){const e=og(i);return ag.encodeByteArray(e,!0)},Yl=function(i){return yv(i).replace(/\./g,"")},_v=function(i){try{return ag.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=()=>vv().__FIREBASE_DEFAULTS__,wv=()=>{if(typeof process>"u"||typeof $p>"u")return;const i=$p.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Tv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&_v(i[1]);return e&&JSON.parse(e)},jh=()=>{try{return pv()||Ev()||wv()||Tv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Iv=i=>jh()?.emulatorHosts?.[i],Sv=i=>{const e=Iv(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},lg=()=>jh()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Yl(JSON.stringify(n)),Yl(JSON.stringify(f)),""].join(".")}const na={};function Pv(){const i={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?i.emulator.push(e):i.prod.push(e);return i}function kv(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let qp=!1;function xv(i,e){if(typeof window>"u"||typeof document>"u"||!Uh(window.location.host)||na[i]===e||na[i]||qp)return;na[i]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=Pv().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{qp=!0,f()},R}function w(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function C(){const R=kv(s),z=n("text"),B=document.getElementById(z)||document.createElement("span"),$=n("learnmore"),M=document.getElementById($)||document.createElement("a"),fe=n("preprendIcon"),me=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const de=R.element;m(de),w(M,$);const ce=v();y(me,fe),de.append(me,B,M,ce),document.body.appendChild(de)}c?(B.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nv(){const i=jh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Dv(){return!Nv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ov(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function zT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="FirebaseError";class Ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Lv,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ug.prototype.create)}}class ug{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?Fv(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new Ys(a,m,s)}}function Fv(i,e){return i.replace(bv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const bv=/\{\$([^}]+)}/g;function Xl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(Hp(c)&&Hp(f)){if(!Xl(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Hp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=1e3,Uv=2,zv=14400*1e3,Bv=.5;function BT(i,e=jv,n=Uv){const s=e*Math.pow(n,i),a=Math.round(Bv*s*(Math.random()-.5)*2);return Math.min(zv,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(i){return i&&i._delegate?i._delegate:i}class aa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Av;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hv(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qv(i){return i===Li?void 0:i}function Hv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $v(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ne||(Ne={}));const Gv={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Qv=Ne.INFO,Kv={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Yv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Kv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=Qv,this._logHandler=Yv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const Xv=(i,e)=>e.some(n=>i instanceof n);let Wp,Gp;function Jv(){return Wp||(Wp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zv(){return Gp||(Gp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hg=new WeakMap,ph=new WeakMap,fg=new WeakMap,sh=new WeakMap,zh=new WeakMap;function e0(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Qr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&hg.set(n,i)}).catch(()=>{}),zh.set(e,i),e}function t0(i){if(ph.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});ph.set(i,e)}let mh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return ph.get(i);if(e==="objectStoreNames")return i.objectStoreNames||fg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function n0(i){mh=i(mh)}function r0(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(oh(this),e,...n);return fg.set(s,e.sort?e.sort():[e]),Qr(s)}:Zv().includes(i)?function(...e){return i.apply(oh(this),e),Qr(hg.get(this))}:function(...e){return Qr(i.apply(oh(this),e))}}function i0(i){return typeof i=="function"?r0(i):(i instanceof IDBTransaction&&t0(i),Xv(i,Jv())?new Proxy(i,mh):i)}function Qr(i){if(i instanceof IDBRequest)return e0(i);if(sh.has(i))return sh.get(i);const e=i0(i);return e!==i&&(sh.set(i,e),zh.set(e,i)),e}const oh=i=>zh.get(i);function s0(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=Qr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Qr(f.result),y.oldVersion,y.newVersion,Qr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const o0=["get","getKey","getAll","getAllKeys","count"],a0=["put","add","delete","clear"],ah=new Map;function Qp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ah.get(e))return ah.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=a0.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||o0.includes(n)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return ah.set(e,c),c}n0(i=>({...i,get:(e,n,s)=>Qp(e,n)||i.get(e,n,s),has:(e,n)=>!!Qp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u0(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function u0(i){return i.getComponent()?.type==="VERSION"}const gh="@firebase/app",Kp="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new cg("@firebase/app"),c0="@firebase/app-compat",h0="@firebase/analytics-compat",f0="@firebase/analytics",d0="@firebase/app-check-compat",p0="@firebase/app-check",m0="@firebase/auth",g0="@firebase/auth-compat",y0="@firebase/database",_0="@firebase/data-connect",v0="@firebase/database-compat",E0="@firebase/functions",w0="@firebase/functions-compat",T0="@firebase/installations",I0="@firebase/installations-compat",S0="@firebase/messaging",A0="@firebase/messaging-compat",C0="@firebase/performance",R0="@firebase/performance-compat",P0="@firebase/remote-config",k0="@firebase/remote-config-compat",x0="@firebase/storage",V0="@firebase/storage-compat",N0="@firebase/firestore",D0="@firebase/ai",M0="@firebase/firestore-compat",O0="firebase",L0="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="[DEFAULT]",F0={[gh]:"fire-core",[c0]:"fire-core-compat",[f0]:"fire-analytics",[h0]:"fire-analytics-compat",[p0]:"fire-app-check",[d0]:"fire-app-check-compat",[m0]:"fire-auth",[g0]:"fire-auth-compat",[y0]:"fire-rtdb",[_0]:"fire-data-connect",[v0]:"fire-rtdb-compat",[E0]:"fire-fn",[w0]:"fire-fn-compat",[T0]:"fire-iid",[I0]:"fire-iid-compat",[S0]:"fire-fcm",[A0]:"fire-fcm-compat",[C0]:"fire-perf",[R0]:"fire-perf-compat",[P0]:"fire-rc",[k0]:"fire-rc-compat",[x0]:"fire-gcs",[V0]:"fire-gcs-compat",[N0]:"fire-fst",[M0]:"fire-fst-compat",[D0]:"fire-vertex","fire-js":"fire-js",[O0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,b0=new Map,_h=new Map;function Yp(i,e){try{i.container.addComponent(e)}catch(n){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Zl(i){const e=i.name;if(_h.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;_h.set(e,i);for(const n of Jl.values())Yp(n,i);for(const n of b0.values())Yp(n,i);return!0}function j0(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function U0(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new ug("app","Firebase",z0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=L0;function dg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:yh,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Kr.create("bad-app-name",{appName:String(a)});if(n||(n=lg()),!n)throw Kr.create("no-options");const c=Jl.get(a);if(c){if(Xl(n,c.options)&&Xl(s,c.config))return c;throw Kr.create("duplicate-app",{appName:a})}const f=new Wv(a);for(const y of _h.values())f.addComponent(y);const m=new B0(n,s,f);return Jl.set(a,m),m}function q0(i=yh){const e=Jl.get(i);if(!e&&i===yh&&lg())return dg();if(!e)throw Kr.create("no-app",{appName:i});return e}function Bs(i,e,n){let s=F0[i]??i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${s}" with version "${e}":`];a&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(f.join(" "));return}Zl(new aa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebase-heartbeat-database",W0=1,la="firebase-heartbeat-store";let lh=null;function pg(){return lh||(lh=s0(H0,W0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(la)}catch(n){console.warn(n)}}}}).catch(i=>{throw Kr.create("idb-open",{originalErrorMessage:i.message})})),lh}async function G0(i){try{const n=(await pg()).transaction(la),s=await n.objectStore(la).get(mg(i));return await n.done,s}catch(e){if(e instanceof Ys)vr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e?.message});vr.warn(n.message)}}}async function Xp(i,e){try{const s=(await pg()).transaction(la,"readwrite");await s.objectStore(la).put(e,mg(i)),await s.done}catch(n){if(n instanceof Ys)vr.warn(n.message);else{const s=Kr.create("idb-set",{originalErrorMessage:n?.message});vr.warn(s.message)}}}function mg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=1024,K0=30;class Y0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>K0){const a=Z0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jp(),{heartbeatsToSend:n,unsentEntries:s}=X0(this._heartbeatsCache.heartbeats),a=Yl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return vr.warn(e),""}}}function Jp(){return new Date().toISOString().substring(0,10)}function X0(i,e=Q0){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Zp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Zp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class J0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mv()?Ov().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await G0(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zp(i){return Yl(JSON.stringify({version:2,heartbeats:i})).length}function Z0(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(i){Zl(new aa("platform-logger",e=>new l0(e),"PRIVATE")),Zl(new aa("heartbeat",e=>new Y0(e),"PRIVATE")),Bs(gh,Kp,i),Bs(gh,Kp,"esm2020"),Bs("fire-js","")}eE("");var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,gg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,I){function A(){}A.prototype=I.prototype,V.D=I.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(x,N,O){for(var S=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)S[tt-2]=arguments[tt];return I.prototype[N].apply(x,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,I,A){A||(A=0);var x=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)x[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;16>N;++N)x[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=V.g[0],A=V.g[1],N=V.g[2];var O=V.g[3],S=I+(O^A&(N^O))+x[0]+3614090360&4294967295;I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+x[1]+3905402710&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+x[2]+606105819&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+x[3]+3250441966&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+x[4]+4118548399&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+x[5]+1200080426&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+x[6]+2821735955&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+x[7]+4249261313&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+x[8]+1770035416&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+x[9]+2336552879&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+x[10]+4294925233&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+x[11]+2304563134&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(O^A&(N^O))+x[12]+1804603682&4294967295,I=A+(S<<7&4294967295|S>>>25),S=O+(N^I&(A^N))+x[13]+4254626195&4294967295,O=I+(S<<12&4294967295|S>>>20),S=N+(A^O&(I^A))+x[14]+2792965006&4294967295,N=O+(S<<17&4294967295|S>>>15),S=A+(I^N&(O^I))+x[15]+1236535329&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(N^O&(A^N))+x[1]+4129170786&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+x[6]+3225465664&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+x[11]+643717713&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+x[0]+3921069994&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+x[5]+3593408605&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+x[10]+38016083&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+x[15]+3634488961&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+x[4]+3889429448&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+x[9]+568446438&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+x[14]+3275163606&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+x[3]+4107603335&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+x[8]+1163531501&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^O&(A^N))+x[13]+2850285829&4294967295,I=A+(S<<5&4294967295|S>>>27),S=O+(A^N&(I^A))+x[2]+4243563512&4294967295,O=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(O^I))+x[7]+1735328473&4294967295,N=O+(S<<14&4294967295|S>>>18),S=A+(O^I&(N^O))+x[12]+2368359562&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(A^N^O)+x[5]+4294588738&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+x[8]+2272392833&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+x[11]+1839030562&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+x[14]+4259657740&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+x[1]+2763975236&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+x[4]+1272893353&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+x[7]+4139469664&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+x[10]+3200236656&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+x[13]+681279174&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+x[0]+3936430074&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+x[3]+3572445317&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+x[6]+76029189&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^O)+x[9]+3654602809&4294967295,I=A+(S<<4&4294967295|S>>>28),S=O+(I^A^N)+x[12]+3873151461&4294967295,O=I+(S<<11&4294967295|S>>>21),S=N+(O^I^A)+x[15]+530742520&4294967295,N=O+(S<<16&4294967295|S>>>16),S=A+(N^O^I)+x[2]+3299628645&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(N^(A|~O))+x[0]+4096336452&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+x[7]+1126891415&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+x[14]+2878612391&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+x[5]+4237533241&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+x[12]+1700485571&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+x[3]+2399980690&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+x[10]+4293915773&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+x[1]+2240044497&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+x[8]+1873313359&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+x[15]+4264355552&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+x[6]+2734768916&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+x[13]+1309151649&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~O))+x[4]+4149444226&4294967295,I=A+(S<<6&4294967295|S>>>26),S=O+(A^(I|~N))+x[11]+3174756917&4294967295,O=I+(S<<10&4294967295|S>>>22),S=N+(I^(O|~A))+x[2]+718787259&4294967295,N=O+(S<<15&4294967295|S>>>17),S=A+(O^(N|~I))+x[9]+3951481745&4294967295,V.g[0]=V.g[0]+I&4294967295,V.g[1]=V.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,V.g[2]=V.g[2]+N&4294967295,V.g[3]=V.g[3]+O&4294967295}s.prototype.u=function(V,I){I===void 0&&(I=V.length);for(var A=I-this.blockSize,x=this.B,N=this.h,O=0;O<I;){if(N==0)for(;O<=A;)a(this,V,O),O+=this.blockSize;if(typeof V=="string"){for(;O<I;)if(x[N++]=V.charCodeAt(O++),N==this.blockSize){a(this,x),N=0;break}}else for(;O<I;)if(x[N++]=V[O++],N==this.blockSize){a(this,x),N=0;break}}this.h=N,this.o+=I},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var I=1;I<V.length-8;++I)V[I]=0;var A=8*this.o;for(I=V.length-8;I<V.length;++I)V[I]=A&255,A/=256;for(this.u(V),V=Array(16),I=A=0;4>I;++I)for(var x=0;32>x;x+=8)V[A++]=this.g[I]>>>x&255;return V};function c(V,I){var A=m;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=I(V)}function f(V,I){this.h=I;for(var A=[],x=!0,N=V.length-1;0<=N;N--){var O=V[N]|0;x&&O==I||(A[N]=O,x=!1)}this.g=A}var m={};function y(V){return-128<=V&&128>V?c(V,function(I){return new f([I|0],0>I?-1:0)}):new f([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return C;if(0>V)return M(v(-V));for(var I=[],A=1,x=0;V>=A;x++)I[x]=V/A|0,A*=4294967296;return new f(I,0)}function w(V,I){if(V.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V.charAt(0)=="-")return M(w(V.substring(1),I));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),x=C,N=0;N<V.length;N+=8){var O=Math.min(8,V.length-N),S=parseInt(V.substring(N,N+O),I);8>O?(O=v(Math.pow(I,O)),x=x.j(O).add(v(S))):(x=x.j(A),x=x.add(v(S)))}return x}var C=y(0),R=y(1),z=y(16777216);i=f.prototype,i.m=function(){if($(this))return-M(this).m();for(var V=0,I=1,A=0;A<this.g.length;A++){var x=this.i(A);V+=(0<=x?x:4294967296+x)*I,I*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(B(this))return"0";if($(this))return"-"+M(this).toString(V);for(var I=v(Math.pow(V,6)),A=this,x="";;){var N=ce(A,I).g;A=fe(A,N.j(I));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=N,B(A))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function B(V){if(V.h!=0)return!1;for(var I=0;I<V.g.length;I++)if(V.g[I]!=0)return!1;return!0}function $(V){return V.h==-1}i.l=function(V){return V=fe(this,V),$(V)?-1:B(V)?0:1};function M(V){for(var I=V.g.length,A=[],x=0;x<I;x++)A[x]=~V.g[x];return new f(A,~V.h).add(R)}i.abs=function(){return $(this)?M(this):this},i.add=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],x=0,N=0;N<=I;N++){var O=x+(this.i(N)&65535)+(V.i(N)&65535),S=(O>>>16)+(this.i(N)>>>16)+(V.i(N)>>>16);x=S>>>16,O&=65535,S&=65535,A[N]=S<<16|O}return new f(A,A[A.length-1]&-2147483648?-1:0)};function fe(V,I){return V.add(M(I))}i.j=function(V){if(B(this)||B(V))return C;if($(this))return $(V)?M(this).j(M(V)):M(M(this).j(V));if($(V))return M(this.j(M(V)));if(0>this.l(z)&&0>V.l(z))return v(this.m()*V.m());for(var I=this.g.length+V.g.length,A=[],x=0;x<2*I;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<V.g.length;N++){var O=this.i(x)>>>16,S=this.i(x)&65535,tt=V.i(N)>>>16,xt=V.i(N)&65535;A[2*x+2*N]+=S*xt,me(A,2*x+2*N),A[2*x+2*N+1]+=O*xt,me(A,2*x+2*N+1),A[2*x+2*N+1]+=S*tt,me(A,2*x+2*N+1),A[2*x+2*N+2]+=O*tt,me(A,2*x+2*N+2)}for(x=0;x<I;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=I;x<2*I;x++)A[x]=0;return new f(A,0)};function me(V,I){for(;(V[I]&65535)!=V[I];)V[I+1]+=V[I]>>>16,V[I]&=65535,I++}function de(V,I){this.g=V,this.h=I}function ce(V,I){if(B(I))throw Error("division by zero");if(B(V))return new de(C,C);if($(V))return I=ce(M(V),I),new de(M(I.g),M(I.h));if($(I))return I=ce(V,M(I)),new de(M(I.g),I.h);if(30<V.g.length){if($(V)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var A=R,x=I;0>=x.l(V);)A=ie(A),x=ie(x);var N=le(A,1),O=le(x,1);for(x=le(x,2),A=le(A,2);!B(x);){var S=O.add(x);0>=S.l(V)&&(N=N.add(A),O=S),x=le(x,1),A=le(A,1)}return I=fe(V,N.j(I)),new de(N,I)}for(N=C;0<=V.l(I);){for(A=Math.max(1,Math.floor(V.m()/I.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=v(A),S=O.j(I);$(S)||0<S.l(V);)A-=x,O=v(A),S=O.j(I);B(O)&&(O=R),N=N.add(O),V=fe(V,S)}return new de(N,V)}i.A=function(V){return ce(this,V).h},i.and=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)&V.i(x);return new f(A,this.h&V.h)},i.or=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)|V.i(x);return new f(A,this.h|V.h)},i.xor=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],x=0;x<I;x++)A[x]=this.i(x)^V.i(x);return new f(A,this.h^V.h)};function ie(V){for(var I=V.g.length+1,A=[],x=0;x<I;x++)A[x]=V.i(x)<<1|V.i(x-1)>>>31;return new f(A,V.h)}function le(V,I){var A=I>>5;I%=32;for(var x=V.g.length-A,N=[],O=0;O<x;O++)N[O]=0<I?V.i(O+A)>>>I|V.i(O+A+1)<<32-I:V.i(O+A);return new f(N,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,gg=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=w,Yr=f}).apply(typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yg,Jo,_g,ql,vh,vg,Eg,wg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in g))break e;g=g[L]}l=l[l.length-1],E=g[l],d=d(E),d!=E&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,E=!1,L={next:function(){if(!E&&g<l.length){var U=g++;return{value:d(U,l[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function w(l,d,g){return l.call.apply(l.bind,arguments)}function C(l,d,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function R(l,d,g){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:C,R.apply(null,arguments)}function z(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function B(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,L,U){for(var J=Array(arguments.length-2),je=2;je<arguments.length;je++)J[je-2]=arguments[je];return d.prototype[L].apply(E,J)}}function $(l){const d=l.length;if(0<d){const g=Array(d);for(let E=0;E<d;E++)g[E]=l[E];return g}return[]}function M(l,d){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(y(E)){const L=l.length||0,U=E.length||0;l.length=L+U;for(let J=0;J<U;J++)l[L+J]=E[J]}else l.push(E)}}class fe{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function me(l){return/^[\s\xa0]*$/.test(l)}function de(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var ie=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function le(l,d,g){for(const E in l)d.call(g,l[E],E,l)}function V(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function I(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,d){let g,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(g in E)l[g]=E[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function N(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function O(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ge;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class tt{constructor(){this.h=this.g=null}add(d,g){const E=xt.get();E.set(d,g),this.h?this.h.next=E:this.g=E,this.h=E}}var xt=new fe(()=>new Vt,l=>l.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Z=!1,ge=new tt,ne=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(D)}};var D=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){O(g)}var d=xt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ie=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l})();function Se(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(ie){e:{try{ce(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Se.aa.h.call(this)}}B(Se,he);var ke={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(l,d,g,E,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!E,this.ha=L,this.key=++Fe,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function tr(l){this.src=l,this.g={},this.h=0}tr.prototype.add=function(l,d,g,E,L){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var J=Tr(l,d,E,L);return-1<J?(d=l[J],g||(d.fa=!1)):(d=new Be(d,this.src,U,!!E,L),d.fa=g,l.push(d)),d};function Wi(l,d){var g=d.type;if(g in l.g){var E=l.g[g],L=Array.prototype.indexOf.call(E,d,void 0),U;(U=0<=L)&&Array.prototype.splice.call(E,L,1),U&&(yt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Tr(l,d,g,E){for(var L=0;L<l.length;++L){var U=l[L];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==E)return L}return-1}var li="closure_lm_"+(1e6*Math.random()|0),Gi={};function no(l,d,g,E,L){if(Array.isArray(d)){for(var U=0;U<d.length;U++)no(l,d[U],g,E,L);return null}return g=so(g),l&&l[Le]?l.K(d,g,v(E)?!!E.capture:!1,L):ro(l,d,g,!1,E,L)}function ro(l,d,g,E,L,U){if(!d)throw Error("Invalid event type");var J=v(L)?!!L.capture:!!L,je=Ki(l);if(je||(l[li]=je=new tr(l)),g=je.add(d,g,E,J,U),g.proxy)return g;if(E=Ia(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)Ie||(L=J),L===void 0&&(L=!1),l.addEventListener(d.toString(),E,L);else if(l.attachEvent)l.attachEvent(rr(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ia(){function l(g){return d.call(l.src,l.listener,g)}const d=io;return l}function Qi(l,d,g,E,L){if(Array.isArray(d))for(var U=0;U<d.length;U++)Qi(l,d[U],g,E,L);else E=v(E)?!!E.capture:!!E,g=so(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],g=Tr(U,g,E,L),-1<g&&(yt(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=Ki(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Tr(d,g,E,L)),(g=-1<l?d[l]:null)&&nr(g))}function nr(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])Wi(d.i,l);else{var g=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(g,E,l.capture):d.detachEvent?d.detachEvent(rr(g),E):d.addListener&&d.removeListener&&d.removeListener(E),(g=Ki(d))?(Wi(g,l),g.h==0&&(g.src=null,d[li]=null)):yt(l)}}}function rr(l){return l in Gi?Gi[l]:Gi[l]="on"+l}function io(l,d){if(l.da)l=!0;else{d=new Se(d,this);var g=l.listener,E=l.ha||l.src;l.fa&&nr(l),l=g.call(E,d)}return l}function Ki(l){return l=l[li],l instanceof tr?l:null}var Yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function so(l){return typeof l=="function"?l:(l[Yi]||(l[Yi]=function(d){return l.handleEvent(d)}),l[Yi])}function ht(){W.call(this),this.i=new tr(this),this.M=this,this.F=null}B(ht,W),ht.prototype[Le]=!0,ht.prototype.removeEventListener=function(l,d,g,E){Qi(this,l,d,g,E)};function ft(l,d){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var L=d;d=new he(E,l),x(d,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var J=d.g=g[U];L=ir(J,E,!0,d)&&L}if(J=d.g=l,L=ir(J,E,!0,d)&&L,L=ir(J,E,!1,d)&&L,g)for(U=0;U<g.length;U++)J=d.g=g[U],L=ir(J,E,!1,d)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],E=0;E<g.length;E++)yt(g[E]);delete l.g[d],l.h--}}this.F=null},ht.prototype.K=function(l,d,g,E){return this.i.add(String(l),d,!1,g,E)},ht.prototype.L=function(l,d,g,E){return this.i.add(String(l),d,!0,g,E)};function ir(l,d,g,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,U=0;U<d.length;++U){var J=d[U];if(J&&!J.da&&J.capture==g){var je=J.listener,dt=J.ha||J.src;J.fa&&Wi(l.i,J),L=je.call(dt,E)!==!1&&L}}return L&&!E.defaultPrevented}function oo(l,d,g){if(typeof l=="function")g&&(l=R(l,g));else if(l&&typeof l.handleEvent=="function")l=R(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Ir(l){l.g=oo(()=>{l.g=null,l.i&&(l.i=!1,Ir(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends W{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(l){W.call(this),this.h=l,this.g={}}B(ci,W);var ao=[];function lo(l){le(l.g,function(d,g){this.g.hasOwnProperty(g)&&nr(d)},l),l.g={}}ci.prototype.N=function(){ci.aa.N.call(this),lo(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=m.JSON.stringify,co=m.JSON.parse,ho=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function hi(){}hi.prototype.h=null;function Xi(l){return l.h||(l.h=l.i())}function Ji(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){he.call(this,"d")}B(Ln,he);function Zi(){he.call(this,"c")}B(Zi,he);var Fn={},fo=null;function fi(){return fo=fo||new ht}Fn.La="serverreachability";function po(l){he.call(this,Fn.La,l)}B(po,he);function sr(l){const d=fi();ft(d,new po(d))}Fn.STAT_EVENT="statevent";function mo(l,d){he.call(this,Fn.STAT_EVENT,l),this.stat=d}B(mo,he);function nt(l){const d=fi();ft(d,new mo(d,l))}Fn.Ma="timingevent";function es(l,d){he.call(this,Fn.Ma,l),this.size=d}B(es,he);function vn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function pi(l,d,g,E,L,U){l.info(function(){if(l.g)if(U)for(var J="",je=U.split("&"),dt=0;dt<je.length;dt++){var xe=je[dt].split("=");if(1<xe.length){var _t=xe[0];xe=xe[1];var st=_t.split("_");J=2<=st.length&&st[1]=="type"?J+(_t+"="+xe+"&"):J+(_t+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+d+`
`+g+`
`+J})}function ts(l,d,g,E,L,U,J){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+d+`
`+g+`
`+U+" "+J})}function En(l,d,g,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Pu(l,g)+(E?" "+E:"")})}function go(l,d){l.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function Pu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<L.length;J++)L[J]=""}}}}return uo(g)}catch{return d}}var ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wn;function mi(){}B(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},wn=new mi;function Tn(l,d,g,E){this.j=l,this.i=d,this.l=g,this.R=E||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var yo={},rs={};function is(l,d,g){l.L=1,l.v=Pr(en(d)),l.m=g,l.P=!0,_o(l,null)}function _o(l,d){l.F=Date.now(),$e(l),l.A=en(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),xr(g.i,"t",E),l.C=0,g=l.j.J,l.h=new Aa,l.g=$a(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ui(R(l.Y,l,l.g),l.O)),d=l.U,g=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(ao[0]=L.toString()),L=ao);for(var U=0;U<L.length;U++){var J=no(g,L[U],E||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),sr(),pi(l.i,l.u,l.A,l.l,l.R,l.m)}Tn.prototype.ca=function(l){l=l.target;const d=this.M;d&&qt(l)==3?d.j():this.Y(l)},Tn.prototype.Y=function(l){try{if(l==this.g)e:{const st=qt(this.g);var d=this.g.Ba();const hn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||So(this.g)))){this.J||st!=4||d==7||(d==8||0>=hn?sr(3):sr(2)),gi(this);var g=this.g.Z();this.X=g;t:if(Ca(this)){var E=So(this.g);l="";var L=E.length,U=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Sr(this);var J="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(U&&d==L-1)});E.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=g==200,ts(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var je,dt=this.g;if((je=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(je)){var xe=je;break t}}xe=null}if(g=xe)En(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vo(this,g);else{this.o=!1,this.s=3,nt(12),un(this),Sr(this);break e}}if(this.P){g=!0;let nn;for(;!this.J&&this.C<J.length;)if(nn=ku(this,J),nn==rs){st==4&&(this.s=4,nt(14),g=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==yo){this.s=4,nt(15),En(this.i,this.l,J,"[Invalid Chunk]"),g=!1;break}else En(this.i,this.l,nn,null),vo(this,nn);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||J.length!=0||this.h.h||(this.s=1,nt(16),g=!1),this.o=this.o&&g,!g)En(this.i,this.l,J,"[Invalid Chunked Response]"),un(this),Sr(this);else if(0<J.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Co(_t),_t.M=!0,nt(11))}}else En(this.i,this.l,J,null),vo(this,J);st==4&&un(this),this.o&&!this.J&&(st==4?ms(this.j,this):(this.o=!1,$e(this)))}else cs(this.g),g==400&&0<J.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),un(this),Sr(this)}}}catch{}finally{}};function Ca(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ku(l,d){var g=l.C,E=d.indexOf(`
`,g);return E==-1?rs:(g=Number(d.substring(g,E)),isNaN(g)?yo:(E+=1,E+g>d.length?rs:(d=d.slice(E,E+g),l.C=E+g,d)))}Tn.prototype.cancel=function(){this.J=!0,un(this)};function $e(l){l.S=Date.now()+l.I,Ra(l,l.I)}function Ra(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vn(R(l.ba,l),d)}function gi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Tn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(go(this.i,this.A),this.L!=2&&(sr(),nt(17)),un(this),this.s=2,Sr(this)):Ra(this,this.S-l)};function Sr(l){l.j.G==0||l.J||ms(l.j,l)}function un(l){gi(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,lo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function vo(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||jt(g.h,l))){if(!l.K&&jt(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ps(g),Rn(g);else break e;ds(g),nt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=vn(R(g.Za,g),6e3));if(1>=ka(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else cr(g,11)}else if((l.K||g.g==l)&&ps(g),!me(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let xe=L[d];if(g.T=xe[0],xe=xe[1],g.G==2)if(xe[0]=="c"){g.K=xe[1],g.ia=xe[2];const _t=xe[3];_t!=null&&(g.la=_t,g.j.info("VER="+g.la));const st=xe[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const hn=xe[5];hn!=null&&typeof hn=="number"&&0<hn&&(E=1.5*hn,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const nn=l.g;if(nn){const Ii=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var U=E.h;U.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Eo(U,U.h),U.h=null))}if(E.D){const ys=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ys&&(E.ya=ys,ze(E.I,E.D,ys))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var J=l;if(E.qa=Ba(E,E.J?E.ia:null,E.W),J.K){xa(E.h,J);var je=J,dt=E.L;dt&&(je.I=dt),je.B&&(gi(je),$e(je)),E.g=J}else Ti(E);0<g.i.length&&zn(g)}else xe[0]!="stop"&&xe[0]!="close"||cr(g,7);else g.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?cr(g,7):St(g):xe[0]!="noop"&&g.l&&g.l.ta(xe),g.v=0)}}sr(4)}catch{}}var Pa=class{constructor(l,d){this.g=l,this.map=d}};function yi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ka(l){return l.h?1:l.g?l.g.size:0}function jt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Eo(l,d){l.g?l.g.add(d):l.h=d}function xa(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}yi.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Va(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return $(l.i)}function ss(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,E=0;E<g;E++)d.push(l[E]);return d}d=[],g=0;for(E in l)d[g++]=l[E];return d}function os(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const E in l)d[g++]=E;return d}}}function Ar(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=os(l),E=ss(l),L=E.length,U=0;U<L;U++)d.call(void 0,E[U],g&&g[U],l)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),L=null;if(0<=E){var U=l[g].substring(0,E);L=l[g].substring(E+1)}else U=l[g];d(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function or(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof or){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var d=l.i,g=new bn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Rr(this,g),this.m=l.m}else l&&(d=String(l).match(_i))?(this.h=!1,vi(this,d[1]||"",!0),this.o=Pe(d[2]||""),this.g=Pe(d[3]||"",!0),Cr(this,d[4]),this.l=Pe(d[5]||"",!0),Rr(this,d[6]||"",!0),this.m=Pe(d[7]||"")):(this.h=!1,this.i=new bn(null,this.h))}or.prototype.toString=function(){var l=[],d=this.j;d&&l.push(kr(d,as,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(kr(d,as,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(kr(g,g.charAt(0)=="/"?Ma:Da,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",kr(g,wo)),l.join("")};function en(l){return new or(l)}function vi(l,d,g){l.j=g?Pe(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Rr(l,d,g){d instanceof bn?(l.i=d,jn(l.i,l.h)):(g||(d=kr(d,Oa)),l.i=new bn(d,l.h))}function ze(l,d,g){l.i.set(d,g)}function Pr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pe(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Na),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Na(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var as=/[#\/\?@]/g,Da=/[#\?:]/g,Ma=/[#\?]/g,Oa=/[#\?@]/g,wo=/#/g;function bn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&xu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=bn.prototype,i.add=function(l,d){It(this),this.i=null,l=cn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function In(l,d){It(l),d=cn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Sn(l,d){return It(l),d=cn(l,d),l.g.has(d)}i.forEach=function(l,d){It(this),this.g.forEach(function(g,E){g.forEach(function(L){l.call(d,L,E,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let E=0;E<d.length;E++){const L=l[E];for(let U=0;U<L.length;U++)g.push(d[E])}return g},i.V=function(l){It(this);let d=[];if(typeof l=="string")Sn(this,l)&&(d=d.concat(this.g.get(cn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return It(this),this.i=null,l=cn(this,l),Sn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function xr(l,d,g){In(l,d),0<g.length&&(l.i=null,l.g.set(cn(l,d),$(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var E=d[g];const U=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var L=U;J[E]!==""&&(L+="="+encodeURIComponent(String(J[E]))),l.push(L)}}return this.i=l.join("&")};function cn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function jn(l,d){d&&!l.j&&(It(l),l.i=null,l.g.forEach(function(g,E){var L=E.toLowerCase();E!=L&&(In(this,E),xr(this,L,g))},l)),l.j=d}function Vu(l,d){const g=new di;if(m.Image){const E=new Image;E.onload=z($t,g,"TestLoadImage: loaded",!0,d,E),E.onerror=z($t,g,"TestLoadImage: error",!1,d,E),E.onabort=z($t,g,"TestLoadImage: abort",!1,d,E),E.ontimeout=z($t,g,"TestLoadImage: timeout",!1,d,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function La(l,d){const g=new di,E=new AbortController,L=setTimeout(()=>{E.abort(),$t(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(U=>{clearTimeout(L),U.ok?$t(g,"TestPingServer: ok",!0,d):$t(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),$t(g,"TestPingServer: error",!1,d)})}function $t(l,d,g,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(g)}catch{}}function Nu(){this.g=new ho}function Fa(l,d,g){const E=g||"";try{Ar(l,function(L,U){let J=L;v(L)&&(J=uo(L)),d.push(E+U+"="+encodeURIComponent(J))})}catch(L){throw d.push(E+"type="+encodeURIComponent("_badmap")),L}}function ar(l){this.l=l.Ub||null,this.j=l.eb||!1}B(ar,hi),ar.prototype.g=function(){return new Ei(this.l,this.j)},ar.prototype.i=(function(l){return function(){return l}})({});function Ei(l,d){ht.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Ei,ht),i=Ei.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Cn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,An(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ba(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ba(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?An(this):Cn(this),this.readyState==3&&ba(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,An(this))},i.Qa=function(l){this.g&&(this.response=l,An(this))},i.ga=function(){this.g&&An(this)};function An(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Cn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Cn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function lr(l){let d="";return le(l,function(g,E){d+=E,d+=":",d+=g,d+=`\r
`}),d}function Vr(l,d,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=lr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,d,g))}function Ke(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Ke,ht);var Du=/^https?$/i,To=["POST","PUT"];i=Ke.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wn.g(),this.v=this.o?Xi(this.o):Xi(wn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){wi(this,U);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)g.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())g.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(To,d,void 0))||E||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of g)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{us(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){wi(this,U)}};function wi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,ls(l),tn(l)}function ls(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ft(this,"complete"),ft(this,"abort"),tn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Io(this):this.bb())},i.bb=function(){Io(this)};function Io(l){if(l.h&&typeof f<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)oo(l.Ea,0,l);else if(ft(l,"readystatechange"),qt(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var E;if(E=J===0){var L=String(l.D).match(_i)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),E=!Du.test(L?L.toLowerCase():"")}g=E}if(g)ft(l,"complete"),ft(l,"success");else{l.m=6;try{var U=2<qt(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",ls(l)}}finally{tn(l)}}}}function tn(l,d){if(l.g){us(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ft(l,"ready");try{g.onreadystatechange=E}catch{}}}function us(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),co(d)}};function So(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function cs(l){const d={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(me(l[E]))continue;var g=N(l[E]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[L]||[];d[L]=U,U.push(g)}V(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Ao(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,l),this.cb=Un("retryDelaySeedMs",1e4,l),this.Wa=Un("forwardChannelMaxRetries",2,l),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(l&&l.concurrentRequestLimit),this.Da=new Nu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ao.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,E){nt(0),this.W=l,this.H=d||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Ba(this,null,this.W),zn(this)};function St(l){if(hs(l),l.G==3){var d=l.U++,g=en(l.I);if(ze(g,"SID",l.K),ze(g,"RID",d),ze(g,"TYPE","terminate"),ur(l,g),d=new Tn(l,l.j,d),d.L=2,d.v=Pr(en(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=$a(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$e(d)}za(l)}function Rn(l){l.g&&(Co(l),l.g.cancel(),l.g=null)}function hs(l){Rn(l),l.u&&(m.clearTimeout(l.u),l.u=null),ps(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function zn(l){if(!Zt(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ue||ne(),Z||(Ue(),Z=!0),ge.add(d,l),l.B=0}}function Mu(l,d){return ka(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vn(R(l.Ga,l,d),Ua(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Tn(this,this.j,l);let U=this.o;if(this.S&&(U?(U=I(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Nr(this,L,d),g=en(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),ur(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(lr(U)))+"&"+d:this.m&&Vr(g,this.m,U)),Eo(this.h,L),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",d),ze(g,"SID","null"),L.T=!0,is(L,g,null)):is(L,g,d),this.G=2}}else this.G==3&&(l?fs(this,l):this.i.length==0||Zt(this.h)||fs(this))};function fs(l,d){var g;d?g=d.l:g=l.U++;const E=en(l.I);ze(E,"SID",l.K),ze(E,"RID",g),ze(E,"AID",l.T),ur(l,E),l.m&&l.o&&Vr(E,l.m,l.o),g=new Tn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Nr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Eo(l.h,g),is(g,E,d)}function ur(l,d){l.H&&le(l.H,function(g,E){ze(d,E,g)}),l.l&&Ar({},function(g,E){ze(d,E,g)})}function Nr(l,d,g){g=Math.min(l.i.length,g);var E=l.l?R(l.l.Na,l.l,l):null;e:{var L=l.i;let U=-1;for(;;){const J=["count="+g];U==-1?0<g?(U=L[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let je=!0;for(let dt=0;dt<g;dt++){let xe=L[dt].g;const _t=L[dt].map;if(xe-=U,0>xe)U=Math.max(0,L[dt].g-100),je=!1;else try{Fa(_t,J,"req"+xe+"_")}catch{E&&E(_t)}}if(je){E=J.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,E}function Ti(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ue||ne(),Z||(Ue(),Z=!0),ge.add(d,l),l.v=0}}function ds(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vn(R(l.Fa,l),Ua(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vn(R(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Rn(this),ja(this))};function Co(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function ja(l){l.g=new Tn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=en(l.qa);ze(d,"RID","rpc"),ze(d,"SID",l.K),ze(d,"AID",l.T),ze(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(d,"TO",l.ja),ze(d,"TYPE","xmlhttp"),ur(l,d),l.m&&l.o&&Vr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Pr(en(d)),g.m=null,g.P=!0,_o(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Rn(this),ds(this),nt(19))};function ps(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ms(l,d){var g=null;if(l.g==d){ps(l),Co(l),l.g=null;var E=2}else if(jt(l.h,d))g=d.D,xa(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;E=fi(),ft(E,new es(E,g)),zn(l)}else Ti(l);else if(L=d.s,L==3||L==0&&0<d.X||!(E==1&&Mu(l,d)||E==2&&ds(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:cr(l,5);break;case 4:cr(l,10);break;case 3:cr(l,6);break;default:cr(l,2)}}}function Ua(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function cr(l,d){if(l.j.info("Error code "+d),d==2){var g=R(l.fb,l),E=l.Xa;const L=!E;E=new or(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vi(E,"https"),Pr(E),L?Vu(E.toString(),g):La(E.toString(),g)}else nt(2);l.G=0,l.l&&l.l.sa(d),za(l),hs(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function za(l){if(l.G=0,l.ka=[],l.l){const d=Va(l.h);(d.length!=0||l.i.length!=0)&&(M(l.ka,d),M(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function Ba(l,d,g){var E=g instanceof or?en(g):new or(g);if(E.g!="")d&&(E.g=d+"."+E.g),Cr(E,E.s);else{var L=m.location;E=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var U=new or(null);E&&vi(U,E),d&&(U.g=d),L&&Cr(U,L),g&&(U.l=g),E=U}return g=l.D,d=l.ya,g&&d&&ze(E,g,d),ze(E,"VER",l.la),ur(l,E),E}function $a(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ke(new ar({eb:g})):new Ke(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}i=Ro.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function gs(){}gs.prototype.g=function(l,d){return new Ut(l,d)};function Ut(l,d){ht.call(this),this.g=new Ao(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!me(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!me(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Bn(this)}B(Ut,ht),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){St(this.g)},Ut.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=uo(l),l=g);d.i.push(new Pa(d.Ya++,l)),d.G==3&&zn(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,Ut.aa.N.call(this)};function qa(l){Ln.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}B(qa,Ln);function Ha(){Zi.call(this),this.status=1}B(Ha,Zi);function Bn(l){this.g=l}B(Bn,Ro),Bn.prototype.ua=function(){ft(this.g,"a")},Bn.prototype.ta=function(l){ft(this.g,new qa(l))},Bn.prototype.sa=function(l){ft(this.g,new Ha)},Bn.prototype.ra=function(){ft(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,wg=function(){return new gs},Eg=function(){return fi()},vg=Fn,vh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,ql=ns,Sa.COMPLETE="complete",_g=Sa,Ji.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Jo=Ji,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,yg=Ke}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const tm="@firebase/firestore",nm="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new cg("@firebase/firestore");function bs(){return Ui.logLevel}function re(i,...e){if(Ui.logLevel<=Ne.DEBUG){const n=e.map(Bh);Ui.debug(`Firestore (${Xs}): ${i}`,...n)}}function Er(i,...e){if(Ui.logLevel<=Ne.ERROR){const n=e.map(Bh);Ui.error(`Firestore (${Xs}): ${i}`,...n)}}function qs(i,...e){if(Ui.logLevel<=Ne.WARN){const n=e.map(Bh);Ui.warn(`Firestore (${Xs}): ${i}`,...n)}}function Bh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Tg(i,s,n)}function Tg(i,e,n){let s=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Er(s),new Error(s)}function be(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||Tg(e,a,s)}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class nE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xr,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(be(typeof s.accessToken=="string",31837,{l:s}),new Ig(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class iE{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sE{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new iE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,U0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);const s=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=aE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function Eh(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return uh(a)===uh(c)?Ce(a,c):uh(a)?1:-1}return Ce(i.length,e.length)}const lE=55296,uE=57343;function uh(i){const e=i.charCodeAt(0);return e>=lE&&e<=uE}function Hs(i,e,n){return i.length===e.length&&i.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="__name__";class Gn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ve(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Gn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Ce(e.length,n.length)}static compareSegments(e,n){const s=Gn.isNumericId(e),a=Gn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Gn.extractNumericId(e).compare(Gn.extractNumericId(n)):Eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}}class He extends Gn{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ee(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const cE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Gn{construct(e,n,s){return new Pt(e,n,s)}static isValidIdentifier(e){return cE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===im}static keyField(){return new Pt([im])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ee(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ee(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ee(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(He.fromString(e))}static fromName(e){return new pe(He.fromString(e).popFirst(5))}static empty(){return new pe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i,e,n){if(!n)throw new ee(q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hE(i,e,n,s){if(e===!0&&s===!0)throw new ee(q.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function sm(i){if(!pe.isDocumentKey(i))throw new ee(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function om(i){if(pe.isDocumentKey(i))throw new ee(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ag(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function hu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function Qn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ee(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hu(i);throw new ee(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(i,e){const n={typeString:i};return e&&(n.value=e),n}function ya(i,e){if(!Ag(i))throw new ee(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(a&&typeof f!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ee(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=-62135596800,lm=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*lm);return new Qe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<am)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lm}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ya(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-am;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:ut("string",Qe._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=-1;function fE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=we.fromTimestamp(s===1e9?new Qe(n+1,0):new Qe(n,s));return new Zr(a,pe.empty(),e)}function dE(i){return new Zr(i.readTime,i.key,ua)}class Zr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Zr(we.min(),pe.empty(),ua)}static max(){return new Zr(we.max(),pe.empty(),ua)}}function pE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(i){if(i.code!==q.FAILED_PRECONDITION||i.message!==mE)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):H.reject(n)}static resolve(e){return new H(((n,s)=>{n(e)}))}static reject(e){return new H(((n,s)=>{s(e)}))}static waitFor(e){return new H(((n,s)=>{let a=0,c=0,f=!1;e.forEach((m=>{++a,m.next((()=>{++c,f&&c===a&&n()}),(y=>s(y)))})),f=!0,c===a&&n()}))}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next((a=>a?H.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,c)=>{s.push(n.call(this,a,c))})),this.waitFor(s)}static mapArray(e,n){return new H(((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((w=>{f[v]=w,++m,m===c&&s(f)}),(w=>a(w)))}}))}static doWhile(e,n){return new H(((s,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):s()};c()}))}}function yE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=-1;function du(i){return i==null}function eu(i){return i===0&&1/i==-1/0}function _E(i){return typeof i=="number"&&Number.isInteger(i)&&!eu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="";function vE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=um(e)),e=EE(i.get(n),e);return um(e)}function EE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case Cg:n+="";break;default:n+=c}}return n}function um(i){return i+Cg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function si(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Rg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Rt.RED,this.left=a??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Rt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hm(this.data.getIterator())}getIteratorFrom(e){return new hm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class hm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new an([])}unionWith(e){let n=new gt(Pt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hs(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Pg("Invalid base64 string: "+c):c}})(e);return new kt(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const wE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(i){if(be(!!i,39018),typeof i=="string"){let e=0;const n=wE.exec(i);if(be(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ti(i){return typeof i=="string"?kt.fromBase64String(i):kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="server_timestamp",xg="__type__",Vg="__previous_value__",Ng="__local_write_time__";function Hh(i){return(i?.mapValue?.fields||{})[xg]?.stringValue===kg}function pu(i){const e=i.mapValue.fields[Vg];return Hh(e)?pu(e):e}function ca(i){const e=ei(i.mapValue.fields[Ng].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,s,a,c,f,m,y,v,w){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w}}const tu="(default)";class ha{constructor(e,n){this.projectId=e,this.database=n||tu}static empty(){return new ha("","")}get isDefaultDatabase(){return this.database===tu}isEqual(e){return e instanceof ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="__type__",IE="__max__",zl={mapValue:{}},Mg="__vector__",nu="value";function ni(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Hh(i)?4:AE(i)?9007199254740991:SE(i)?10:11:ve(28295,{value:i})}function er(i,e){if(i===e)return!0;const n=ni(i);if(n!==ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ca(i).isEqual(ca(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ei(a.timestampValue),m=ei(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return ti(a.bytesValue).isEqual(ti(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return it(a.geoPointValue.latitude)===it(c.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return it(a.integerValue)===it(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=it(a.doubleValue),m=it(c.doubleValue);return f===m?eu(f)===eu(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Hs(i.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(cm(f)!==cm(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!er(f[y],m[y])))return!1;return!0})(i,e);default:return ve(52216,{left:i})}}function fa(i,e){return(i.values||[]).find((n=>er(n,e)))!==void 0}function Ws(i,e){if(i===e)return 0;const n=ni(i),s=ni(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=it(c.integerValue||c.doubleValue),y=it(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return fm(i.timestampValue,e.timestampValue);case 4:return fm(ca(i),ca(e));case 5:return Eh(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=ti(c),y=ti(f);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),y=f.split("/");for(let v=0;v<m.length&&v<y.length;v++){const w=Ce(m[v],y[v]);if(w!==0)return w}return Ce(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Ce(it(c.latitude),it(f.latitude));return m!==0?m:Ce(it(c.longitude),it(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return dm(i.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},y=f.fields||{},v=m[nu]?.arrayValue,w=y[nu]?.arrayValue,C=Ce(v?.values?.length||0,w?.values?.length||0);return C!==0?C:dm(v,w)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===zl.mapValue&&f===zl.mapValue)return 0;if(c===zl.mapValue)return 1;if(f===zl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=f.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let C=0;C<y.length&&C<w.length;++C){const R=Eh(y[C],w[C]);if(R!==0)return R;const z=Ws(m[y[C]],v[w[C]]);if(z!==0)return z}return Ce(y.length,w.length)})(i.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function fm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=ei(i),s=ei(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function dm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Ws(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function Gs(i){return wh(i)}function wh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=ei(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ti(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return pe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=wh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${wh(n.fields[f])}`;return a+"}"})(i.mapValue):ve(61005,{value:i})}function Hl(i){switch(ni(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pu(i);return e?16+Hl(e):16;case 5:return 2*i.stringValue.length;case 6:return ti(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+Hl(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return si(s.fields,((c,f)=>{a+=c.length+Hl(f)})),a})(i.mapValue);default:throw ve(13486,{value:i})}}function pm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Th(i){return!!i&&"integerValue"in i}function Wh(i){return!!i&&"arrayValue"in i}function mm(i){return!!i&&"nullValue"in i}function gm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Wl(i){return!!i&&"mapValue"in i}function SE(i){return(i?.mapValue?.fields||{})[Dg]?.stringValue===Mg}function ra(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return si(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ra(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(i.arrayValue.values[n]);return e}return{...i}}function AE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===IE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=Pt.emptyPath(),s={},a=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}f?s[m.lastSegment()]=ra(f):a.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Wl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){si(n,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new Jt(ra(this.value))}}function Og(i){const e=[];return si(i.fields,((n,s)=>{const a=new Pt([n]);if(Wl(s)){const c=Og(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,s,a,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new bt(e,0,we.min(),we.min(),we.min(),Jt.empty(),0)}static newFoundDocument(e,n,s,a){return new bt(e,1,n,we.min(),s,a,0)}static newNoDocument(e,n){return new bt(e,2,n,we.min(),we.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,we.min(),we.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.position=e,this.inclusive=n}}function ym(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=pe.comparator(pe.fromName(f.referenceValue),n.key):s=Ws(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function _m(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!er(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n="asc"){this.field=e,this.dir=n}}function CE(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{}class lt extends Lg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new PE(e,n,s):n==="array-contains"?new VE(e,s):n==="in"?new NE(e,s):n==="not-in"?new DE(e,s):n==="array-contains-any"?new ME(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new kE(e,s):new xE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ws(n,this.value)):n!==null&&ni(this.value)===ni(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends Lg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new On(e,n)}matches(e){return Fg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fg(i){return i.op==="and"}function bg(i){return RE(i)&&Fg(i)}function RE(i){for(const e of i.filters)if(e instanceof On)return!1;return!0}function Ih(i){if(i instanceof lt)return i.field.canonicalString()+i.op.toString()+Gs(i.value);if(bg(i))return i.filters.map((e=>Ih(e))).join(",");{const e=i.filters.map((n=>Ih(n))).join(",");return`${i.op}(${e})`}}function jg(i,e){return i instanceof lt?(function(s,a){return a instanceof lt&&s.op===a.op&&s.field.isEqual(a.field)&&er(s.value,a.value)})(i,e):i instanceof On?(function(s,a){return a instanceof On&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,m)=>c&&jg(f,a.filters[m])),!0):!1})(i,e):void ve(19439)}function Ug(i){return i instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Gs(n.value)}`})(i):i instanceof On?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ug).join(" ,")+"}"})(i):"Filter"}class PE extends lt{constructor(e,n,s){super(e,n,s),this.key=pe.fromName(s.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class kE extends lt{constructor(e,n){super(e,"in",n),this.keys=zg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xE extends lt{constructor(e,n){super(e,"not-in",n),this.keys=zg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zg(i,e){return(e.arrayValue?.values||[]).map((n=>pe.fromName(n.referenceValue)))}class VE extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wh(n)&&fa(n.arrayValue,this.value)}}class NE extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}}class DE extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fa(this.value.arrayValue,n)}}class ME extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>fa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function vm(i,e=null,n=[],s=[],a=null,c=null,f=null){return new OE(i,e,n,s,a,c,f)}function Gh(i){const e=Te(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Ih(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Gs(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Gs(s))).join(",")),e.Te=n}return e.Te}function Qh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!CE(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!_m(i.startAt,e.startAt)&&_m(i.endAt,e.endAt)}function Sh(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LE(i,e,n,s,a,c,f,m){return new eo(i,e,n,s,a,c,f,m)}function Kh(i){return new eo(i)}function Em(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Bg(i){return i.collectionGroup!==null}function ia(i){const e=Te(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new gt(Pt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new da(c,s))})),n.has(Pt.keyField().canonicalString())||e.Ie.push(new da(Pt.keyField(),s))}return e.Ie}function Kn(i){const e=Te(i);return e.Ee||(e.Ee=FE(e,ia(i))),e.Ee}function FE(i,e){if(i.limitType==="F")return vm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new da(a.field,c)}));const n=i.endAt?new ru(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ru(i.startAt.position,i.startAt.inclusive):null;return vm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Ah(i,e){const n=i.filters.concat([e]);return new eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Ch(i,e,n){return new eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function mu(i,e){return Qh(Kn(i),Kn(e))&&i.limitType===e.limitType}function $g(i){return`${Gh(Kn(i))}|lt:${i.limitType}`}function js(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>Ug(a))).join(", ")}]`),du(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>Gs(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>Gs(a))).join(",")),`Target(${s})`})(Kn(i))}; limitType=${i.limitType})`}function gu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):pe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of ia(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(f,m,y){const v=ym(f,m,y);return f.inclusive?v<=0:v<0})(s.startAt,ia(s),a)||s.endAt&&!(function(f,m,y){const v=ym(f,m,y);return f.inclusive?v>=0:v>0})(s.endAt,ia(s),a))})(i,e)}function bE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function qg(i){return(e,n)=>{let s=!1;for(const a of ia(i)){const c=jE(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function jE(i,e,n){const s=i.field.isKeyField()?pe.comparator(e.key,n.key):(function(c,f,m){const y=f.data.field(c),v=m.data.field(c);return y!==null&&v!==null?Ws(y,v):ve(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,((n,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Ze(pe.comparator);function wr(){return UE}const Hg=new Ze(pe.comparator);function Zo(...i){let e=Hg;for(const n of i)e=e.insert(n.key,n);return e}function Wg(i){let e=Hg;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Fi(){return sa()}function Gg(){return sa()}function sa(){return new qi((i=>i.toString()),((i,e)=>i.isEqual(e)))}const zE=new Ze(pe.comparator),BE=new gt(pe.comparator);function Re(...i){let e=BE;for(const n of i)e=e.add(n);return e}const $E=new gt(Ce);function qE(){return $E}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function Qg(i){return{integerValue:""+i}}function HE(i,e){return _E(e)?Qg(e):Yh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this._=void 0}}function WE(i,e,n){return i instanceof pa?(function(a,c){const f={fields:{[xg]:{stringValue:kg},[Ng]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Hh(c)&&(c=pu(c)),c&&(f.fields[Vg]=c),{mapValue:f}})(n,e):i instanceof ma?Yg(i,e):i instanceof ga?Xg(i,e):(function(a,c){const f=Kg(a,c),m=wm(f)+wm(a.Ae);return Th(f)&&Th(a.Ae)?Qg(m):Yh(a.serializer,m)})(i,e)}function GE(i,e,n){return i instanceof ma?Yg(i,e):i instanceof ga?Xg(i,e):n}function Kg(i,e){return i instanceof iu?(function(s){return Th(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class pa extends yu{}class ma extends yu{constructor(e){super(),this.elements=e}}function Yg(i,e){const n=Jg(e);for(const s of i.elements)n.some((a=>er(a,s)))||n.push(s);return{arrayValue:{values:n}}}class ga extends yu{constructor(e){super(),this.elements=e}}function Xg(i,e){let n=Jg(e);for(const s of i.elements)n=n.filter((a=>!er(a,s)));return{arrayValue:{values:n}}}class iu extends yu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wm(i){return it(i.integerValue||i.doubleValue)}function Jg(i){return Wh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.field=e,this.transform=n}}function KE(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof ma&&a instanceof ma||s instanceof ga&&a instanceof ga?Hs(s.elements,a.elements,er):s instanceof iu&&a instanceof iu?er(s.Ae,a.Ae):s instanceof pa&&a instanceof pa})(i.transform,e.transform)}class YE{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class _u{}function Zg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Xh(i.key,Mn.none()):new _a(i.key,i.data,Mn.none());{const n=i.data,s=Jt.empty();let a=new gt(Pt.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new oi(i.key,s,new an(a.toArray()),Mn.none())}}function XE(i,e,n){i instanceof _a?(function(a,c,f){const m=a.value.clone(),y=Im(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof oi?(function(a,c,f){if(!Gl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Im(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(ey(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,n):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function oa(i,e,n,s){return i instanceof _a?(function(c,f,m,y){if(!Gl(c.precondition,f))return m;const v=c.value.clone(),w=Sm(c.fieldTransforms,y,f);return v.setAll(w),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null})(i,e,n,s):i instanceof oi?(function(c,f,m,y){if(!Gl(c.precondition,f))return m;const v=Sm(c.fieldTransforms,y,f),w=f.data;return w.setAll(ey(c)),w.setAll(v),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(i,e,n,s):(function(c,f,m){return Gl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function JE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Kg(s.transform,a||null);c!=null&&(n===null&&(n=Jt.empty()),n.set(s.field,c))}return n||null}function Tm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Hs(s,a,((c,f)=>KE(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class _a extends _u{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oi extends _u{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ey(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function Im(i,e,n){const s=new Map;be(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,GE(f,m,n[a]))}return s}function Sm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,WE(c,f,e))}return s}class Xh extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZE extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&XE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=oa(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=oa(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Gg();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(a.key)?null:m;const y=Zg(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Hs(this.mutations,e.mutations,((n,s)=>Tm(n,s)))&&Hs(this.baseMutations,e.baseMutations,((n,s)=>Tm(n,s)))}}class Jh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){be(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return zE})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Jh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ve;function rw(i){switch(i){case q.OK:return ve(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function ty(i){if(i===void 0)return Er("GRPC error has no .code"),q.UNKNOWN;switch(i){case at.OK:return q.OK;case at.CANCELLED:return q.CANCELLED;case at.UNKNOWN:return q.UNKNOWN;case at.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case at.INTERNAL:return q.INTERNAL;case at.UNAVAILABLE:return q.UNAVAILABLE;case at.UNAUTHENTICATED:return q.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case at.NOT_FOUND:return q.NOT_FOUND;case at.ALREADY_EXISTS:return q.ALREADY_EXISTS;case at.PERMISSION_DENIED:return q.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case at.ABORTED:return q.ABORTED;case at.OUT_OF_RANGE:return q.OUT_OF_RANGE;case at.UNIMPLEMENTED:return q.UNIMPLEMENTED;case at.DATA_LOSS:return q.DATA_LOSS;default:return ve(39323,{code:i})}}(Ve=at||(at={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Yr([4294967295,4294967295],0);function Am(i){const e=iw().encode(i),n=new gg;return n.update(e),new Uint8Array(n.digest())}function Cm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yr([n,s],0),new Yr([a,c],0)]}class Zh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(s<0)throw new ea(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Yr.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(Yr.fromNumber(s)));return a.compare(sw)===1&&(a=new Yr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Am(e),[s,a]=Cm(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Zh(c,a,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Am(e),[s,a]=Cm(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new vu(we.min(),a,new Ze(Ce),wr(),Re())}}class va{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new va(s,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class ny{constructor(e,n){this.targetId=e,this.Ce=n}}class ry{constructor(e,n,s=kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Rm{constructor(){this.ve=0,this.Fe=Pm(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),s=Re();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:ve(38017,{changeType:c})}})),new va(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Pm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ow{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ze(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const c=a.target;if(Sh(c))if(s===0){const f=new pe(c.path);this.et(n,f,bt.newNoDocument(f,we.min()))}else be(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),y=m?this.ct(m,e,f):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,m;try{f=ti(s).toUint8Array()}catch(y){if(y instanceof Pg)return qs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Zh(f,a,c)}catch(y){return qs(y instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&Sh(m.target)){const y=new pe(m.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,bt.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Re();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const a=new vu(e,n,this.Ye,this.je,s);return this.je=wr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ze(Ce),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rm),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bl(){return new Ze(pe.comparator)}function Pm(){return new Ze(pe.comparator)}const aw={asc:"ASCENDING",desc:"DESCENDING"},lw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uw={and:"AND",or:"OR"};class cw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rh(i,e){return i.useProto3Json||du(e)?e:{value:e}}function su(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hw(i,e){return su(i,e.toTimestamp())}function Yn(i){return be(!!i,49232),we.fromTimestamp((function(n){const s=ei(n);return new Qe(s.seconds,s.nanos)})(i))}function ef(i,e){return Ph(i,e).canonicalString()}function Ph(i,e){const n=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?n:n.child(e)}function sy(i){const e=He.fromString(i);return be(cy(e),10190,{key:e.toString()}),e}function kh(i,e){return ef(i.databaseId,e.path)}function ch(i,e){const n=sy(e);if(n.get(1)!==i.databaseId.projectId)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new pe(ay(n))}function oy(i,e){return ef(i.databaseId,e)}function fw(i){const e=sy(i);return e.length===4?He.emptyPath():ay(e)}function xh(i){return new He(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ay(i){return be(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function km(i,e,n){return{name:kh(i,e),fields:n.value.mapValue.fields}}function dw(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ve(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(v,w){return v.useProto3Json?(be(w===void 0||typeof w=="string",58123),kt.fromBase64String(w||"")):(be(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),kt.fromUint8Array(w||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(v){const w=v.code===void 0?q.UNKNOWN:ty(v.code);return new ee(w,v.message||"")})(f);n=new ry(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=ch(i,s.document.name),c=Yn(s.document.updateTime),f=s.document.createTime?Yn(s.document.createTime):we.min(),m=new Jt({mapValue:{fields:s.document.fields}}),y=bt.newFoundDocument(a,c,f,m),v=s.targetIds||[],w=s.removedTargetIds||[];n=new Ql(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=ch(i,s.document),c=s.readTime?Yn(s.readTime):we.min(),f=bt.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Ql([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=ch(i,s.document),c=s.removedTargetIds||[];n=new Ql([],c,a,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new nw(a,c),m=s.targetId;n=new ny(m,f)}}return n}function pw(i,e){let n;if(e instanceof _a)n={update:km(i,e.key,e.value)};else if(e instanceof Xh)n={delete:kh(i,e.key)};else if(e instanceof oi)n={update:km(i,e.key,e.data),updateMask:Iw(e.fieldMask)};else{if(!(e instanceof ZE))return ve(16599,{Vt:e.type});n={verify:kh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof pa)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ma)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ga)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof iu)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw ve(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:hw(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve(27497)})(i,e.precondition)),n}function mw(i,e){return i&&i.length>0?(be(e!==void 0,14353),i.map((n=>(function(a,c){let f=a.updateTime?Yn(a.updateTime):Yn(c);return f.isEqual(we.min())&&(f=Yn(c)),new YE(f,a.transformResults||[])})(n,e)))):[]}function gw(i,e){return{documents:[oy(i,e.path)]}}function yw(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=oy(i,a);const c=(function(v){if(v.length!==0)return uy(On.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(v){if(v.length!==0)return v.map((w=>(function(R){return{field:Us(R.field),direction:Ew(R.dir)}})(w)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Rh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:a}}function _w(i){let e=fw(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){be(s===1,65062);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=(function(C){const R=ly(C);return R instanceof On&&bg(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(C){return C.map((R=>(function(B){return new da(zs(B.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(C){let R;return R=typeof C=="object"?C.value:C,du(R)?null:R})(n.limit));let y=null;n.startAt&&(y=(function(C){const R=!!C.before,z=C.values||[];return new ru(z,R)})(n.startAt));let v=null;return n.endAt&&(v=(function(C){const R=!C.before,z=C.values||[];return new ru(z,R)})(n.endAt)),LE(e,a,f,c,m,"F",y,v)}function vw(i,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ly(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zs(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=zs(n.unaryFilter.field);return lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=zs(n.unaryFilter.field);return lt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=zs(n.unaryFilter.field);return lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(i):i.fieldFilter!==void 0?(function(n){return lt.create(zs(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return On.create(n.compositeFilter.filters.map((s=>ly(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(n.compositeFilter.op))})(i):ve(30097,{filter:i})}function Ew(i){return aw[i]}function ww(i){return lw[i]}function Tw(i){return uw[i]}function Us(i){return{fieldPath:i.canonicalString()}}function zs(i){return Pt.fromServerFormat(i.fieldPath)}function uy(i){return i instanceof lt?(function(n){if(n.op==="=="){if(gm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(mm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(mm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:ww(n.op),value:n.value}}})(i):i instanceof On?(function(n){const s=n.getFilters().map((a=>uy(a)));return s.length===1?s[0]:{compositeFilter:{op:Tw(n.op),filters:s}}})(i):ve(54877,{filter:i})}function Iw(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,s,a,c=we.min(),f=we.min(),m=kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.yt=e}}function Aw(i){const e=_w({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.Cn=new Rw}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Zr.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Rw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new gt(He.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new gt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hy=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(hy,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qs(0)}static cr(){return new Qs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="LruGarbageCollector",Pw=1048576;function Nm([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class kw{constructor(e){this.Ir=e,this.buffer=new gt(Nm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Nm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xw{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Vm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zs(n)?re(Vm,"Ignoring IndexedDB error during garbage collection: ",n):await Js(n)}await this.Vr(3e5)}))}}class Vw{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return H.resolve(fu.ce);const s=new kw(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(xm)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xm):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,c,f,m,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,f=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(s=C,m=Date.now(),this.removeTargets(e,s,n)))).next((C=>(c=C,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((C=>(v=Date.now(),bs()<=Ne.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-w}ms
	Determined least recently used ${a} in `+(m-f)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${C} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function Nw(i,e){return new Vw(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.changes=new qi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&oa(s.mutation,a,an.empty(),Qe.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Re()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Re()){const a=Fi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((c=>{let f=Zo();return c.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Fi();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Re())))}populateOverlays(e,n,s){const a=[];return s.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,a){let c=wr();const f=sa(),m=(function(){return sa()})();return n.forEach(((y,v)=>{const w=s.get(v.key);a.has(v.key)&&(w===void 0||w.mutation instanceof oi)?c=c.insert(v.key,v):w!==void 0?(f.set(v.key,w.mutation.getFieldMask()),oa(w.mutation,v,w.mutation.getFieldMask(),Qe.now())):f.set(v.key,an.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,w)=>f.set(v,w))),n.forEach(((v,w)=>m.set(v,new Mw(w,f.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=sa();let a=new Ze(((f,m)=>f-m)),c=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let w=s.get(y)||an.empty();w=m.applyToLocalView(v,w),s.set(y,w);const C=(a.get(m.batchId)||Re()).add(y);a=a.insert(m.batchId,C)}))})).next((()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,w=y.value,C=Gg();w.forEach((R=>{if(!c.has(R)){const z=Zg(n.get(R),s.get(R));z!==null&&C.set(R,z),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,v,C))}return H.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(f){return pe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):H.resolve(Fi());let m=ua,y=c;return f.next((v=>H.forEach(v,((w,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),c.get(w)?H.resolve():this.remoteDocumentCache.getEntry(e,w).next((R=>{y=y.insert(w,R)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,Re()))).next((w=>({batchId:m,changes:Wg(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((s=>{let a=Zo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Zo();return this.indexManager.getCollectionParents(e,c).next((m=>H.forEach(m,(y=>{const v=(function(C,R){return new eo(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((w=>{w.forEach(((C,R)=>{f=f.insert(C,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a)))).next((f=>{c.forEach(((y,v)=>{const w=v.getKey();f.get(w)===null&&(f=f.insert(w,bt.newInvalidDocument(w)))}));let m=Zo();return f.forEach(((y,v)=>{const w=c.get(y);w!==void 0&&oa(w.mutation,v,an.empty(),Qe.now()),gu(n,v)&&(m=m.insert(y,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}})(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:Aw(a.bundledQuery),readTime:Yn(a.readTime)}})(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.overlays=new Ze(pe.comparator),this.qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Fi();return H.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,c)=>{this.St(e,n,c)})),H.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const a=Fi(),c=n.length+1,f=new pe(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return H.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ze(((v,w)=>v-w));const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let w=c.get(v.largestBatchId);w===null&&(w=Fi(),c=c.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const m=Fi(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,w)=>m.set(v,w))),!(m.size()>=a)););return H.resolve(m)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new tw(n,s));let c=this.qr.get(n);c===void 0&&(c=Re(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this.Qr=new gt(Tt.$r),this.Ur=new gt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Tt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new pe(new He([])),s=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.Ur.forEachInRange([s,a],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new He([])),s=new Tt(n,e),a=new Tt(n,e+1);let c=Re();return this.Ur.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Tt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(Tt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new ew(c,n,s,a);this.mutationQueue.push(f);for(const m of a)this.Zr=this.Zr.add(new Tt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return H.resolve(f)}lookupMutationBatch(e,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),c=a<0?0:a;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?qh:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,a],(f=>{const m=this.Xr(f.Yr);c.push(m)})),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new gt(Ce);return n.forEach((a=>{const c=new Tt(a,0),f=new Tt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{s=s.add(m.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;pe.isDocumentKey(c)||(c=c.child(""));const f=new Tt(new pe(c),0);let m=new gt(Ce);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.Yr)),!0)}),f),H.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(n.mutations,(a=>{const c=new Tt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Tt(n,0),a=this.Zr.firstAfterOrEqual(s);return H.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.ri=e,this.docs=(function(){return new Ze(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let s=wr();return n.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():bt.newInvalidDocument(a))})),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=wr();const f=n.path,m=new pe(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||pE(dE(w),s)<=0||(a.has(w.key)||gu(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,n,s,a){ve(9500)}ii(e,n){return H.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new zw(this)}getSize(e){return H.resolve(this.size)}}class zw extends Dw{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),H.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.persistence=e,this.si=new qi((n=>Gh(n)),Qh),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new tf,this.targetCount=0,this.ai=Qs.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),H.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Pr(n),H.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),H.waitFor(c).next((()=>a))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),H.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.ui={},this.overlays={},this.ci=new fu(0),this.li=!1,this.li=!0,this.hi=new bw,this.referenceDelegate=e(this),this.Pi=new Bw(this),this.indexManager=new Cw,this.remoteDocumentCache=(function(a){return new Uw(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Sw(n),this.Ii=new Lw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new jw(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const a=new $w(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,n){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class $w extends gE{constructor(e){super(),this.currentSequenceNumber=e}}class nf{constructor(e){this.persistence=e,this.Ri=new tf,this.Vi=null}static mi(e){return new nf(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const a=pe.fromPath(s);return this.gi(e,a).next((c=>{c||n.removeEntry(a,we.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ou{constructor(e,n){this.persistence=e,this.pi=new qi((s=>vE(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=Nw(this,n)}static mi(e,n){return new ou(e,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return H.forEach(this.pi,((s,a)=>this.br(e,s,a).next((c=>c?H.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,c.removeEntry(f,we.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hl(e.data.value)),n}br(e,n,s){return H.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return H.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Re(),a=Re();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new rf(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dv()?8:yE(Vv())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new qw;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(bs()<=Ne.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(bs()<=Ne.DEBUG&&re("QueryEngine","Query:",js(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(bs()<=Ne.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):H.resolve())}ys(e,n){if(Em(n))return H.resolve(null);let s=Kn(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Ch(n,null,"F"),s=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Re(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.Ds(n,m);return this.Cs(n,v,f,y.readTime)?this.ys(e,Ch(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,s,a){return Em(n)||a.isEqual(we.min())?H.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,a)?H.resolve(null):(bs()<=Ne.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),js(n)),this.vs(e,f,n,fE(a,ua)).next((m=>m)))}))}Ds(e,n){let s=new gt(qg(e));return n.forEach(((a,c)=>{gu(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return bs()<=Ne.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",js(n)),this.ps.getDocumentsMatchingQuery(e,n,Zr.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="LocalStore",Ww=3e8;class Gw{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ze(Ce),this.xs=new qi((c=>Gh(c)),Qh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ow(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Qw(i,e,n,s){return new Gw(i,e,n,s)}async function dy(i,e){const n=Te(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let y=Re();for(const v of a){f.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of c){m.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return n.localDocuments.getDocuments(s,y).next((v=>({Ls:v,removedBatchIds:f,addedBatchIds:m})))}))}))}function Kw(i,e){const n=Te(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,w){const C=v.batch,R=C.keys();let z=H.resolve();return R.forEach((B=>{z=z.next((()=>w.getEntry(y,B))).next(($=>{const M=v.docVersions.get(B);be(M!==null,48541),$.version.compareTo(M)<0&&(C.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),w.addEntry($)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(y,C)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=Re();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function py(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Yw(i,e){const n=Te(i),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const m=[];e.targetChanges.forEach(((w,C)=>{const R=a.get(C);if(!R)return;m.push(n.Pi.removeMatchingKeys(c,w.removedDocuments,C).next((()=>n.Pi.addMatchingKeys(c,w.addedDocuments,C))));let z=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?z=z.withResumeToken(kt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):w.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(w.resumeToken,s)),a=a.insert(C,z),(function($,M,fe){return $.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Ww?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(R,z,w)&&m.push(n.Pi.updateTargetData(c,z))}));let y=wr(),v=Re();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(Xw(c,f,e.documentUpdates).next((w=>{y=w.ks,v=w.qs}))),!s.isEqual(we.min())){const w=n.Pi.getLastRemoteSnapshotVersion(c).next((C=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(w)}return H.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=a,c)))}function Xw(i,e,n){let s=Re(),a=Re();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=wr();return n.forEach(((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):re(sf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{ks:f,qs:a}}))}function Jw(i,e){const n=Te(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Zw(i,e){const n=Te(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((c=>c?(a=c,H.resolve(a)):n.Pi.allocateTargetId(s).next((f=>(a=new Gr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Vh(i,e,n){const s=Te(i),a=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Zs(f))throw f;re(sf,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function Dm(i,e,n){const s=Te(i);let a=we.min(),c=Re();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,v,w){const C=Te(y),R=C.xs.get(w);return R!==void 0?H.resolve(C.Ms.get(R)):C.Pi.getTargetData(v,w)})(s,f,Kn(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?a:we.min(),n?c:Re()))).next((m=>(e1(s,bE(e),m),{documents:m,Qs:c})))))}function e1(i,e,n){let s=i.Os.get(e)||we.min();n.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class Mm{constructor(){this.activeTargetIds=qE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t1{constructor(){this.Mo=new Mm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="ConnectivityMonitor";class Lm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(Om,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(Om,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Nh(){return $l===null?$l=(function(){return 268435456+Math.round(2147483648*Math.random())})():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="RestConnection",r1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===tu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,c){const f=Nh(),m=this.zo(e,n.toUriEncodedString());re(hh,`Sending RPC '${e}' ${f}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,a,c);const{host:v}=new URL(m),w=Uh(v);return this.Jo(e,m,y,s,w).then((C=>(re(hh,`Received RPC '${e}' ${f}: `,C),C)),(C=>{throw qs(hh,`RPC '${e}' ${f} failed with error: `,C,"url: ",m,"request:",s),C}))}Ho(e,n,s,a,c,f){return this.Go(e,n,s,a,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}zo(e,n){const s=r1[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class o1 extends i1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Nh();return new Promise(((m,y)=>{const v=new yg;v.setWithCredentials(!0),v.listenOnce(_g.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ql.NO_ERROR:const C=v.getResponseJson();re(Lt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(C)),m(C);break;case ql.TIMEOUT:re(Lt,`RPC '${e}' ${f} timed out`),y(new ee(q.DEADLINE_EXCEEDED,"Request time out"));break;case ql.HTTP_ERROR:const R=v.getStatus();if(re(Lt,`RPC '${e}' ${f} failed with status:`,R,"response text:",v.getResponseText()),R>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const B=z?.error;if(B&&B.status&&B.message){const $=(function(fe){const me=fe.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(me)>=0?me:q.UNKNOWN})(B.status);y(new ee($,B.message))}else y(new ee(q.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ee(q.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{re(Lt,`RPC '${e}' ${f} completed.`)}}));const w=JSON.stringify(a);re(Lt,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",w,s,15)}))}T_(e,n,s){const a=Nh(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=wg(),m=Eg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const w=c.join("");re(Lt,`Creating RPC '${e}' stream ${a}: ${w}`,y);const C=f.createWebChannel(w,y);this.I_(C);let R=!1,z=!1;const B=new s1({Yo:M=>{z?re(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(R||(re(Lt,`Opening RPC '${e}' stream ${a} transport.`),C.open(),R=!0),re(Lt,`RPC '${e}' stream ${a} sending:`,M),C.send(M))},Zo:()=>C.close()}),$=(M,fe,me)=>{M.listen(fe,(de=>{try{me(de)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return $(C,Jo.EventType.OPEN,(()=>{z||(re(Lt,`RPC '${e}' stream ${a} transport opened.`),B.o_())})),$(C,Jo.EventType.CLOSE,(()=>{z||(z=!0,re(Lt,`RPC '${e}' stream ${a} transport closed`),B.a_(),this.E_(C))})),$(C,Jo.EventType.ERROR,(M=>{z||(z=!0,qs(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),B.a_(new ee(q.UNAVAILABLE,"The operation could not be completed")))})),$(C,Jo.EventType.MESSAGE,(M=>{if(!z){const fe=M.data[0];be(!!fe,16349);const me=fe,de=me?.error||me[0]?.error;if(de){re(Lt,`RPC '${e}' stream ${a} received error:`,de);const ce=de.status;let ie=(function(I){const A=at[I];if(A!==void 0)return ty(A)})(ce),le=de.message;ie===void 0&&(ie=q.INTERNAL,le="Unknown error status: "+ce+" with message "+de.message),z=!0,B.a_(new ee(ie,le)),C.close()}else re(Lt,`RPC '${e}' stream ${a} received:`,fe),B.u_(fe)}})),$(m,vg.STAT_EVENT,(M=>{M.stat===vh.PROXY?re(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):M.stat===vh.NOPROXY&&re(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(i){return new cw(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,s=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="PersistentStream";class gy{constructor(e,n,s,a,c,f,m,y){this.Mi=e,this.S_=s,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new my(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new ee(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(Fm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(Fm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class a1 extends gy{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dw(this.serializer,e),s=(function(c){if(!("targetChange"in c))return we.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?we.min():f.readTime?Yn(f.readTime):we.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=xh(this.serializer),n.addTarget=(function(c,f){let m;const y=f.target;if(m=Sh(y)?{documents:gw(c,y)}:{query:yw(c,y).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=iy(c,f.resumeToken);const v=Rh(c,f.expectedCount);v!==null&&(m.expectedCount=v)}else if(f.snapshotVersion.compareTo(we.min())>0){m.readTime=su(c,f.snapshotVersion.toTimestamp());const v=Rh(c,f.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=vw(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=xh(this.serializer),n.removeTarget=e,this.q_(n)}}class l1 extends gy{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=mw(e.writeResults,e.commitTime),s=Yn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=xh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>pw(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class c1 extends u1{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Ph(n,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ee(q.UNKNOWN,c.toString())}))}Ho(e,n,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Ph(n,s),a,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ee(q.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class h1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Er(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class f1{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Hi(this)&&(re(zi,"Restarting streams for network reachability change."),await(async function(y){const v=Te(y);v.Ea.add(4),await Ea(v),v.Ra.set("Unknown"),v.Ea.delete(4),await wu(v)})(this))}))})),this.Ra=new h1(s,a)}}async function wu(i){if(Hi(i))for(const e of i.da)await e(!0)}async function Ea(i){for(const e of i.da)await e(!1)}function yy(i,e){const n=Te(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uf(n)?lf(n):to(n).O_()&&af(n,e))}function of(i,e){const n=Te(i),s=to(n);n.Ia.delete(e),s.O_()&&_y(n,e),n.Ia.size===0&&(s.O_()?s.L_():Hi(n)&&n.Ra.set("Unknown"))}function af(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(i).Y_(e)}function _y(i,e){i.Va.Ue(e),to(i).Z_(e)}function lf(i){i.Va=new ow({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),to(i).start(),i.Ra.ua()}function uf(i){return Hi(i)&&!to(i).x_()&&i.Ia.size>0}function Hi(i){return Te(i).Ea.size===0}function vy(i){i.Va=void 0}async function d1(i){i.Ra.set("Online")}async function p1(i){i.Ia.forEach(((e,n)=>{af(i,e)}))}async function m1(i,e){vy(i),uf(i)?(i.Ra.ha(e),lf(i)):i.Ra.set("Unknown")}async function g1(i,e,n){if(i.Ra.set("Online"),e instanceof ry&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const m of c.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.Ia.delete(m),a.Va.removeTarget(m))})(i,e)}catch(s){re(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await au(i,s)}else if(e instanceof Ql?i.Va.Ze(e):e instanceof ny?i.Va.st(e):i.Va.tt(e),!n.isEqual(we.min()))try{const s=await py(i.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=c.Ia.get(v);w&&c.Ia.set(v,w.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,v)=>{const w=c.Ia.get(y);if(!w)return;c.Ia.set(y,w.withResumeToken(kt.EMPTY_BYTE_STRING,w.snapshotVersion)),_y(c,y);const C=new Gr(w.target,y,v,w.sequenceNumber);af(c,C)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){re(zi,"Failed to raise snapshot:",s),await au(i,s)}}async function au(i,e,n){if(!Zs(e))throw e;i.Ea.add(1),await Ea(i),i.Ra.set("Offline"),n||(n=()=>py(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{re(zi,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await wu(i)}))}function Ey(i,e){return e().catch((n=>au(i,n,e)))}async function Tu(i){const e=Te(i),n=ri(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qh;for(;y1(e);)try{const a=await Jw(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,_1(e,a)}catch(a){await au(e,a)}wy(e)&&Ty(e)}function y1(i){return Hi(i)&&i.Ta.length<10}function _1(i,e){i.Ta.push(e);const n=ri(i);n.O_()&&n.X_&&n.ea(e.mutations)}function wy(i){return Hi(i)&&!ri(i).x_()&&i.Ta.length>0}function Ty(i){ri(i).start()}async function v1(i){ri(i).ra()}async function E1(i){const e=ri(i);for(const n of i.Ta)e.ea(n.mutations)}async function w1(i,e,n){const s=i.Ta.shift(),a=Jh.from(s,e,n);await Ey(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Tu(i)}async function T1(i,e){e&&ri(i).X_&&await(async function(s,a){if((function(f){return rw(f)&&f!==q.ABORTED})(a.code)){const c=s.Ta.shift();ri(s).B_(),await Ey(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Tu(s)}})(i,e),wy(i)&&Ty(i)}async function bm(i,e){const n=Te(i);n.asyncQueue.verifyOperationInProgress(),re(zi,"RemoteStore received new credentials");const s=Hi(n);n.Ea.add(3),await Ea(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wu(n)}async function I1(i,e){const n=Te(i);e?(n.Ea.delete(2),await wu(n)):e||(n.Ea.add(2),await Ea(n),n.Ra.set("Unknown"))}function to(i){return i.ma||(i.ma=(function(n,s,a){const c=Te(n);return c.sa(),new a1(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:d1.bind(null,i),t_:p1.bind(null,i),r_:m1.bind(null,i),H_:g1.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),uf(i)?lf(i):i.Ra.set("Unknown")):(await i.ma.stop(),vy(i))}))),i.ma}function ri(i){return i.fa||(i.fa=(function(n,s,a){const c=Te(n);return c.sa(),new l1(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:v1.bind(null,i),r_:T1.bind(null,i),ta:E1.bind(null,i),na:w1.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Tu(i)):(await i.fa.stop(),i.Ta.length>0&&(re(zi,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,m=new cf(e,n,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hf(i,e){if(Er("AsyncQueue",`${e}: ${i}`),Zs(i))return new ee(q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{static emptySet(e){return new $s(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||pe.comparator(n.key,s.key):(n,s)=>pe.comparator(n.key,s.key),this.keyedMap=Zo(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new $s;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.ga=new Ze(pe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ks{constructor(e,n,s,a,c,f,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Ks(e,n,$s.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class A1{constructor(){this.queries=Um(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Te(n),c=a.queries;a.queries=Um(),c.forEach(((f,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new ee(q.ABORTED,"Firestore shutting down"))}}function Um(){return new qi((i=>$g(i)),mu)}async function Iy(i,e){const n=Te(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.ba()&&e.Da()&&(s=2):(c=new S1,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(a,!0);break;case 1:c.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const m=hf(f,`Initialization of query '${js(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ff(n)}async function Sy(i,e){const n=Te(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function C1(i,e){const n=Te(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(a)&&(s=!0);f.wa=a}}s&&ff(n)}function R1(i,e,n){const s=Te(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function ff(i){i.Ca.forEach((e=>{e.next()}))}var Dh,zm;(zm=Dh||(Dh={})).Ma="default",zm.Cache="cache";class Ay{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ks(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.key=e}}class Ry{constructor(e){this.key=e}}class P1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=qg(e),this.tu=new $s(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new jm,a=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,C)=>{const R=a.get(w),z=gu(this.query,C)?C:null,B=!!R&&this.mutatedKeys.has(R.key),$=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let M=!1;R&&z?R.data.isEqual(z.data)?B!==$&&(s.track({type:3,doc:z}),M=!0):this.su(R,z)||(s.track({type:2,doc:z}),M=!0,(y&&this.eu(z,y)>0||v&&this.eu(z,v)<0)&&(m=!0)):!R&&z?(s.track({type:0,doc:z}),M=!0):R&&!z&&(s.track({type:1,doc:R}),M=!0,(y||v)&&(m=!0)),M&&(z?(f=f.add(z),c=$?c.add(w):c.delete(w)):(f=f.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const w=this.query.limitType==="F"?f.last():f.first();f=f.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{tu:f,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((w,C)=>(function(z,B){const $=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:M})}};return $(z)-$(B)})(w.type,C.type)||this.eu(w.doc,C.doc))),this.ou(s),a=a??!1;const m=n&&!a?this._u():[],y=this.Xa.size===0&&this.current&&!a?1:0,v=y!==this.Za;return this.Za=y,f.length!==0||v?{snapshot:new Ks(this.query,e.tu,c,f,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Ry(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Cy(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ks.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const df="SyncEngine";class k1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class x1{constructor(e){this.key=e,this.hu=!1}}class V1{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new qi((m=>$g(m)),mu),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(pe.comparator),this.Au=new Map,this.Ru=new tf,this.Vu={},this.mu=new Map,this.fu=Qs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function N1(i,e,n=!0){const s=Dy(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await Py(s,e,n,!0),a}async function D1(i,e){const n=Dy(i);await Py(n,e,!0,!1)}async function Py(i,e,n,s){const a=await Zw(i.localStore,Kn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await M1(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&yy(i.remoteStore,a),m}async function M1(i,e,n,s,a){i.pu=(C,R,z)=>(async function($,M,fe,me){let de=M.view.ru(fe);de.Cs&&(de=await Dm($.localStore,M.query,!1).then((({documents:V})=>M.view.ru(V,de))));const ce=me&&me.targetChanges.get(M.targetId),ie=me&&me.targetMismatches.get(M.targetId)!=null,le=M.view.applyChanges(de,$.isPrimaryClient,ce,ie);return $m($,M.targetId,le.au),le.snapshot})(i,C,R,z);const c=await Dm(i.localStore,e,!0),f=new P1(e,c.Qs),m=f.ru(c.documents),y=va.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(m,i.isPrimaryClient,y);$m(i,n,v.au);const w=new k1(e,n,f);return i.Tu.set(e,w),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),v.snapshot}async function O1(i,e,n){const s=Te(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((f=>!mu(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Vh(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&of(s.remoteStore,a.targetId),Mh(s,a.targetId)})).catch(Js)):(Mh(s,a.targetId),await Vh(s.localStore,a.targetId,!0))}async function L1(i,e){const n=Te(i),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),of(n.remoteStore,s.targetId))}async function F1(i,e,n){const s=q1(i);try{const a=await(function(f,m){const y=Te(f),v=Qe.now(),w=m.reduce(((z,B)=>z.add(B.key)),Re());let C,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let B=wr(),$=Re();return y.Ns.getEntries(z,w).next((M=>{B=M,B.forEach(((fe,me)=>{me.isValidDocument()||($=$.add(fe))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,B))).next((M=>{C=M;const fe=[];for(const me of m){const de=JE(me,C.get(me.key).overlayedDocument);de!=null&&fe.push(new oi(me.key,de,Og(de.value.mapValue),Mn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,fe,m)})).next((M=>{R=M;const fe=M.applyToLocalDocumentSet(C,$);return y.documentOverlayCache.saveOverlays(z,M.batchId,fe)}))})).then((()=>({batchId:R.batchId,changes:Wg(C)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,m,y){let v=f.Vu[f.currentUser.toKey()];v||(v=new Ze(Ce)),v=v.insert(m,y),f.Vu[f.currentUser.toKey()]=v})(s,a.batchId,n),await wa(s,a.changes),await Tu(s.remoteStore)}catch(a){const c=hf(a,"Failed to persist write");n.reject(c)}}async function ky(i,e){const n=Te(i);try{const s=await Yw(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=n.Au.get(c);f&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?be(f.hu,14607):a.removedDocuments.size>0&&(be(f.hu,42227),f.hu=!1))})),await wa(n,s,e)}catch(s){await Js(s)}}function Bm(i,e,n){const s=Te(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(f,m){const y=Te(f);y.onlineState=m;let v=!1;y.queries.forEach(((w,C)=>{for(const R of C.Sa)R.va(m)&&(v=!0)})),v&&ff(y)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function b1(i,e,n){const s=Te(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),c=a&&a.key;if(c){let f=new Ze(pe.comparator);f=f.insert(c,bt.newNoDocument(c,we.min()));const m=Re().add(c),y=new vu(we.min(),new Map,new Ze(Ce),f,m);await ky(s,y),s.du=s.du.remove(c),s.Au.delete(e),pf(s)}else await Vh(s.localStore,e,!1).then((()=>Mh(s,e,n))).catch(Js)}async function j1(i,e){const n=Te(i),s=e.batch.batchId;try{const a=await Kw(n.localStore,e);Vy(n,s,null),xy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wa(n,a)}catch(a){await Js(a)}}async function U1(i,e,n){const s=Te(i);try{const a=await(function(f,m){const y=Te(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return y.mutationQueue.lookupMutationBatch(v,m).next((C=>(be(C!==null,37113),w=C.keys(),y.mutationQueue.removeMutationBatch(v,C)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>y.localDocuments.getDocuments(v,w)))}))})(s.localStore,e);Vy(s,e,n),xy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wa(s,a)}catch(a){await Js(a)}}function xy(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Vy(i,e,n){const s=Te(i);let a=s.Vu[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Mh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||Ny(i,s)}))}function Ny(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(of(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),pf(i))}function $m(i,e,n){for(const s of n)s instanceof Cy?(i.Ru.addReference(s.key,e),z1(i,s)):s instanceof Ry?(re(df,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||Ny(i,s.key)):ve(19791,{wu:s})}function z1(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(re(df,"New document in limbo: "+n),i.Eu.add(s),pf(i))}function pf(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new pe(He.fromString(e)),s=i.fu.next();i.Au.set(s,new x1(n)),i.du=i.du.insert(n,s),yy(i.remoteStore,new Gr(Kn(Kh(n.path)),s,"TargetPurposeLimboResolution",fu.ce))}}async function wa(i,e,n){const s=Te(i),a=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{f.push(s.pu(y,e,n).then((v=>{if((v||n)&&s.isPrimaryClient){const w=v?!v.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(v){a.push(v);const w=rf.As(y.targetId,v);c.push(w)}})))})),await Promise.all(f),s.Pu.H_(a),await(async function(y,v){const w=Te(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>H.forEach(v,(R=>H.forEach(R.Es,(z=>w.persistence.referenceDelegate.addReference(C,R.targetId,z))).next((()=>H.forEach(R.ds,(z=>w.persistence.referenceDelegate.removeReference(C,R.targetId,z)))))))))}catch(C){if(!Zs(C))throw C;re(sf,"Failed to update sequence numbers: "+C)}for(const C of v){const R=C.targetId;if(!C.fromCache){const z=w.Ms.get(R),B=z.snapshotVersion,$=z.withLastLimboFreeSnapshotVersion(B);w.Ms=w.Ms.insert(R,$)}}})(s.localStore,c))}async function B1(i,e){const n=Te(i);if(!n.currentUser.isEqual(e)){re(df,"User change. New user:",e.toKey());const s=await dy(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((y=>{y.reject(new ee(q.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wa(n,s.Ls)}}function $1(i,e){const n=Te(i),s=n.Au.get(e);if(s&&s.hu)return Re().add(s.key);{let a=Re();const c=n.Iu.get(e);if(!c)return a;for(const f of c){const m=n.Tu.get(f);a=a.unionWith(m.view.nu)}return a}}function Dy(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ky.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b1.bind(null,e),e.Pu.H_=C1.bind(null,e.eventManager),e.Pu.yu=R1.bind(null,e.eventManager),e}function q1(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U1.bind(null,e),e}class lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Qw(this.persistence,new Hw,e.initialUser,this.serializer)}Cu(e){return new fy(nf.mi,this.serializer)}Du(e){return new t1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lu.provider={build:()=>new lu};class H1 extends lu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){be(this.persistence.referenceDelegate instanceof ou,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xw(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new fy((s=>ou.mi(s,n)),this.serializer)}}class Oh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Bm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=B1.bind(null,this.syncEngine),await I1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new A1})()}createDatastore(e){const n=Eu(e.databaseInfo.databaseId),s=(function(c){return new o1(c)})(e.databaseInfo);return(function(c,f,m,y){return new c1(c,f,m,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,c,f,m){return new f1(s,a,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Bm(this.syncEngine,n,0)),(function(){return Lm.v()?new Lm:new n1})())}createSyncEngine(e,n){return(function(a,c,f,m,y,v,w){const C=new V1(a,c,f,m,y,v);return w&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Te(n);re(zi,"RemoteStore shutting down."),s.Ea.add(5),await Ea(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Oh.provider={build:()=>new Oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="FirestoreClient";class W1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=$h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{re(ii,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(re(ii,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=hf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function dh(i,e){i.asyncQueue.verifyOperationInProgress(),re(ii,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await dy(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function qm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await G1(i);re(ii,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>bm(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>bm(e.remoteStore,a))),i._onlineComponents=e}async function G1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(ii,"Using user provided OfflineComponentProvider");try{await dh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===q.FAILED_PRECONDITION||a.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await dh(i,new lu)}}else re(ii,"Using default OfflineComponentProvider"),await dh(i,new H1(void 0));return i._offlineComponents}async function Oy(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(ii,"Using user provided OnlineComponentProvider"),await qm(i,i._uninitializedComponentsProvider._online)):(re(ii,"Using default OnlineComponentProvider"),await qm(i,new Oh))),i._onlineComponents}function Q1(i){return Oy(i).then((e=>e.syncEngine))}async function Lh(i){const e=await Oy(i),n=e.eventManager;return n.onListen=N1.bind(null,e.syncEngine),n.onUnlisten=O1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L1.bind(null,e.syncEngine),n}function K1(i,e,n={}){const s=new Xr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,y,v){const w=new My({next:R=>{w.Nu(),f.enqueueAndForget((()=>Sy(c,C))),R.fromCache&&y.source==="server"?v.reject(new ee(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),C=new Ay(m,w,{includeMetadataChanges:!0,qa:!0});return Iy(c,C)})(await Lh(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="firestore.googleapis.com",Wm=!0;class Gm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fy,this.ssl=Wm}else this.host=e.host,this.ssl=e.ssl??Wm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pw)throw new ee(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ly(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tE;switch(s.type){case"firstParty":return new sE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ee(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Hm.get(n);s&&(re("ComponentProvider","Removing Datastore"),Hm.delete(n),s.terminate())})(this),Promise.resolve()}}function Y1(i,e,n,s={}){i=Qn(i,Iu);const a=Uh(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;a&&(Cv(`https://${m}`),xv("Firestore",!0)),c.host!==Fy&&c.host!==m&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:a,emulatorOptions:s};if(!Xl(y,f)&&(i._setSettings(y),s.mockUserToken)){let v,w;if(typeof s.mockUserToken=="string")v=s.mockUserToken,w=Ft.MOCK_USER;else{v=Rv(s.mockUserToken,i._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ee(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ft(C)}i._authCredentials=new nE(new Ig(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class ct{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ya(n,ct._jsonSchema))return new ct(e,s||null,new pe(He.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:ut("string",ct._jsonSchemaVersion),referencePath:ut("string")};class Jr extends ai{constructor(e,n,s){super(e,n,Kh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new pe(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function uu(i,e,...n){if(i=Zn(i),Sg("collection","path",e),i instanceof Iu){const s=He.fromString(e,...n);return om(s),new Jr(i,null,s)}{if(!(i instanceof ct||i instanceof Jr))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return om(s),new Jr(i.firestore,null,s)}}function Su(i,e,...n){if(i=Zn(i),arguments.length===1&&(e=$h.newId()),Sg("doc","path",e),i instanceof Iu){const s=He.fromString(e,...n);return sm(s),new ct(i,null,new pe(s))}{if(!(i instanceof ct||i instanceof Jr))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return sm(s),new ct(i.firestore,i instanceof Jr?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="AsyncQueue";class Km{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new my(this,"async_queue_retry"),this._c=()=>{const s=fh();s&&re(Qm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zs(e))throw e;re(Qm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Er("INTERNAL UNHANDLED ERROR: ",Ym(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=cf.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&ve(47125,{Pc:Ym(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ym(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}class Bi extends Iu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Km,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Km(e),this._firestoreClient=void 0,await e}}}function X1(i,e){const n=typeof i=="object"?i:q0(),s=typeof i=="string"?i:tu,a=j0(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Sv("firestore");c&&Y1(a,...c)}return a}function mf(i){if(i._terminated)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||J1(i),i._firestoreClient}function J1(i){const e=i._freezeSettings(),n=(function(a,c,f,m){return new TE(a,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Ly(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new W1(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(kt.fromBase64String(e))}catch(n){throw new ee(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ya(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ut("string",_n._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(e){if(ya(e,Xn._jsonSchema))return new Xn(e.latitude,e.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:ut("string",Xn._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ya(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Jn(e.vectorValues);throw new ee(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:ut("string",Jn._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=/^__.*__$/;class eT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new _a(e,this.data,n,this.fieldTransforms)}}class by{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:i})}}class gf{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jy(this.Ac)&&Z1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Eu(e)}Cc(e,n,s,a=!1){return new gf({Ac:e,methodName:n,Dc:s,path:Pt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(i){const e=i._freezeSettings(),n=Eu(i._databaseId);return new tT(i._databaseId,!!e.ignoreUndefinedProperties,n)}function nT(i,e,n,s,a,c={}){const f=i.Cc(c.merge||c.mergeFields?2:0,e,n,a);vf("Data must be an object, but it was:",f,s);const m=Uy(s,f);let y,v;if(c.merge)y=new an(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const w=[];for(const C of c.mergeFields){const R=Fh(e,C,n);if(!f.contains(R))throw new ee(q.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);By(w,R)||w.push(R)}y=new an(w),v=f.fieldTransforms.filter((C=>y.covers(C.field)))}else y=null,v=f.fieldTransforms;return new eT(new Jt(m),y,v)}class Ru extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ru}}class _f extends Cu{_toFieldTransform(e){return new QE(e.path,new pa)}isEqual(e){return e instanceof _f}}function rT(i,e,n,s){const a=i.Cc(1,e,n);vf("Data must be an object, but it was:",a,s);const c=[],f=Jt.empty();si(s,((y,v)=>{const w=Ef(e,y,n);v=Zn(v);const C=a.yc(w);if(v instanceof Ru)c.push(w);else{const R=Ta(v,C);R!=null&&(c.push(w),f.set(w,R))}}));const m=new an(c);return new by(f,m,a.fieldTransforms)}function iT(i,e,n,s,a,c){const f=i.Cc(1,e,n),m=[Fh(e,s,n)],y=[a];if(c.length%2!=0)throw new ee(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)m.push(Fh(e,c[R])),y.push(c[R+1]);const v=[],w=Jt.empty();for(let R=m.length-1;R>=0;--R)if(!By(v,m[R])){const z=m[R];let B=y[R];B=Zn(B);const $=f.yc(z);if(B instanceof Ru)v.push(z);else{const M=Ta(B,$);M!=null&&(v.push(z),w.set(z,M))}}const C=new an(v);return new by(w,C,f.fieldTransforms)}function sT(i,e,n,s=!1){return Ta(n,i.Cc(s?4:3,e))}function Ta(i,e){if(zy(i=Zn(i)))return vf("Unsupported field value:",e,i),Uy(i,e);if(i instanceof Cu)return(function(s,a){if(!jy(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const m of s){let y=Ta(m,a.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=Zn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Qe.fromDate(s);return{timestampValue:su(a.serializer,c)}}if(s instanceof Qe){const c=new Qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:su(a.serializer,c)}}if(s instanceof Xn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _n)return{bytesValue:iy(a.serializer,s._byteString)};if(s instanceof ct){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ef(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Jn)return(function(f,m){return{mapValue:{fields:{[Dg]:{stringValue:Mg},[nu]:{arrayValue:{values:f.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return Yh(m.serializer,v)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${hu(s)}`)})(i,e)}function Uy(i,e){const n={};return Rg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(i,((s,a)=>{const c=Ta(a,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function zy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qe||i instanceof Xn||i instanceof _n||i instanceof ct||i instanceof Cu||i instanceof Jn)}function vf(i,e,n){if(!zy(n)||!Ag(n)){const s=hu(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Fh(i,e,n){if((e=Zn(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Ef(i,e);throw cu("Field path arguments must be of type string or ",i,!1,void 0,n)}const oT=new RegExp("[~\\*/\\[\\]]");function Ef(i,e,n){if(e.search(oT)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function cu(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new ee(q.INVALID_ARGUMENT,m+i+y)}function By(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aT extends $y{data(){return super.data()}}function wf(i,e){return typeof e=="string"?Ef(i,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ee(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tf{}class Hy extends Tf{}function lT(i,e,...n){let s=[];e instanceof Tf&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((y=>y instanceof Sf)).length,m=c.filter((y=>y instanceof If)).length;if(f>1||f>0&&m>0)throw new ee(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class If extends Hy{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new If(e,n,s)}_apply(e){const n=this._parse(e);return Wy(e._query,n),new ai(e.firestore,e.converter,Ah(e._query,n))}_parse(e){const n=yf(e.firestore);return(function(c,f,m,y,v,w,C){let R;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ee(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Zm(C,w);const B=[];for(const $ of C)B.push(Jm(y,c,$));R={arrayValue:{values:B}}}else R=Jm(y,c,C)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Zm(C,w),R=sT(m,f,C,w==="in"||w==="not-in");return lt.create(v,w,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sf extends Tf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sf(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:On.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let f=a;const m=c.getFlattenedFilters();for(const y of m)Wy(f,y),f=Ah(f,y)})(e._query,n),new ai(e.firestore,e.converter,Ah(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Af extends Hy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Af(e,n)}_apply(e){const n=(function(a,c,f){if(a.startAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new da(c,f)})(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new eo(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function uT(i,e="asc"){const n=e,s=wf("orderBy",i);return Af._create(s,n)}function Jm(i,e,n){if(typeof(n=Zn(n))=="string"){if(n==="")throw new ee(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bg(e)&&n.indexOf("/")!==-1)throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!pe.isDocumentKey(s))throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pm(i,new pe(s))}if(n instanceof ct)return pm(i,n._key);throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hu(n)}.`)}function Zm(i,e){if(!Array.isArray(i)||i.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wy(i,e){const n=(function(a,c){for(const f of a)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cT{convertValue(e,n="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return si(e,((a,c)=>{s[a]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[nu].arrayValue?.values?.map((s=>it(s.doubleValue)));return new Jn(n)}convertGeoPoint(e){return new Xn(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=ei(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);be(cy(s),9688,{name:e});const a=new ha(s.get(1),s.get(3)),c=new pe(s.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bi extends $y{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(wf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:ut("string",bi._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class Kl extends bi{data(e={}){return super.data(e)}}class ji{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ta(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Kl(this._firestore,this._userDataWriter,s.key,s,new ta(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((m=>{const y=new Kl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ta(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new Kl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ta(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,w=-1;return m.type!==0&&(v=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),w=f.indexOf(m.doc.key)),{type:fT(m.type),doc:y,oldIndex:v,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ji._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$h.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}ji._jsonSchemaVersion="firestore/querySnapshot/1.0",ji._jsonSchema={type:ut("string",ji._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class Cf extends cT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function Gy(i){i=Qn(i,ai);const e=Qn(i.firestore,Bi),n=mf(e),s=new Cf(e);return qy(i._query),K1(n,i._query).then((a=>new ji(e,s,i,a)))}function Qy(i,e,n,...s){i=Qn(i,ct);const a=Qn(i.firestore,Bi),c=yf(a);let f;return f=typeof(e=Zn(e))=="string"||e instanceof Au?iT(c,"updateDoc",i._key,e,n,s):rT(c,"updateDoc",i._key,e),Rf(a,[f.toMutation(i._key,Mn.exists(!0))])}function dT(i){return Rf(Qn(i.firestore,Bi),[new Xh(i._key,Mn.none())])}function pT(i,e){const n=Qn(i.firestore,Bi),s=Su(i),a=hT(i.converter,e);return Rf(n,[nT(yf(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Mn.exists(!1))]).then((()=>s))}function mT(i,...e){i=Zn(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xm(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xm(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,f,m;if(i instanceof ct)f=Qn(i.firestore,Bi),m=Kh(i._key.path),c={next:y=>{e[s]&&e[s](gT(f,i,y))},error:e[s+1],complete:e[s+2]};else{const y=Qn(i,ai);f=Qn(y.firestore,Bi),m=y._query;const v=new Cf(f);c={next:w=>{e[s]&&e[s](new ji(f,v,y,w))},error:e[s+1],complete:e[s+2]},qy(i._query)}return(function(v,w,C,R){const z=new My(R),B=new Ay(w,z,C);return v.asyncQueue.enqueueAndForget((async()=>Iy(await Lh(v),B))),()=>{z.Nu(),v.asyncQueue.enqueueAndForget((async()=>Sy(await Lh(v),B)))}})(mf(f),m,a,c)}function Rf(i,e){return(function(s,a){const c=new Xr;return s.asyncQueue.enqueueAndForget((async()=>F1(await Q1(s),a,c))),c.promise})(mf(i),e)}function gT(i,e,n){const s=n.docs.get(e._key),a=new Cf(i);return new bi(i,a,e._key,s,new ta(n.hasPendingWrites,n.fromCache),e.converter)}function yT(){return new _f("serverTimestamp")}(function(e,n=!0){(function(a){Xs=a})($0),Zl(new aa("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Bi(new rE(s.getProvider("auth-internal")),new oE(f,s.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ee(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ha(v.options.projectId,w)})(f,a),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Bs(tm,nm,e),Bs(tm,nm,"esm2020")})();const _T="modulepreload",vT=function(i,e){return new URL(i,e).href},eg={},ET=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let v=function(w){return Promise.all(w.map(C=>Promise.resolve(C).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};const f=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),y=m?.nonce||m?.getAttribute("nonce");a=v(n.map(w=>{if(w=vT(w,s),w in eg)return;eg[w]=!0;const C=w.endsWith(".css"),R=C?'[rel="stylesheet"]':"";if(!!s)for(let $=f.length-1;$>=0;$--){const M=f[$];if(M.href===w&&(!C||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${R}`))return;const B=document.createElement("link");if(B.rel=C?"stylesheet":_T,C||(B.as="script"),B.crossOrigin="",B.href=w,y&&B.setAttribute("nonce",y),document.head.appendChild(B),C)return new Promise(($,M)=>{B.addEventListener("load",$),B.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return a.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};var wT="firebase",TT="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(wT,TT,"app");const IT={apiKey:"AIzaSyBhAiDI1pfGZhFhrmkBP1UIWQd0LwHghxw",authDomain:"react-wishlist-1e632.firebaseapp.com",projectId:"react-wishlist-1e632",storageBucket:"react-wishlist-1e632.firebasestorage.app",messagingSenderId:"825865680841",appId:"1:825865680841:web:b40de5ac90e201d1e35a18",measurementId:"G-2978XB21ZK"},Ky=dg(IT);typeof window<"u"&&ET(()=>import("./index.esm-B6sU2OaY.js"),[],import.meta.url).then(i=>{try{i.getAnalytics(Ky)}catch{}}).catch(()=>{});const $i=X1(Ky);function ST(i,e){const n=lT(uu($i,"gifts"),uT("createdAt","desc"));let s=!1;return mT(n,async c=>{try{console.debug("subscribeToGifts snapshot size:",c.size);try{const m=c.docs.map(v=>v.id),y=c.docs.map(v=>v.data().name||"<no-name>");console.debug("subscribeToGifts snapshot ids:",m),console.debug("subscribeToGifts snapshot titles:",y)}catch(m){console.debug("subscribeToGifts: failed to enumerate docs",m)}const f=c.docs.map(m=>({id:m.id,...m.data()}));if(i(f),!s){s=!0;try{e?.()}catch(m){console.debug("subscribeToGifts onInitialized threw",m)}}if(c.empty){const m=await Gy(uu($i,"gifts"));if(!m.empty){console.warn("subscribeToGifts: ordered query returned empty, but unordered query returned docs. This may indicate missing createdAt fields.");const y=m.docs.map(v=>({id:v.id,...v.data()}));i(y)}}}catch(f){console.error("subscribeToGifts processing error",f)}},c=>{console.error("subscribeToGifts onSnapshot error",c)})}async function AT(i){return pT(uu($i,"gifts"),{...i,isBooked:!1,bookedBy:null,createdAt:yT()})}async function CT(i,e){const n=Su($i,"gifts",i);return Qy(n,{isBooked:e!=null,bookedBy:e??null})}async function RT(i){return dT(Su($i,"gifts",i))}async function PT(){try{const i=await Gy(uu($i,"gifts")),e=[];if(i.docs.forEach(n=>{const s=n.data();(s.createdAt===void 0||s.createdAt===null)&&e.push({id:n.id,ref:Su($i,"gifts",n.id)})}),e.length===0){console.info("migrateMissingCreatedAt: no documents missing createdAt");return}console.info(`migrateMissingCreatedAt: updating ${e.length} documents`);for(const n of e)await Qy(n.ref,{createdAt:new Date});console.info("migrateMissingCreatedAt: done")}catch(i){console.error("migrateMissingCreatedAt error",i)}}const tg="wishlist-items-v1";function kT(){const[i,e]=Oe.useState([]),[n,s]=Oe.useState(!0),[a,c]=Oe.useState(new Set),[f,m]=Oe.useState({}),[y,v]=Oe.useState({}),[w,C]=Oe.useState(new Set);Oe.useEffect(()=>{try{const $=localStorage.getItem(tg);if($){const M=JSON.parse($);Array.isArray(M)&&M.length&&e(M)}}catch{}},[]),Oe.useEffect(()=>{try{localStorage.setItem(tg,JSON.stringify(i))}catch{}},[i]),Oe.useEffect(()=>{const $=ST(e,()=>{s(!1)});return()=>$()},[]);const R=Oe.useCallback(async $=>{const M=$.id;console.debug("deleteItem (optimistic) called for",M,$.name);const fe=i.findIndex(ce=>ce.id===M);v(ce=>({...ce,[M]:fe>=0?fe:Object.keys(ce).length})),c(ce=>{const ie=new Set(ce);return ie.add(M),ie}),m(ce=>({...ce,[M]:$}));const de=setTimeout(()=>{c(ce=>{const ie=new Set(ce);return ie.delete(M),ie}),C(ce=>{const ie=new Set(ce);return ie.add(M),ie})},420);try{await RT(M),console.debug("deleteGift succeeded for",M),clearTimeout(de),m(ce=>{const ie={...ce};return delete ie[M],ie}),v(ce=>{const ie={...ce};return delete ie[M],ie}),C(ce=>{const ie=new Set(ce);return ie.delete(M),ie})}catch(ce){console.error("deleteGift failed, rolling back",ce,M),clearTimeout(de),C(ie=>{const le=new Set(ie);return le.delete(M),le}),c(ie=>{const le=new Set(ie);return le.delete(M),le}),m(ie=>{const le={...ie};return delete le[M],le}),v(ie=>{const le={...ie};return delete le[M],le});try{typeof window<"u"&&window.alert(" .   .")}catch{}}},[i]),z=Oe.useCallback(async($,M)=>{try{await CT($,M===""?null:M??null)}catch(fe){console.error("updateBooking error",fe),typeof window<"u"&&window.alert("   .    .      .")}},[]),B=Oe.useMemo(()=>{const $=i.filter(M=>!w.has(M.id));return Object.keys(y).forEach(M=>{const fe=y[M],me=$.findIndex(ie=>ie.id===M);if(w.has(M))return;const de=$.find(ie=>ie.id===M)||f[M];if(!de)return;me>=0&&$.splice(me,1);const ce=Math.max(0,Math.min(fe,$.length));$.splice(ce,0,de)}),Object.keys(f).forEach(M=>{w.has(M)||$.find(fe=>fe.id===M)||$.push(f[M])}),$},[i,f,y,w]);return{items:i,displayItems:B,loading:n,pendingDeletes:a,deleteItem:R,toggleBooked:z}}function ng(i=10){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let n="";const s=new Uint32Array(i);crypto.getRandomValues(s);for(let a=0;a<i;a++)n+=e[s[a]%e.length];return n}const Yy=2300,Xy=600,xT=Yy+Xy;function VT(){const[i,e]=Oe.useState([]),[n,s]=Oe.useState([]),a=Oe.useRef([]),c=Oe.useRef([]),f=Oe.useRef(null),m=Oe.useCallback(()=>{let v=performance.now();const w=.05,C=xT,R=()=>{const z=performance.now(),B=(z-v)/1e3;v=z;let $=!1;a.current=a.current.filter(M=>z-M.born>C?!1:(M.x+=M.vx*B,M.y+=M.vy*B,M.vx*=1-w*B,M.r+=M.vr*B,$=!0,M.y<=window.scrollY+window.innerHeight+120)),c.current=c.current.filter(M=>z-M.born>C?!1:(M.x+=M.vx*B,M.y+=M.vy*B,M.vx*=1-w*.5*B,M.r+=M.vr*B,$=!0,M.y<=window.scrollY+window.innerHeight+120)),$&&(e([...a.current]),s([...c.current])),a.current.length||c.current.length?f.current=requestAnimationFrame(R):f.current=null};f.current=requestAnimationFrame(R)},[]),y=Oe.useCallback(()=>{const w=performance.now(),C=["rgb(255,0,43)","rgb(228,0,43)","rgba(255,0,43,0.75)","rgba(228,0,43,0.65)"],R=window.innerWidth,z=window.innerHeight,B=Array.from({length:60},()=>({id:ng(),x:Math.random()*R,y:window.scrollY+Math.random()*z,vx:(Math.random()*2-1)*25,vy:50+Math.random()*120,r:Math.random()*360,vr:(Math.random()*2-1)*60,font:24+Math.random()*60,born:w,color:C[Math.floor(Math.random()*C.length)]})),M=Array.from({length:180},()=>({id:ng(),x:Math.random()*R,y:window.scrollY+Math.random()*z,vx:(Math.random()*2-1)*60,vy:30+Math.random()*80,r:Math.random()*360,vr:(Math.random()*2-1)*180,size:8+Math.random()*16,born:w,color:C[Math.floor(Math.random()*C.length)]}));a.current=[...a.current,...B].slice(-800),c.current=[...c.current,...M].slice(-800*2),e(a.current),s(c.current),f.current==null&&m()},[m]);return{bursts:i,miniFireworks:n,spawn25:y,PARTICLE_FADE_START:Yy,PARTICLE_FADE_DURATION:Xy}}const NT=""+new URL("photo-Bu3m49K9.jpg",import.meta.url).href,DT=({fancy:i,loading:e,hasItems:n,onToggleFancy:s,onSpawn25:a,children:c})=>Y.jsxs("header",{className:"relative w-full max-w-3xl pt-6 flex flex-col items-center text-center",children:[Y.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[Y.jsxs("button",{type:"button",onClick:s,className:"rounded-full bg-accent/10 text-accent px-3 py-1 text-xs font-medium hover:bg-accent/20 transition",children:[i?"Classic":"Fancy"," UI"]}),e&&n&&Y.jsx("div",{className:"flex items-center gap-2 rounded-full bg-neutral-50/60 px-3 py-1 text-xs text-neutral-600",children:""}),typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Y.jsx("button",{type:"button",onClick:()=>PT().catch(f=>console.error(f)),className:"rounded-full bg-red-100 text-red-700 px-3 py-1 text-xs font-medium hover:bg-red-200 transition",title:"Fix missing createdAt in Firestore (dev only)",children:"Fix timestamps"})]}),Y.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[Y.jsx("div",{className:"font-extrabold tracking-tight text-accent text-2xl sm:text-3xl md:text-4xl leading-snug",children:"Wishlist"}),Y.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[Y.jsx("div",{className:"relative","aria-label":"",children:Y.jsx("div",{className:"h-48 w-48 sm:h-56 sm:w-56 rounded-full border-4 border-accent flex items-center justify-center overflow-hidden bg-white shadow-md select-none",children:Y.jsx("img",{src:NT,alt:"",className:"h-full w-full object-cover pointer-events-none"})})}),Y.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tight text-accent drop-shadow-sm select-none",children:"Happy Birthday"}),Y.jsx("div",{onClick:a,className:"text-5xl sm:text-6xl font-black text-neutral-900/90 select-none cursor-pointer transition-transform active:scale-90 hover:scale-105",title:"Fire 25 fireworks",children:"25"})]})]}),c]}),Jy=[" 1000"," 2000"," 3000",""],rg={name:"",description:"",category:Jy[0]},MT=({fancy:i})=>{const[e,n]=Oe.useState(rg),s=(f,m)=>{n(y=>({...y,[f]:m}))},a=()=>n(rg),c=async f=>{if(f.preventDefault(),!!e.name.trim())try{await AT({name:e.name.trim(),description:e.description.trim(),category:e.category}),a()}catch(m){console.error("addGift error",m)}};return Y.jsxs("form",{onSubmit:c,className:`mt-8 w-full grid gap-4 rounded-xl p-5 border shadow-sm md:grid-cols-2 ${i?"glass border-white/40 card-elevated":"bg-white border-neutral-200"}`,children:[Y.jsx("div",{className:"flex flex-col gap-2 md:col-span-2",children:Y.jsx("input",{type:"text",placeholder:" ",value:e.name,onChange:f=>s("name",f.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none",required:!0})}),Y.jsx("div",{className:"flex flex-col gap-2 md:col-span-2",children:Y.jsx("textarea",{placeholder:" / ",value:e.description,onChange:f=>s("description",f.target.value),rows:3,className:"w-full resize-y rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none"})}),Y.jsx("div",{className:"flex flex-col gap-2",children:Y.jsx("select",{value:e.category,onChange:f=>s("category",f.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-4 py-3 text-sm focus:border-accent focus:outline-none",children:Jy.map(f=>Y.jsx("option",{children:f},f))})}),Y.jsx("div",{className:"flex flex-col gap-2",children:Y.jsx("button",{type:"submit",className:"h-full rounded-md bg-accent px-6 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-booked focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:""})})]})},ig=[" 1000"," 2000"," 3000",""],OT=({selectedCategory:i,onSelectCategory:e})=>Y.jsxs("div",{className:"col-span-full flex items-center justify-between gap-3 mb-2",children:[Y.jsxs("select",{value:i,onChange:n=>e(n.target.value),className:"block md:hidden rounded-md border px-3 py-2 text-sm","aria-label":" ",children:[Y.jsx("option",{value:"all",children:" "}),ig.map(n=>Y.jsx("option",{value:n,children:n},n))]}),Y.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>e("all"),className:`px-3 py-1 rounded-full text-sm ${i==="all"?"bg-accent text-white":"bg-neutral-100 text-neutral-700"}`,children:""}),ig.map(n=>Y.jsx("button",{type:"button",onClick:()=>e(n),className:`px-3 py-1 rounded-full text-sm ${i===n?"bg-accent text-white":"bg-neutral-100 text-neutral-700"}`,children:n},n))]})]}),LT=({item:i,onClose:e,onConfirm:n})=>{const s=Oe.useRef(null);return Oe.useEffect(()=>{if(i){const a=setTimeout(()=>s.current?.focus(),0);return()=>clearTimeout(a)}},[i]),Oe.useEffect(()=>{const a=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),i?Y.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center px-4",children:[Y.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),Y.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title",className:"relative z-50 w-full max-w-md transform rounded-xl bg-white p-6 shadow-2xl transition-all duration-200 ease-out translate-y-0",children:[Y.jsx("h3",{id:"confirm-title",className:"text-lg font-semibold text-neutral-900",children:" "}),Y.jsxs("p",{className:"mt-2 text-sm text-neutral-600",children:[" ,     ",Y.jsxs("span",{className:"font-semibold",children:['"',i.name,'"']}),i.category?`  ${i.category}`:"","?"]}),Y.jsxs("p",{className:"mt-2 text-xs text-neutral-400 break-words",children:["ID: ",Y.jsx("span",{className:"font-mono text-xs text-neutral-600",children:i.id})]}),Y.jsxs("div",{className:"mt-4 flex items-center justify-end gap-3",children:[Y.jsx("button",{type:"button",onClick:e,className:"rounded-md px-4 py-2 bg-neutral-100 text-neutral-800 hover:bg-neutral-200 transition",children:""}),Y.jsx("button",{ref:s,type:"button",onClick:()=>n(i),className:"rounded-md px-4 py-2 bg-red-600 text-white hover:bg-red-700 transition",children:""})]})]})]}):null},FT=({bursts:i,miniFireworks:e,fadeStart:n,fadeDuration:s})=>Y.jsxs("div",{className:"pointer-events-none fixed inset-0 z-50 overflow-hidden",children:[i.map(a=>{const c=performance.now()-a.born,f=c<120?c/120:c>n?Math.max(0,1-(c-n)/s):1,m=Math.min(1,c/900);let v=.4+(1-Math.pow(1-m,3))*.8;return c>n&&(v*=.9),Y.jsx("div",{className:"font-black select-none",style:{position:"absolute",left:0,top:0,transform:`translate(${a.x}px, ${a.y}px) translate(-50%, -50%) rotate(${Math.round(a.r)}deg) scale(${v.toFixed(3)})`,fontSize:a.font,opacity:f,color:a.color,textShadow:`0 0 4px ${a.color}55, 0 0 10px ${a.color}55, 0 2px 4px rgba(0,0,0,.25)`,filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.25))",willChange:"transform, opacity"},children:"25"},a.id)}),e.map(a=>{const c=performance.now()-a.born,f=c<100?c/100:c>n?Math.max(0,1-(c-n)/s):1,m=Math.min(1,c/600);let v=.3+(1-Math.pow(1-m,2))*.7;return c>n&&(v*=.8),Y.jsx("div",{className:"font-bold select-none",style:{position:"absolute",left:0,top:0,transform:`translate(${a.x}px, ${a.y}px) translate(-50%, -50%) rotate(${Math.round(a.r)}deg) scale(${v.toFixed(3)})`,fontSize:a.size,opacity:f,color:a.color,textShadow:`0 0 2px ${a.color}77, 0 0 6px ${a.color}44`,filter:"drop-shadow(0 2px 3px rgba(0,0,0,0.2))",willChange:"transform, opacity"},children:""},a.id)})]}),bT=()=>Y.jsx("div",{className:"col-span-full flex items-center justify-center py-16",children:Y.jsxs("div",{role:"status","aria-live":"polite",className:"flex flex-col items-center gap-4",children:[Y.jsxs("svg",{className:"w-16 h-16 text-accent",viewBox:"0 0 50 50","aria-hidden":"true",focusable:"false",children:[Y.jsx("defs",{children:Y.jsxs("linearGradient",{id:"g1",x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[Y.jsx("stop",{offset:"0%",stopColor:"#ff0045"}),Y.jsx("stop",{offset:"100%",stopColor:"#ff6b85"})]})}),Y.jsx("circle",{cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"4",className:"opacity-20",fill:"none"}),Y.jsx("path",{d:"M45 25a20 20 0 0 1-20 20",stroke:"url(#g1)",strokeWidth:"4",strokeLinecap:"round",fill:"none",className:"origin-center animate-spin",style:{transformOrigin:"25px 25px"}})]}),Y.jsx("div",{className:"text-sm text-neutral-500",children:" "})]})}),jT=()=>{const{displayItems:i,loading:e,pendingDeletes:n,deleteItem:s,toggleBooked:a}=kT(),{bursts:c,miniFireworks:f,spawn25:m,PARTICLE_FADE_START:y,PARTICLE_FADE_DURATION:v}=VT(),[w,C]=Oe.useState(null),[R,z]=Oe.useState(!0),[B,$]=Oe.useState("all"),M=Oe.useCallback(ie=>{C(ie)},[]),fe=Oe.useCallback(async ie=>{C(null);try{await s(ie)}catch(le){console.error("confirm modal delete error",le)}},[s]),me=ie=>{const le=ie.createdAt;if(!le)return 0;if(typeof le=="object"&&(le.seconds||le.toDate))try{return le.seconds?le.seconds*1e3:le.toDate().getTime()}catch{return 0}if(le instanceof Date)return le.getTime();const V=Date.parse(String(le));return isNaN(V)?0:V},de=Oe.useMemo(()=>i.filter(le=>B==="all"||le.category===B).sort((le,V)=>me(V)-me(le)),[i,B]),ce=e&&i.length===0;return Y.jsxs("div",{className:`relative min-h-screen w-full flex flex-col items-center px-4 pb-16 ${R?"design-grid":""}`,children:[Y.jsx(DT,{fancy:R,loading:e,hasItems:i.length>0,onToggleFancy:()=>z(ie=>!ie),onSpawn25:m,children:Y.jsx(MT,{fancy:R})}),Y.jsxs("main",{className:"w-full max-w-6xl mt-10 grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[Y.jsx(OT,{selectedCategory:B,onSelectCategory:$}),ce?Y.jsx(bT,{}):de.length===0?Y.jsx("p",{className:"col-span-full text-center text-sm text-neutral-500",children:"     !"}):de.map(ie=>Y.jsx(dv,{item:ie,onToggle:a,onDelete:()=>M(ie),isDeleting:n.has(ie.id)},ie.id))]}),Y.jsx(FT,{bursts:c,miniFireworks:f,fadeStart:y,fadeDuration:v}),Y.jsx(LT,{item:w,onClose:()=>C(null),onConfirm:fe})]})};fv.createRoot(document.getElementById("root")).render(Y.jsx(sv.StrictMode,{children:Y.jsx(jT,{})}));export{aa as C,ug as E,Ys as F,cg as L,Zl as _,j0 as a,Zn as b,zT as c,Xl as d,Mv as e,BT as f,q0 as g,UT as i,s0 as o,Bs as r,Ov as v};
